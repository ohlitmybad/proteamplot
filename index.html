<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            background-color: var(--header-bg);
            display: flex;
            padding: 20px;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: relative;
            font-family: system-ui;
            top: 0;
            z-index: 100;
        }


        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }


  
  .search-input-modal {
      display: none;
      position: fixed; 
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7); 
      z-index: 999; 
  }
  
  .search-input-container {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border-radius: 4px;
      z-index: 1000; 
  }
  
  #searchInput {
              width: 370px;
              padding: 12px;
              border: 3px solid #ccc;
              border-radius: 4px;
              font-size: 18.3px;
              outline: none;
              height: 50px;
              color: #000000;
              background-color: #fff;
              ;          }
  
          #autocompleteBox {
              width: 370px;
              max-height: 150px;
              overflow-y: auto;
              background-color: #fff;
          }
  
  
          #autocompleteBox ul {
              list-style: none;
              padding: 0;
              margin: 0;
          }
  
          #autocompleteBox li {
              margin: 0;
              padding: 5px;
          }
  
          #autocompleteBox {
              line-height: 2; 
              text-align: center !important;
  
          }
  
          #autocompleteBox a {
              text-decoration: none;
              font-family: Arial, sans-serif;
              text-align: center !important;
              color: #333 !important;
              cursor: pointer; 
          }
  
          #autocompleteBox li:hover {
              background-color: #f0f0f0;
          }
          #searchButton3 {
            padding: 8.5px;  /* Reduced from 10px */
  background-color: #0074d9;
  color: #fff;
  border: none;
  width: 34px;  /* Reduced from 40px */
  height: 34px;  /* Reduced from 40px */
  border-radius: 50%;
  cursor: pointer;
  font-size: 17px;  /* Reduced from 20px */
  }


  body.dark-mode .header .button10 {
      color: #aeaeae;
}
body.dark-mode .header .button10:hover {
  color: #2563eb;
background-color: #ffffff;
}

    body.dark-mode header a {
      color: #aeaeae;
}

body.dark-mode .header .logo img {
  opacity: 0.88;
}


body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

.header .logo {
  display: flex;
  align-items: center;
  margin-right: auto; /* Push logo to the left */
}

.header .logo img {
  height: 34px;
  width: auto;
  opacity: 0.84;
}
.header .logo-text {
  margin-left: 10px;
  font-size: 23px;
  font-weight: 600;
  transform: translateY(-1.1px); /* Move logo text slightly higher */
}

.header .navigation {
  display: flex;
  align-items: center;
  gap: 25px; /* Reduced gap between buttons */
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px); /* Center the navigation and move it higher */
}



.header .button10 {
  padding: 0.5rem 1rem;
  text-decoration: none;
  color: #333;
  line-height: 1.6;
  border-radius: 4px;
  transition: background-color 0.2s;
  font-size: 1.1rem;  /* Added larger font size */
}


.header .button10:hover {
  background-color: #f0f0f0;
  color: #2563eb;

}



/* Group search and language buttons */
.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto; /* Push buttons to the right */
  transform: translateY(-1.25px); /* Move search and language buttons higher */
}

header a {
      color: black;
      text-decoration: none;
    }

    .language-switcher-container {
  position: relative;
  display: none;
}

.language-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  color: #444444;
  display: flex;
  align-items: center;
  font-size: 17px;
}

.language-button iconify-icon {
  font-size: 24px;
  opacity: 0.7;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 10px;
  width: 200px;
  z-index: 1000;
}

.language-option {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  color: #444444;
  text-decoration: none;
}



.language-option iconify-icon {
  margin-right: 10px;
  font-size: 20px;
}

.language-dropdown.show {
  display: block;
}

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
@media screen and (max-width: 550px) { .header .navigation { display: none; } }

        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 



        .dark-mode #searchButton3 {
            background-color: #0074d9;
            color: #fff;
        }


        .dark-mode .header .button10 {
            color: #aaa;
        }

        .dark-mode .header .button10:hover {
            color: #2563eb;
            background-color: #1a1a1a;
        }

        .dark-mode header a {
            color: #aaa;
        }

        .dark-mode .header .logo img {
            opacity: 0.9;
            filter: brightness(0.9);
        }

        .dark-mode .language-button {
            background-color: #0e0f0f;
            color: #aaa;
        }

        .dark-mode .language-button:hover {
            background-color: #1a1a1a;
        }

        .dark-mode .language-dropdown {
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .language-option {
            color: #e0e0e0;
        }

        .dark-mode .language-option:hover {
            background-color: #252525;
        }

        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

#SFctr {
	font-size: 15px !important;
}

#SFctr .SFfrm {
    margin-top: 20px;
margin-left: 10px;
}
	    
#SFctr td {
	font-family: Arial, Helvetica, sans-serif !important;
}

body.dark-mode #SFctr td {
	color: #f3f6f4 !important;
}
	    
#SFctr input[type="text"],
#SFctr input[type="password"],
#SFctr input[type="email"] {
	border-radius: 8px;

}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        
        var _0xbcd8be=_0x3b9a;(function(_0x17d2ab,_0x25d328){var _0x3823ab=_0x3b9a,_0x23644d=_0x17d2ab();while(!![]){try{var _0x3746a0=-parseInt(_0x3823ab(0x290))/0x1*(parseInt(_0x3823ab(0x270))/0x2)+-parseInt(_0x3823ab(0x25a))/0x3*(parseInt(_0x3823ab(0x208))/0x4)+-parseInt(_0x3823ab(0x29d))/0x5*(parseInt(_0x3823ab(0x24a))/0x6)+-parseInt(_0x3823ab(0x1e2))/0x7*(parseInt(_0x3823ab(0x2c3))/0x8)+parseInt(_0x3823ab(0x2a1))/0x9+-parseInt(_0x3823ab(0x26e))/0xa*(parseInt(_0x3823ab(0x2ae))/0xb)+parseInt(_0x3823ab(0x227))/0xc;if(_0x3746a0===_0x25d328)break;else _0x23644d['push'](_0x23644d['shift']());}catch(_0x18754c){_0x23644d['push'](_0x23644d['shift']());}}}(_0x207f,0xce782));let initializeCustomSelectors=function(){var _0x1c933c=_0x3b9a;const _0x4579ca=document[_0x1c933c(0x264)]('league-select-trigger'),_0x4271ea=document['getElementById'](_0x1c933c(0x23c)),_0x195aae=document[_0x1c933c(0x264)](_0x1c933c(0x1de));setupCustomSelect(_0x4579ca,_0x4271ea,_0x195aae);const _0x58a6db=document[_0x1c933c(0x264)](_0x1c933c(0x1e8)),_0x280dba=document[_0x1c933c(0x264)](_0x1c933c(0x20c)),_0x49f3b4=document[_0x1c933c(0x264)](_0x1c933c(0x277));populateMetricOptions(_0x280dba,header[_0x1c933c(0x1ee)](0x3),function(_0x3309a8,_0x5b8d5b){var _0x22f365=_0x1c933c;_0x58a6db[_0x22f365(0x263)](_0x22f365(0x28c))['textContent']===_0x5b8d5b&&_0x3309a8['classList'][_0x22f365(0x223)](_0x22f365(0x22b));if(_0x5b8d5b===header[0x3]){_0x3309a8[_0x22f365(0x2b1)][_0x22f365(0x223)](_0x22f365(0x22b)),_0x58a6db[_0x22f365(0x263)]('span')[_0x22f365(0x1d8)]=_0x5b8d5b;const _0x3dcb8b=_0x5b8d5b[_0x22f365(0x1f1)]()['replace'](/ /g,'-')[_0x22f365(0x224)](/%/g,'pct');_0x58a6db[_0x22f365(0x263)](_0x22f365(0x28c))[_0x22f365(0x1e6)](_0x22f365(0x2b5),'metrics.'+_0x3dcb8b);}}),setupCustomSelect(_0x58a6db,_0x280dba,_0x49f3b4);const _0x47e46d=document[_0x1c933c(0x264)](_0x1c933c(0x23f)),_0x1539d8=document['getElementById'](_0x1c933c(0x252)),_0x29adc7=document[_0x1c933c(0x264)](_0x1c933c(0x1d9));populateMetricOptions(_0x1539d8,header[_0x1c933c(0x1ee)](0x3),function(_0x5335bb,_0x563cae){var _0x1c0cf2=_0x1c933c;_0x47e46d[_0x1c0cf2(0x263)](_0x1c0cf2(0x28c))[_0x1c0cf2(0x1d8)]===_0x563cae&&_0x5335bb[_0x1c0cf2(0x2b1)][_0x1c0cf2(0x223)](_0x1c0cf2(0x22b));if(_0x563cae===header[0x4]){_0x5335bb['classList'][_0x1c0cf2(0x223)](_0x1c0cf2(0x22b)),_0x47e46d['querySelector'](_0x1c0cf2(0x28c))[_0x1c0cf2(0x1d8)]=_0x563cae;const _0x188c70=_0x563cae['toLowerCase']()[_0x1c0cf2(0x224)](/ /g,'-')[_0x1c0cf2(0x224)](/%/g,_0x1c0cf2(0x218));_0x47e46d[_0x1c0cf2(0x263)](_0x1c0cf2(0x28c))[_0x1c0cf2(0x1e6)](_0x1c0cf2(0x2b5),_0x1c0cf2(0x1d2)+_0x188c70);}}),setupCustomSelect(_0x47e46d,_0x1539d8,_0x29adc7);};function populateMetricOptions(_0xaddac5,_0x462b2f,_0x2c1e86){var _0x43e527=_0x3b9a;_0xaddac5['innerHTML']='',_0x462b2f[_0x43e527(0x27a)](function(_0x17869b){var _0x4f306a=_0x43e527;const _0x5d2966=document[_0x4f306a(0x1ff)]('div');_0x5d2966['className']=_0x4f306a(0x25d),_0x5d2966['setAttribute'](_0x4f306a(0x1e5),_0x17869b);const _0x3fa8bc=document['createElement'](_0x4f306a(0x28c));_0x3fa8bc[_0x4f306a(0x1d8)]=_0x17869b;const _0x57af92=_0x17869b[_0x4f306a(0x1f1)]()['replace'](/ /g,'-')[_0x4f306a(0x224)](/%/g,_0x4f306a(0x218));_0x3fa8bc[_0x4f306a(0x1e6)](_0x4f306a(0x2b5),_0x4f306a(0x1d2)+_0x57af92),_0x5d2966[_0x4f306a(0x1fe)](_0x3fa8bc);if(_0x2c1e86)_0x2c1e86(_0x5d2966,_0x17869b);_0xaddac5[_0x4f306a(0x1fe)](_0x5d2966);});}function setupCustomSelect(_0x13f832,_0x6acd0e,_0x381b7c){var _0x41ff55=_0x3b9a;_0x13f832[_0x41ff55(0x26f)]('click',function(){var _0x3b2afe=_0x41ff55;document['querySelectorAll'](_0x3b2afe(0x296))[_0x3b2afe(0x27a)](function(_0x517c62){var _0x9c6ff9=_0x3b2afe;if(_0x517c62!==_0x13f832){_0x517c62[_0x9c6ff9(0x2b1)][_0x9c6ff9(0x27e)]('open');const _0x39d838=_0x517c62[_0x9c6ff9(0x230)];if(_0x39d838)_0x39d838[_0x9c6ff9(0x285)]['display']='none';}}),_0x13f832['classList'][_0x3b2afe(0x25e)](_0x3b2afe(0x1dc));const _0x1ed194=_0x13f832[_0x3b2afe(0x2b1)]['contains'](_0x3b2afe(0x1dc));_0x6acd0e[_0x3b2afe(0x285)]['display']=_0x1ed194?'block':'none';});const _0x7e2776=_0x6acd0e[_0x41ff55(0x2b6)]('.custom-select-option,\x20.metric-select-option');_0x7e2776[_0x41ff55(0x27a)](_0x465c42=>{var _0x13c4df=_0x41ff55;_0x465c42['addEventListener'](_0x13c4df(0x237),function(){var _0x519bb4=_0x13c4df;_0x7e2776[_0x519bb4(0x27a)](_0x400e3b=>_0x400e3b[_0x519bb4(0x2b1)][_0x519bb4(0x27e)](_0x519bb4(0x22b))),this[_0x519bb4(0x2b1)][_0x519bb4(0x223)](_0x519bb4(0x22b));const _0x7d347f=this[_0x519bb4(0x263)](_0x519bb4(0x28c))['textContent'],_0x595855=this['querySelector']('span')['getAttribute'](_0x519bb4(0x2b5)),_0x34004d=this[_0x519bb4(0x263)](_0x519bb4(0x2b9));_0x13f832[_0x519bb4(0x28f)]='';if(_0x34004d){const _0x4d0b2e=_0x34004d[_0x519bb4(0x256)](!![]);_0x4d0b2e[_0x519bb4(0x285)][_0x519bb4(0x225)]=_0x519bb4(0x29b),_0x13f832[_0x519bb4(0x1fe)](_0x4d0b2e);}const _0x3c8e64=document[_0x519bb4(0x1ff)](_0x519bb4(0x28c));_0x3c8e64[_0x519bb4(0x1d8)]=_0x7d347f;_0x595855&&_0x3c8e64[_0x519bb4(0x1e6)](_0x519bb4(0x2b5),_0x595855);_0x13f832['appendChild'](_0x3c8e64);const _0x3eb3e3=this[_0x519bb4(0x297)]('data-value');_0x381b7c[_0x519bb4(0x1df)]=_0x3eb3e3||_0x7d347f;const _0x2106d1=new Event(_0x519bb4(0x20a));_0x381b7c[_0x519bb4(0x24e)](_0x2106d1),_0x13f832['classList']['remove'](_0x519bb4(0x1dc)),_0x6acd0e[_0x519bb4(0x285)][_0x519bb4(0x2af)]=_0x519bb4(0x1da);});});let _0x4bd441='',_0x165669;document[_0x41ff55(0x26f)](_0x41ff55(0x26c),function(_0x197e12){var _0x41261f=_0x41ff55;if(!_0x13f832[_0x41261f(0x2b1)][_0x41261f(0x289)](_0x41261f(0x1dc)))return;if(_0x197e12[_0x41261f(0x29f)]===_0x41261f(0x293)||_0x197e12[_0x41261f(0x29f)]==='ArrowUp'){_0x197e12[_0x41261f(0x27c)]();const _0x308eb3=Array[_0x41261f(0x235)](_0x7e2776),_0xc58898=_0x308eb3['findIndex'](_0x37187=>_0x37187[_0x41261f(0x2b1)][_0x41261f(0x289)](_0x41261f(0x22b)));let _0x4530b2;_0x197e12['key']==='ArrowDown'?_0x4530b2=_0xc58898<_0x308eb3[_0x41261f(0x25b)]-0x1?_0xc58898+0x1:0x0:_0x4530b2=_0xc58898>0x0?_0xc58898-0x1:_0x308eb3[_0x41261f(0x25b)]-0x1;_0x7e2776[_0x41261f(0x27a)](_0xf5d27=>_0xf5d27['classList'][_0x41261f(0x27e)](_0x41261f(0x22b))),_0x308eb3[_0x4530b2]['classList'][_0x41261f(0x223)]('selected'),_0x308eb3[_0x4530b2][_0x41261f(0x234)]({'block':_0x41261f(0x2b7)});return;}if(_0x197e12[_0x41261f(0x29f)]===_0x41261f(0x288)){_0x197e12[_0x41261f(0x27c)]();const _0x8376b9=_0x6acd0e['querySelector'](_0x41261f(0x202));_0x8376b9&&_0x8376b9[_0x41261f(0x237)]();return;}if(_0x197e12['key']===_0x41261f(0x1db)){_0x197e12[_0x41261f(0x27c)](),_0x13f832[_0x41261f(0x2b1)][_0x41261f(0x27e)](_0x41261f(0x1dc)),_0x6acd0e['style'][_0x41261f(0x2af)]=_0x41261f(0x1da);return;}if(_0x197e12[_0x41261f(0x29f)][_0x41261f(0x25b)]===0x1&&_0x197e12['key'][_0x41261f(0x26b)](/[a-zA-Z0-9%]/)){clearTimeout(_0x165669),_0x4bd441+=_0x197e12[_0x41261f(0x29f)][_0x41261f(0x1f1)]();const _0x36b003=Array[_0x41261f(0x235)](_0x7e2776)[_0x41261f(0x2be)](_0x46e1b4=>{var _0x439b2f=_0x41261f;const _0x227045=_0x46e1b4['querySelector'](_0x439b2f(0x28c))[_0x439b2f(0x1d8)][_0x439b2f(0x1f1)]();return _0x227045['startsWith'](_0x4bd441);});_0x36b003&&(_0x7e2776['forEach'](_0x2ea177=>_0x2ea177['classList'][_0x41261f(0x27e)](_0x41261f(0x22b))),_0x36b003[_0x41261f(0x2b1)]['add']('selected'),_0x36b003[_0x41261f(0x234)]({'block':'nearest'})),_0x165669=setTimeout(()=>{_0x4bd441='';},0x3e8);}});}document[_0xbcd8be(0x26f)](_0xbcd8be(0x237),function(_0x363403){var _0xee4676=_0xbcd8be;const _0x363eac=document[_0xee4676(0x2b6)](_0xee4676(0x292)),_0x2b7596=document[_0xee4676(0x2b6)](_0xee4676(0x245));let _0x3df21f=![];_0x363eac[_0xee4676(0x27a)](function(_0x36dfb4,_0x11d592){var _0x4a39fe=_0xee4676;const _0x2ea997=_0x2b7596[_0x11d592];_0x36dfb4&&_0x2ea997&&(_0x36dfb4[_0x4a39fe(0x289)](_0x363403['target'])||_0x2ea997[_0x4a39fe(0x289)](_0x363403[_0x4a39fe(0x1f7)]))&&(_0x3df21f=!![]);}),!_0x3df21f&&_0x363eac[_0xee4676(0x27a)](function(_0x2f6d91,_0x3a435f){var _0x443cfc=_0xee4676;_0x2f6d91&&_0x2b7596[_0x3a435f]&&(_0x2f6d91[_0x443cfc(0x2b1)][_0x443cfc(0x27e)]('open'),_0x2b7596[_0x3a435f][_0x443cfc(0x285)]['display']='none');});});const xhr=new XMLHttpRequest();function _0x3b9a(_0x5da255,_0x4a3875){var _0x207feb=_0x207f();return _0x3b9a=function(_0x3b9a17,_0x29bc5b){_0x3b9a17=_0x3b9a17-0x1d0;var _0x4f9646=_0x207feb[_0x3b9a17];return _0x4f9646;},_0x3b9a(_0x5da255,_0x4a3875);}xhr[_0xbcd8be(0x1dc)](_0xbcd8be(0x211),_0xbcd8be(0x299),![]),xhr[_0xbcd8be(0x231)](null);let csvData=xhr[_0xbcd8be(0x28b)],extraHeaderRow='ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a';csvData=extraHeaderRow+csvData;function _0x207f(){var _0x4e9d59=['circle','appendChild','createElement','pageY','option','.selected','.chart-wrapper','parentNode','translate(0,','#select-x','.chart-container','92076CQXzwT','translate(','change','data-original-x','x-metric-options','#000','backgroundColor','12px','html','GET','duration','hideMedianLines','#select-y','includes','#scatter-plot','mouseout','pct','xy-line-hover','Ligue\x201','unselectAll','class','tooltip.xg-line-above','league-legend','x-axis','rotate(-90)','rgba(255,\x200,\x200,\x200.7)','.xy-line-label','add','replace','marginRight','</strong><br/>','55691688grDGmt','14px','dark-mode','width','selected','.xy-line-bg','xy-line','DOMContentLoaded','NFD','nextElementSibling','send','<span>','Select\x20all\x20teams','scrollIntoView','from','select-icon','click','currentTranslations','500','push','line','league-select-options','font-size','range','y-metric-trigger','end','text','y-axis','.team-label','Hide\x20median\x20lines','.custom-select-options,\x20.metric-select-options','opacity','select','fill','flex','78sLgEtM','indexOf','min','ion-ios-circle-outline','dispatchEvent','innerHeight','left','right','y-metric-options','stroke-width','fontWeight','font-weight','cloneNode','block','search-dimmed','splice','123UNXeJT','length','transform','metric-select-option','toggle','interrupt','true','innerWidth','resize','querySelector','getElementById','<strong>','tooltip.xg-line-title','height','Bundesliga','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','data-original-y','match','keydown','input','520370PTQFQN','addEventListener','2572530Wjjqyb','map','rgba(0,\x200,\x20255,\x200.7)','attr','scaleLinear','false','ion-ios-circle-filled','select-x','La\x20Liga','Top\x205\x20Leagues','forEach','x-label','preventDefault','rgba(75,\x200,\x20130,\x200.7)','remove','.xy-line','enter','.xy-line-hover','pow','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','event','style','className','Serie\x20A','Enter','contains','every','responseText','span','linearGradient#line-gradient','font-family','innerHTML','1vtuFmp','Premier\x20League','.custom-select-trigger,\x20.metric-select-trigger','ArrowDown','split','stroke-dasharray','.custom-select-trigger.open,\x20.metric-select-trigger.open','getAttribute','filter','https://datamb.football/database/TEAM/teamplots.csv','max','8px','body','474185mcfQJE','top','key','name','8153928yOwjZc','y-label','href','call','stroke','median-lines-tooltip','selectAll','rgba(255,\x20165,\x200,\x200.7)','text-anchor','div','Inter,\x20sans-serif','Unselect\x20all\x20teams','median','143Oxfbqv','display','sqrt','classList','axisBottom','getBoundingClientRect','toFixed','data-i18n','querySelectorAll','nearest','data-stable-position','iconify-icon','median-line','tooltip.xg-line-right','#2ecc71','data','find','xG\x20per\x2090','rgba(0,\x200,\x200,\x200.3)','legend-color','all','8qwGyHD','append','rgba(0,\x20128,\x200,\x200.7)','trim','classed','search-match','toggle-median-lines','apply','metrics.','each','Show\x20median\x20lines','5,3','.team-label-','</span>','textContent','select-y','none','Escape','open','</span><br/>','select-league','value','tooltip','clientWidth','3933034oKXKwp','link','node','data-value','setAttribute','transition','x-metric-trigger','axisLeft','bottom','legend-item','team-label-','tickSize','slice','metrics','mouseover','toLowerCase','.performance-label','Goals\x20per\x2090','showMedianLines','team-label\x20','rgba(70,\x20130,\x20180,\x200.7)','target','pageX','transparent','normalize','getBBox','property'];_0x207f=function(){return _0x4e9d59;};return _0x207f();}var rows=csvData[_0xbcd8be(0x2c6)]()[_0xbcd8be(0x294)]('\x0a'),header=rows[0x0][_0xbcd8be(0x294)](','),data=rows[_0xbcd8be(0x1ee)](0x1)[_0xbcd8be(0x271)](function(_0x1758d9){var _0x37d85a=_0xbcd8be;return _0x1758d9['split'](',')[_0x37d85a(0x271)](function(_0x906e43,_0x583a90){return _0x583a90>=0x3?parseFloat(_0x906e43):_0x906e43;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin['left']-margin[_0xbcd8be(0x251)],height=0x302-margin[_0xbcd8be(0x29e)]-margin['bottom'],leagueColors={'Premier\x20League':_0xbcd8be(0x221),'La\x20Liga':_0xbcd8be(0x2a8),'Bundesliga':'rgba(255,\x20255,\x200,\x200.7)','Serie\x20A':_0xbcd8be(0x2c5),'Ligue\x201':_0xbcd8be(0x272),'Eredivisie':_0xbcd8be(0x27d),'Primeira\x20Liga':'rgba(238,\x20130,\x20238,\x200.7)'};function getLeagueColor(_0x520aae){var _0x4acb97=_0xbcd8be;return leagueColors[_0x520aae]||_0x4acb97(0x221);}function updateChartDimensions(){var _0x3d8a4d=_0xbcd8be,_0x36aacc=document[_0x3d8a4d(0x263)](_0x3d8a4d(0x203))[_0x3d8a4d(0x1e1)],_0x3337b2=window[_0x3d8a4d(0x24f)]*0.7,_0x22280b=0x1e,_0x80a86b=Math[_0x3d8a4d(0x24c)](0x43a,_0x36aacc-_0x22280b*0x2),_0x103a17=window[_0x3d8a4d(0x261)]/window['innerHeight']<0x1;if(_0x103a17){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x128bda=1.4,_0x6da713=Math[_0x3d8a4d(0x24c)](_0x3337b2,_0x80a86b*_0x128bda);_0x6da713=Math['max'](_0x6da713,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x5c8e74=0.7,_0x6da713=_0x80a86b*_0x5c8e74;}width=_0x80a86b-margin[_0x3d8a4d(0x250)]-margin[_0x3d8a4d(0x251)],height=_0x6da713-margin['top']-margin[_0x3d8a4d(0x1ea)],d3[_0x3d8a4d(0x247)](_0x3d8a4d(0x216))[_0x3d8a4d(0x273)]('width',_0x80a86b)[_0x3d8a4d(0x273)](_0x3d8a4d(0x267),_0x6da713),document[_0x3d8a4d(0x263)](_0x3d8a4d(0x207))['style'][_0x3d8a4d(0x267)]=_0x6da713+'px';}window[_0xbcd8be(0x26f)](_0xbcd8be(0x262),function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0x570f10,_0x2cb4ea){let _0x3eb162;return function(){const _0x4e379b=this,_0x40db17=arguments;clearTimeout(_0x3eb162),_0x3eb162=setTimeout(function(){var _0x5bf4cb=_0x3b9a;_0x570f10[_0x5bf4cb(0x1d1)](_0x4e379b,_0x40db17);},_0x2cb4ea);};}var prevWindowWidth=window[_0xbcd8be(0x261)],prevWindowHeight=window[_0xbcd8be(0x24f)];window[_0xbcd8be(0x26f)]('resize',debounce(function(){var _0x34eb1e=_0xbcd8be,_0x26f943=prevWindowWidth/prevWindowHeight<0x1,_0x486e63=window[_0x34eb1e(0x261)]/window[_0x34eb1e(0x24f)]<0x1;prevWindowWidth=window[_0x34eb1e(0x261)],prevWindowHeight=window['innerHeight'],requestAnimationFrame(function(){updateChart();});},0x32));var medianLinesVisible=![],selectX=d3[_0xbcd8be(0x247)](_0xbcd8be(0x206)),selectY=d3[_0xbcd8be(0x247)](_0xbcd8be(0x214)),names=data[_0xbcd8be(0x271)](function(_0x5036c6){return _0x5036c6[0x1];});header['slice'](0x3)[_0xbcd8be(0x27a)](function(_0x2ac489){var _0x54e233=_0xbcd8be;selectX[_0x54e233(0x2c4)](_0x54e233(0x201))[_0x54e233(0x241)](_0x2ac489)[_0x54e233(0x273)](_0x54e233(0x1df),_0x2ac489),selectY[_0x54e233(0x2c4)](_0x54e233(0x201))['text'](_0x2ac489)[_0x54e233(0x273)](_0x54e233(0x1df),_0x2ac489);}),selectX[_0xbcd8be(0x1fc)]('value',header[0x3]),selectY[_0xbcd8be(0x1fc)](_0xbcd8be(0x1df),header[0x4]);var svg=d3[_0xbcd8be(0x247)]('#scatter-plot')[_0xbcd8be(0x273)](_0xbcd8be(0x22a),width+margin[_0xbcd8be(0x250)]+margin['right'])[_0xbcd8be(0x273)](_0xbcd8be(0x267),height+margin[_0xbcd8be(0x29e)]+margin[_0xbcd8be(0x1ea)])[_0xbcd8be(0x2c4)]('g')[_0xbcd8be(0x273)](_0xbcd8be(0x25c),_0xbcd8be(0x209)+margin[_0xbcd8be(0x250)]+','+margin['top']+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3['scaleLinear']()[_0xbcd8be(0x23e)]([0x0,width]),yScale=d3[_0xbcd8be(0x274)]()[_0xbcd8be(0x23e)]([height,0x0]),xAxis=d3[_0xbcd8be(0x2b2)](xScale)[_0xbcd8be(0x1ed)](0x0),yAxis=d3[_0xbcd8be(0x1e9)](yScale)['tickSize'](0x0),gXAxis=svg[_0xbcd8be(0x2c4)]('g')[_0xbcd8be(0x273)](_0xbcd8be(0x21c),_0xbcd8be(0x21f))['attr']('transform','translate(0,'+height+')'),gYAxis=svg['append']('g')['attr'](_0xbcd8be(0x21c),_0xbcd8be(0x242)),xLabel=svg[_0xbcd8be(0x2c4)](_0xbcd8be(0x241))[_0xbcd8be(0x273)]('class',_0xbcd8be(0x27b))['attr'](_0xbcd8be(0x2a9),_0xbcd8be(0x240))[_0xbcd8be(0x273)]('x',width)[_0xbcd8be(0x273)]('y',height+0x23)[_0xbcd8be(0x285)](_0xbcd8be(0x28e),_0xbcd8be(0x2ab))[_0xbcd8be(0x285)](_0xbcd8be(0x23d),_0xbcd8be(0x228)),yLabel=svg['append']('text')[_0xbcd8be(0x273)](_0xbcd8be(0x21c),_0xbcd8be(0x2a2))['attr'](_0xbcd8be(0x2a9),_0xbcd8be(0x240))['attr'](_0xbcd8be(0x25c),_0xbcd8be(0x220))['attr']('y',-0x35)[_0xbcd8be(0x273)]('x',0x0)['style'](_0xbcd8be(0x28e),_0xbcd8be(0x2ab))[_0xbcd8be(0x285)]('font-size',_0xbcd8be(0x228)),tooltip=d3[_0xbcd8be(0x247)]('body')['append'](_0xbcd8be(0x2aa))[_0xbcd8be(0x273)]('class',_0xbcd8be(0x1e0));function isMobileDevice(){var _0x15378c=_0xbcd8be;return window[_0x15378c(0x261)]<=0x300;}function positionTooltip(_0xd188cc,_0x2ef97b){var _0x226bc3=_0xbcd8be;const _0x5d6c04=_0x2ef97b[_0x226bc3(0x1e4)]();if(!_0x5d6c04)return{'left':0x0,'top':0x0};const _0x4c4260=_0x5d6c04[_0x226bc3(0x2b3)](),_0x241c39=window[_0x226bc3(0x261)],_0x302d68=window[_0x226bc3(0x24f)];let _0x9108fe=_0xd188cc['pageX']+0xa,_0x9b6bca=_0xd188cc[_0x226bc3(0x200)]-0x1c;return _0x9108fe+_0x4c4260[_0x226bc3(0x22a)]>_0x241c39-0xa&&(_0x9108fe=_0xd188cc[_0x226bc3(0x1f8)]-_0x4c4260[_0x226bc3(0x22a)]-0xa),_0x9b6bca+_0x4c4260[_0x226bc3(0x267)]>_0x302d68-0xa&&(_0x9b6bca=_0xd188cc[_0x226bc3(0x200)]-_0x4c4260['height']-0xa),_0x9108fe=Math['max'](0xa,_0x9108fe),_0x9b6bca=Math[_0x226bc3(0x29a)](0xa,_0x9b6bca),{'left':_0x9108fe,'top':_0x9b6bca};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x2f5fca=_0xbcd8be;updateChartDimensions(),d3[_0x2f5fca(0x247)](_0x2f5fca(0x216))['attr'](_0x2f5fca(0x22a),width+margin[_0x2f5fca(0x250)]+margin[_0x2f5fca(0x251)])[_0x2f5fca(0x273)]('height',height+margin[_0x2f5fca(0x29e)]+margin['bottom']),gXAxis[_0x2f5fca(0x273)](_0x2f5fca(0x25c),_0x2f5fca(0x205)+height+')'),xLabel['attr']('x',width)[_0x2f5fca(0x273)]('y',height+0x23),yLabel[_0x2f5fca(0x273)]('x',0x0);const _0x1b4810=document[_0x2f5fca(0x29c)][_0x2f5fca(0x2b1)][_0x2f5fca(0x289)](_0x2f5fca(0x229));var _0x8bb56e=document[_0x2f5fca(0x264)](_0x2f5fca(0x1de))['value'];if(_0x8bb56e==='all')filteredData=data;else _0x8bb56e===_0x2f5fca(0x279)?filteredData=data[_0x2f5fca(0x298)](function(_0x1c7d9b){var _0xfa697=_0x2f5fca;return _0x1c7d9b[0x2]===_0xfa697(0x291)||_0x1c7d9b[0x2]===_0xfa697(0x278)||_0x1c7d9b[0x2]==='Bundesliga'||_0x1c7d9b[0x2]===_0xfa697(0x287)||_0x1c7d9b[0x2]===_0xfa697(0x21a);}):filteredData=data['filter'](function(_0x3ba6f5){return _0x3ba6f5[0x2]===_0x8bb56e;});filteredNames=filteredData[_0x2f5fca(0x271)](function(_0x5022a4){return _0x5022a4[0x1];}),xMetric=selectX[_0x2f5fca(0x1fc)](_0x2f5fca(0x1df)),yMetric=selectY['property'](_0x2f5fca(0x1df)),xScale[_0x2f5fca(0x23e)]([0x0,width])['domain']((function(){var _0x527894=_0x2f5fca;const _0x372955=d3[_0x527894(0x24c)](filteredData,_0x443feb=>_0x443feb[header[_0x527894(0x24b)](xMetric)]),_0x2c8ec8=d3[_0x527894(0x29a)](filteredData,_0x4c6b2d=>_0x4c6b2d[header[_0x527894(0x24b)](xMetric)]),_0x4b88a2=_0x2c8ec8-_0x372955,_0x4648e6=_0x4b88a2*0.1;return[_0x372955-_0x4648e6,_0x2c8ec8+_0x4648e6];}())),yScale['range']([height,0x0])['domain']((function(){var _0x3b8bf2=_0x2f5fca;const _0x27dad9=d3[_0x3b8bf2(0x24c)](filteredData,_0x1c4cce=>_0x1c4cce[header[_0x3b8bf2(0x24b)](yMetric)]),_0x15a730=d3['max'](filteredData,_0x540136=>_0x540136[header[_0x3b8bf2(0x24b)](yMetric)]),_0x64dd6a=_0x15a730-_0x27dad9,_0x28b904=_0x64dd6a*0.1;return[_0x27dad9-_0x28b904,_0x15a730+_0x28b904];}())),gXAxis[_0x2f5fca(0x2a4)](d3['axisBottom'](xScale)[_0x2f5fca(0x1ed)](0x0)),gYAxis[_0x2f5fca(0x2a4)](d3['axisLeft'](yScale)[_0x2f5fca(0x1ed)](0x0));const _0x18c888='metrics.'+xMetric[_0x2f5fca(0x1f1)]()[_0x2f5fca(0x224)](/ /g,'-')[_0x2f5fca(0x224)](/%/g,_0x2f5fca(0x218)),_0xb184e8=_0x2f5fca(0x1d2)+yMetric[_0x2f5fca(0x1f1)]()['replace'](/ /g,'-')[_0x2f5fca(0x224)](/%/g,'pct');xLabel['attr'](_0x2f5fca(0x2b5),_0x18c888),yLabel['attr'](_0x2f5fca(0x2b5),_0xb184e8);if(window[_0x2f5fca(0x238)]&&window[_0x2f5fca(0x238)][_0x2f5fca(0x1ef)]){const _0x509240=xMetric['toLowerCase']()[_0x2f5fca(0x224)](/ /g,'-')['replace'](/%/g,'pct'),_0x38ca68=yMetric[_0x2f5fca(0x1f1)]()[_0x2f5fca(0x224)](/ /g,'-')[_0x2f5fca(0x224)](/%/g,_0x2f5fca(0x218)),_0x3b5317=window[_0x2f5fca(0x238)][_0x2f5fca(0x1ef)][_0x509240],_0x4c7a44=window[_0x2f5fca(0x238)]['metrics'][_0x38ca68];xLabel['text'](_0x3b5317||xMetric),yLabel[_0x2f5fca(0x241)](_0x4c7a44||yMetric);}else xLabel[_0x2f5fca(0x241)](xMetric),yLabel[_0x2f5fca(0x241)](yMetric);svg['selectAll'](_0x2f5fca(0x1fd))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x243))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x27f))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x22c))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x222))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)]('.xy-line-label-bg')[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x1f2))[_0x2f5fca(0x27e)](),svg['selectAll'](_0x2f5fca(0x28d))[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)]('marker#arrow-over,\x20marker#arrow-under')[_0x2f5fca(0x27e)](),svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x281))['remove'](),svg[_0x2f5fca(0x2a7)]('.median-line')[_0x2f5fca(0x27e)]();if(xMetric===_0x2f5fca(0x2bf)&&yMetric===_0x2f5fca(0x1f3)||xMetric===_0x2f5fca(0x1f3)&&yMetric==='xG\x20per\x2090'){var _0x4121cd=null,_0x25e521=d3[_0x2f5fca(0x24c)](filteredData,function(_0x542f23){var _0xe9379c=_0x2f5fca;return _0x542f23[header[_0xe9379c(0x24b)](xMetric)];}),_0xeb5e57=d3[_0x2f5fca(0x29a)](filteredData,function(_0x5a14f9){var _0x466de7=_0x2f5fca;return _0x5a14f9[header[_0x466de7(0x24b)](xMetric)];}),_0x275250=d3[_0x2f5fca(0x24c)](filteredData,function(_0xc8237b){var _0x279128=_0x2f5fca;return _0xc8237b[header[_0x279128(0x24b)](yMetric)];}),_0x46fe97=d3[_0x2f5fca(0x29a)](filteredData,function(_0x4921b9){var _0x3140ff=_0x2f5fca;return _0x4921b9[header[_0x3140ff(0x24b)](yMetric)];}),_0x36a7d5=Math[_0x2f5fca(0x24c)](_0xeb5e57,_0x46fe97),_0x5f0563=Math[_0x2f5fca(0x29a)](_0x25e521,_0x275250);svg['append']('line')[_0x2f5fca(0x273)](_0x2f5fca(0x21c),_0x2f5fca(0x22d))[_0x2f5fca(0x273)]('x1',xScale(_0x5f0563))[_0x2f5fca(0x273)]('y1',yScale(_0x5f0563))[_0x2f5fca(0x273)]('x2',xScale(_0x36a7d5))[_0x2f5fca(0x273)]('y2',yScale(_0x36a7d5))[_0x2f5fca(0x285)](_0x2f5fca(0x2a5),_0x2f5fca(0x2bc))[_0x2f5fca(0x285)]('stroke-width','2')[_0x2f5fca(0x285)](_0x2f5fca(0x295),_0x2f5fca(0x1d5)),svg[_0x2f5fca(0x2c4)](_0x2f5fca(0x23b))[_0x2f5fca(0x273)]('class',_0x2f5fca(0x219))['attr']('x1',xScale(_0x5f0563))['attr']('y1',yScale(_0x5f0563))[_0x2f5fca(0x273)]('x2',xScale(_0x36a7d5))[_0x2f5fca(0x273)]('y2',yScale(_0x36a7d5))['style']('stroke',_0x2f5fca(0x1f9))[_0x2f5fca(0x285)](_0x2f5fca(0x253),'15')[_0x2f5fca(0x285)]('cursor','help')['on'](_0x2f5fca(0x1f0),function(){var _0x53d225=_0x2f5fca;_0x4121cd&&clearTimeout(_0x4121cd);var _0x4643e4=d3['event'][_0x53d225(0x1f8)],_0x62714c=d3[_0x53d225(0x284)]['pageY'];_0x4121cd=setTimeout(function(){var _0x5f2e2d=_0x53d225;tooltip[_0x5f2e2d(0x1e7)]()[_0x5f2e2d(0x212)](0xc8)[_0x5f2e2d(0x285)]('opacity',0.9);var _0x41aad7=_0x5f2e2d(0x265)+getTranslation(_0x5f2e2d(0x266),'G\x20=\x20xG\x20Line')+_0x5f2e2d(0x226);xMetric===_0x5f2e2d(0x2bf)&&yMetric===_0x5f2e2d(0x1f3)?_0x41aad7+=_0x5f2e2d(0x232)+getTranslation(_0x5f2e2d(0x21d),_0x5f2e2d(0x283))+_0x5f2e2d(0x1dd)+_0x5f2e2d(0x232)+getTranslation('tooltip.xg-line-below','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.')+_0x5f2e2d(0x1d7):_0x41aad7+='<span>'+getTranslation(_0x5f2e2d(0x2bb),_0x5f2e2d(0x269))+_0x5f2e2d(0x1dd)+'<span>'+getTranslation('tooltip.xg-line-left','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.')+'</span>',tooltip['html'](_0x41aad7)[_0x5f2e2d(0x285)]('left',_0x4643e4+0xa+'px')[_0x5f2e2d(0x285)](_0x5f2e2d(0x29e),_0x62714c-0x1c+'px');},0x258);})['on']('mouseout',function(){var _0x2df175=_0x2f5fca;_0x4121cd&&(clearTimeout(_0x4121cd),_0x4121cd=null),tooltip[_0x2df175(0x1e7)]()['duration'](0x1f4)[_0x2df175(0x285)](_0x2df175(0x246),0x0);});}if(medianLinesVisible){var _0x542eda=d3['median'](filteredData,function(_0x62ea9d){var _0x3a0b57=_0x2f5fca;return _0x62ea9d[header[_0x3a0b57(0x24b)](xMetric)];}),_0x1868da=d3[_0x2f5fca(0x2ad)](filteredData,function(_0x1534a5){var _0x2a80eb=_0x2f5fca;return _0x1534a5[header[_0x2a80eb(0x24b)](yMetric)];});svg[_0x2f5fca(0x2c4)](_0x2f5fca(0x23b))[_0x2f5fca(0x273)]('class',_0x2f5fca(0x2ba))['attr']('x1',xScale(_0x542eda))[_0x2f5fca(0x273)]('y1',0x0)[_0x2f5fca(0x273)]('x2',xScale(_0x542eda))['attr']('y2',height)[_0x2f5fca(0x285)]('stroke','rgba(0,\x200,\x200,\x200.3)')['style'](_0x2f5fca(0x295),'4'),svg[_0x2f5fca(0x2c4)]('line')[_0x2f5fca(0x273)]('class',_0x2f5fca(0x2ba))[_0x2f5fca(0x273)]('x1',0x0)[_0x2f5fca(0x273)]('y1',yScale(_0x1868da))['attr']('x2',width)[_0x2f5fca(0x273)]('y2',yScale(_0x1868da))[_0x2f5fca(0x285)](_0x2f5fca(0x2a5),_0x2f5fca(0x2c0))[_0x2f5fca(0x285)]('stroke-dasharray','4');}circles=svg[_0x2f5fca(0x2a7)](_0x2f5fca(0x1fd))[_0x2f5fca(0x2bd)](filteredData)[_0x2f5fca(0x280)]()['append'](_0x2f5fca(0x1fd))['attr']('cx',function(_0x4637c5){var _0x1f837c=_0x2f5fca;return xScale(_0x4637c5[header[_0x1f837c(0x24b)](xMetric)]);})[_0x2f5fca(0x273)]('cy',function(_0x457396){var _0x1216dc=_0x2f5fca;return yScale(_0x457396[header[_0x1216dc(0x24b)](yMetric)]);})['attr']('r',0x8)[_0x2f5fca(0x285)]('fill',function(_0x484239){var _0x40ea12=_0x2f5fca;if(clickedCircles[_0x40ea12(0x215)](_0x484239[0x1]))return getLeagueColor(_0x484239[0x2]);return _0x40ea12(0x1f6);})[_0x2f5fca(0x285)](_0x2f5fca(0x2a5),function(_0x4f5bc5){var _0x4fb013=_0x2f5fca;return clickedCircles[_0x4fb013(0x215)](_0x4f5bc5[0x1])?_0x4fb013(0x20d):_0x4fb013(0x1da);})['style'](_0x2f5fca(0x253),function(_0xe56136){var _0x148eae=_0x2f5fca;return clickedCircles[_0x148eae(0x215)](_0xe56136[0x1])?0x2:0x0;})[_0x2f5fca(0x285)]('cursor','pointer')['on'](_0x2f5fca(0x1f0),function(_0xa9c594){var _0x1cd160=_0x2f5fca;d3[_0x1cd160(0x247)](this)[_0x1cd160(0x1e7)]()[_0x1cd160(0x212)](0xc8)[_0x1cd160(0x273)]('r',0xa)['style'](_0x1cd160(0x248),getLeagueColor(_0xa9c594[0x2])),tooltip[_0x1cd160(0x1e7)]()[_0x1cd160(0x212)](0xc8)['style']('opacity',0.9);const _0xbb23ad=_0x1cd160(0x1d2)+xMetric[_0x1cd160(0x1f1)]()['replace'](/ /g,'-')[_0x1cd160(0x224)](/%/g,'pct'),_0x4aaf61=_0x1cd160(0x1d2)+yMetric['toLowerCase']()[_0x1cd160(0x224)](/ /g,'-')[_0x1cd160(0x224)](/%/g,_0x1cd160(0x218)),_0x4e09ec=getTranslation(_0xbb23ad,xMetric),_0x408667=getTranslation(_0x4aaf61,yMetric);tooltip[_0x1cd160(0x210)](_0x1cd160(0x265)+_0xa9c594[0x1]+_0x1cd160(0x226)+_0x4e09ec+':\x20'+_0xa9c594[header[_0x1cd160(0x24b)](xMetric)]['toFixed'](0x2)+'<br/>'+_0x408667+':\x20'+_0xa9c594[header[_0x1cd160(0x24b)](yMetric)][_0x1cd160(0x2b4)](0x2));const _0x2c5e1b=tooltip[_0x1cd160(0x1e4)]();if(_0x2c5e1b){const _0x4c40bd=_0x2c5e1b['getBoundingClientRect'](),_0x2d0dda=window[_0x1cd160(0x261)],_0x1a82c0=window[_0x1cd160(0x24f)];let _0x5ea5aa=d3[_0x1cd160(0x284)][_0x1cd160(0x1f8)]+0xa,_0x5b4ba2=d3[_0x1cd160(0x284)][_0x1cd160(0x200)]-0x1c;_0x5ea5aa+_0x4c40bd[_0x1cd160(0x22a)]>_0x2d0dda-0xa&&(_0x5ea5aa=d3[_0x1cd160(0x284)][_0x1cd160(0x1f8)]-_0x4c40bd[_0x1cd160(0x22a)]-0xa),_0x5b4ba2+_0x4c40bd[_0x1cd160(0x267)]>_0x1a82c0-0xa&&(_0x5b4ba2=d3[_0x1cd160(0x284)][_0x1cd160(0x200)]-_0x4c40bd[_0x1cd160(0x267)]-0xa),_0x5ea5aa=Math[_0x1cd160(0x29a)](0xa,_0x5ea5aa),_0x5b4ba2=Math[_0x1cd160(0x29a)](0xa,_0x5b4ba2),tooltip[_0x1cd160(0x285)](_0x1cd160(0x250),_0x5ea5aa+'px')[_0x1cd160(0x285)](_0x1cd160(0x29e),_0x5b4ba2+'px');}else tooltip[_0x1cd160(0x285)]('left',d3[_0x1cd160(0x284)]['pageX']+0xa+'px')[_0x1cd160(0x285)](_0x1cd160(0x29e),d3[_0x1cd160(0x284)][_0x1cd160(0x200)]-0x1c+'px');window[_0x1cd160(0x261)]<=0x300&&setTimeout(function(){var _0x115dce=_0x1cd160;tooltip['transition']()['duration'](0xc8)['style'](_0x115dce(0x246),0x0);},0x3e8);})['on'](_0x2f5fca(0x217),function(_0x49e37e){var _0x56800c=_0x2f5fca;window[_0x56800c(0x261)]>0x300&&tooltip['transition']()[_0x56800c(0x212)](0x1f4)[_0x56800c(0x285)](_0x56800c(0x246),0x0);var _0x1390eb=clickedCircles[_0x56800c(0x215)](_0x49e37e[0x1]);d3[_0x56800c(0x247)](this)[_0x56800c(0x1e7)]()[_0x56800c(0x212)](0xc8)[_0x56800c(0x273)]('r',0x8)[_0x56800c(0x285)](_0x56800c(0x248),function(){var _0x3fb221=_0x56800c;return _0x1390eb?getLeagueColor(_0x49e37e[0x2]):_0x3fb221(0x1f6);});})['on'](_0x2f5fca(0x237),function(_0x2081ad){var _0x325d23=_0x2f5fca,_0x553367=d3[_0x325d23(0x247)](this)['classed'](_0x325d23(0x2c8));_0x553367&&resetSearch();var _0x3b9009=clickedCircles[_0x325d23(0x24b)](_0x2081ad[0x1]);_0x3b9009===-0x1?(clickedCircles[_0x325d23(0x23a)](_0x2081ad[0x1]),d3['select'](this)[_0x325d23(0x285)](_0x325d23(0x248),getLeagueColor(_0x2081ad[0x2]))[_0x325d23(0x285)]('stroke',_0x325d23(0x20d))[_0x325d23(0x285)](_0x325d23(0x253),0x2),addTeamLabel(_0x2081ad)):(clickedCircles[_0x325d23(0x259)](_0x3b9009,0x1),d3[_0x325d23(0x247)](this)[_0x325d23(0x285)](_0x325d23(0x248),'rgba(70,\x20130,\x20180,\x200.7)')[_0x325d23(0x285)](_0x325d23(0x2a5),_0x325d23(0x1da)),svg[_0x325d23(0x2a7)](_0x325d23(0x1d6)+_0x2081ad[0x1][_0x325d23(0x224)](/\s+/g,'-')[_0x325d23(0x1f1)]())[_0x325d23(0x27e)]());updateSelectAllButtonText();var _0x243be0=document[_0x325d23(0x264)](_0x325d23(0x1de))[_0x325d23(0x1df)];updateLeagueLegend(_0x243be0);}),clickedCircles[_0x2f5fca(0x27a)](function(_0x508fd1){var _0x3f1dc7=_0x2f5fca,_0x33735b=filteredData[_0x3f1dc7(0x2be)](function(_0x1cec5c){return _0x1cec5c[0x1]===_0x508fd1;});_0x33735b&&addTeamLabel(_0x33735b);}),updateSelectAllButtonText(),updateLeagueLegend(_0x8bb56e);}function updateSelectAllButtonText(){var _0x3a7d64=_0xbcd8be,_0x1415b3=document[_0x3a7d64(0x264)](_0x3a7d64(0x236)),_0x31723b=document[_0x3a7d64(0x264)]('select-all-tooltip'),_0x5d7a35=filteredData[_0x3a7d64(0x28a)](function(_0x47c2f5){var _0x561b05=_0x3a7d64;return clickedCircles[_0x561b05(0x215)](_0x47c2f5[0x1]);});_0x5d7a35?(_0x1415b3['className']=_0x3a7d64(0x24d),_0x31723b&&(window[_0x3a7d64(0x238)]&&window[_0x3a7d64(0x238)][_0x3a7d64(0x1e0)]?_0x31723b['textContent']=window[_0x3a7d64(0x238)][_0x3a7d64(0x1e0)][_0x3a7d64(0x21b)]||_0x3a7d64(0x2ac):_0x31723b[_0x3a7d64(0x1d8)]=_0x3a7d64(0x2ac))):(_0x1415b3[_0x3a7d64(0x286)]=_0x3a7d64(0x276),_0x31723b&&(window['currentTranslations']&&window['currentTranslations']['tooltip']?_0x31723b['textContent']=window['currentTranslations'][_0x3a7d64(0x1e0)]['selectAll']||_0x3a7d64(0x233):_0x31723b['textContent']=_0x3a7d64(0x233)));}selectX['on'](_0xbcd8be(0x20a),updateChart),selectY['on']('change',updateChart);function removeSpecialCharsAndDiacritics(_0x4a7ca6){var _0x5aeb00=_0xbcd8be;if(!_0x4a7ca6)return'';return _0x4a7ca6[_0x5aeb00(0x1fa)](_0x5aeb00(0x22f))[_0x5aeb00(0x224)](/[\u0300-\u036f]/g,'')['replace'](//g,'O')[_0x5aeb00(0x224)](//g,'o');}var searchBar=document[_0xbcd8be(0x264)]('search-bar');searchBar[_0xbcd8be(0x26f)](_0xbcd8be(0x26d),function(){var _0x52290f=_0xbcd8be,_0x5da2f9=searchBar[_0x52290f(0x1df)][_0x52290f(0x1f1)]();if(_0x5da2f9===''){resetSearch();return;}var _0x4e09d5=removeSpecialCharsAndDiacritics(_0x5da2f9);svg[_0x52290f(0x2a7)]('circle')[_0x52290f(0x2c7)](_0x52290f(0x2c8),![])[_0x52290f(0x285)](_0x52290f(0x248),function(_0x138357){var _0x3e40e9=_0x52290f;return clickedCircles['includes'](_0x138357[0x1])?getLeagueColor(_0x138357[0x2]):_0x3e40e9(0x1f6);})[_0x52290f(0x285)](_0x52290f(0x2a5),function(_0x441e06){var _0x44b4cc=_0x52290f;return clickedCircles[_0x44b4cc(0x215)](_0x441e06[0x1])?_0x44b4cc(0x20d):_0x44b4cc(0x1da);})['style'](_0x52290f(0x253),function(_0x36f8f1){var _0x8e9fc3=_0x52290f;return clickedCircles[_0x8e9fc3(0x215)](_0x36f8f1[0x1])?0x2:0x0;})[_0x52290f(0x285)](_0x52290f(0x298),_0x52290f(0x1da))['each'](function(){var _0x4a1bb3=_0x52290f;d3['select'](this)[_0x4a1bb3(0x285)]('r',null);}),svg['selectAll']('.team-label')[_0x52290f(0x2c7)](_0x52290f(0x2c8),![])[_0x52290f(0x2c7)](_0x52290f(0x258),![]);var _0xf3c35a=[];svg[_0x52290f(0x2a7)](_0x52290f(0x1fd))[_0x52290f(0x298)](function(_0x514dfe){var _0x4c5e8b=_0x52290f,_0x4111a5=_0x514dfe[0x1][_0x4c5e8b(0x1f1)](),_0x1537f1=removeSpecialCharsAndDiacritics(_0x4111a5),_0x21ad4a=_0x4111a5[_0x4c5e8b(0x215)](_0x5da2f9)||_0x1537f1[_0x4c5e8b(0x215)](_0x4e09d5);return _0x21ad4a&&_0xf3c35a[_0x4c5e8b(0x23a)](_0x514dfe[0x1]),_0x21ad4a;})[_0x52290f(0x2c7)](_0x52290f(0x2c8),!![])[_0x52290f(0x1d3)](function(){var _0x228eaa=_0x52290f;this[_0x228eaa(0x204)][_0x228eaa(0x1fe)](this);}),_0xf3c35a[_0x52290f(0x25b)]>0x0?(svg['selectAll']('.team-label')[_0x52290f(0x2c7)](_0x52290f(0x258),!![]),svg[_0x52290f(0x2a7)](_0x52290f(0x243))[_0x52290f(0x298)](function(){var _0x56c946=_0x52290f,_0xc55fd8=d3['select'](this)[_0x56c946(0x241)]();return _0xf3c35a[_0x56c946(0x215)](_0xc55fd8);})['classed'](_0x52290f(0x2c8),!![])[_0x52290f(0x2c7)]('search-dimmed',![])[_0x52290f(0x1d3)](function(){var _0x1cb0e2=_0x52290f;this[_0x1cb0e2(0x204)]['appendChild'](this);}),_0xf3c35a['forEach'](function(_0x5ebc05){var _0x2b1770=_0x52290f,_0x361673='team-label-'+_0x5ebc05[_0x2b1770(0x224)](/\s+/g,'-')[_0x2b1770(0x1f1)]();if(svg[_0x2b1770(0x247)]('.'+_0x361673)['size']()===0x0){var _0x5d6577=filteredData[_0x2b1770(0x2be)](function(_0x4c56cc){return _0x4c56cc[0x1]===_0x5ebc05;});_0x5d6577&&(addTeamLabel(_0x5d6577),svg['select']('.'+_0x361673)[_0x2b1770(0x2c7)](_0x2b1770(0x2c8),!![]));}})):(svg['selectAll'](_0x52290f(0x243))[_0x52290f(0x1d3)](function(){var _0x1915a1=_0x52290f,_0x1aab0=d3['select'](this),_0x235d12=_0x1aab0[_0x1915a1(0x241)]();!clickedCircles['includes'](_0x235d12)&&_0x1aab0[_0x1915a1(0x27e)]();}),svg['selectAll']('circle')[_0x52290f(0x285)](_0x52290f(0x248),function(_0x4b2eb7){var _0x4c9ebf=_0x52290f;return clickedCircles[_0x4c9ebf(0x215)](_0x4b2eb7[0x1])?getLeagueColor(_0x4b2eb7[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})['style'](_0x52290f(0x2a5),function(_0x5bb3e0){var _0x435eb0=_0x52290f;return clickedCircles['includes'](_0x5bb3e0[0x1])?_0x435eb0(0x20d):_0x435eb0(0x1da);})[_0x52290f(0x285)]('stroke-width',function(_0x321209){var _0x3464c5=_0x52290f;return clickedCircles[_0x3464c5(0x215)](_0x321209[0x1])?0x2:0x0;}));});function resetSearch(){var _0xe3de51=_0xbcd8be;searchBar[_0xe3de51(0x1df)]='',svg[_0xe3de51(0x2a7)]('circle')[_0xe3de51(0x2c7)]('search-match',![])['style']('fill',function(_0x24e8a9){var _0x489091=_0xe3de51;return clickedCircles['includes'](_0x24e8a9[0x1])?getLeagueColor(_0x24e8a9[0x2]):_0x489091(0x1f6);})[_0xe3de51(0x285)]('stroke',function(_0x25982d){var _0x48fe8b=_0xe3de51;return clickedCircles['includes'](_0x25982d[0x1])?_0x48fe8b(0x20d):_0x48fe8b(0x1da);})[_0xe3de51(0x285)](_0xe3de51(0x253),function(_0x5e91b5){var _0x2854ca=_0xe3de51;return clickedCircles[_0x2854ca(0x215)](_0x5e91b5[0x1])?0x2:0x0;})['style'](_0xe3de51(0x298),'none')['each'](function(){var _0x5b80ce=_0xe3de51;d3[_0x5b80ce(0x247)](this)[_0x5b80ce(0x285)]('r',null),d3[_0x5b80ce(0x247)](this)['interrupt']();}),svg[_0xe3de51(0x2a7)](_0xe3de51(0x243))[_0xe3de51(0x2c7)](_0xe3de51(0x2c8),![])[_0xe3de51(0x2c7)]('search-dimmed',![])['each'](function(){var _0x2299f2=_0xe3de51;d3[_0x2299f2(0x247)](this)[_0x2299f2(0x25f)]();}),svg['selectAll'](_0xe3de51(0x243))[_0xe3de51(0x1d3)](function(){var _0xef9867=_0xe3de51,_0x40b0e6=d3['select'](this),_0x378a3d=_0x40b0e6['text']();!clickedCircles[_0xef9867(0x215)](_0x378a3d)&&_0x40b0e6[_0xef9867(0x27e)]();});}var toggleButton=document[_0xbcd8be(0x264)](_0xbcd8be(0x1d0));toggleButton[_0xbcd8be(0x26f)](_0xbcd8be(0x237),function(){var _0x3c77bd=_0xbcd8be;medianLinesVisible=!medianLinesVisible,updateChart();const _0x36b7d9=document[_0x3c77bd(0x264)](_0x3c77bd(0x2a6));window[_0x3c77bd(0x238)]&&window[_0x3c77bd(0x238)][_0x3c77bd(0x1e0)]?_0x36b7d9[_0x3c77bd(0x1d8)]=medianLinesVisible?window[_0x3c77bd(0x238)][_0x3c77bd(0x1e0)][_0x3c77bd(0x213)]||_0x3c77bd(0x244):window['currentTranslations'][_0x3c77bd(0x1e0)][_0x3c77bd(0x1f4)]||_0x3c77bd(0x1d4):_0x36b7d9[_0x3c77bd(0x1d8)]=medianLinesVisible?_0x3c77bd(0x244):_0x3c77bd(0x1d4);});function selectAllCircles(){var _0x59aca8=_0xbcd8be,_0x516385=filteredData[_0x59aca8(0x28a)](function(_0x84dca3){var _0x2c47c8=_0x59aca8;return clickedCircles[_0x2c47c8(0x215)](_0x84dca3[0x1]);});_0x516385?(clickedCircles=[],svg[_0x59aca8(0x2a7)](_0x59aca8(0x1fd))[_0x59aca8(0x285)](_0x59aca8(0x248),_0x59aca8(0x1f6))[_0x59aca8(0x285)](_0x59aca8(0x2a5),_0x59aca8(0x1da)),svg[_0x59aca8(0x2a7)]('.team-label')[_0x59aca8(0x27e)]()):(svg['selectAll'](_0x59aca8(0x1fd))['each'](function(_0xbf587d){var _0x4d3125=_0x59aca8;!clickedCircles[_0x4d3125(0x215)](_0xbf587d[0x1])&&(clickedCircles[_0x4d3125(0x23a)](_0xbf587d[0x1]),d3[_0x4d3125(0x247)](this)['style'](_0x4d3125(0x248),getLeagueColor(_0xbf587d[0x2]))[_0x4d3125(0x285)](_0x4d3125(0x2a5),'#000')[_0x4d3125(0x285)](_0x4d3125(0x253),0x2));}),filteredData[_0x59aca8(0x27a)](function(_0x13a35a){addTeamLabel(_0x13a35a);}));updateSelectAllButtonText();var _0x3fd6c3=document[_0x59aca8(0x264)](_0x59aca8(0x1de))['value'];updateLeagueLegend(_0x3fd6c3);}updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x2117bf){var _0x250b0f=_0xbcd8be,_0x4f9f06=document['getElementById'](_0x250b0f(0x21e));if(_0x2117bf!==_0x250b0f(0x2c2)&&_0x2117bf!==_0x250b0f(0x279)){_0x4f9f06[_0x250b0f(0x285)][_0x250b0f(0x2af)]='none';return;}if(clickedCircles['length']===0x0){_0x4f9f06['style']['display']=_0x250b0f(0x1da);return;}_0x4f9f06[_0x250b0f(0x285)]['display']=_0x250b0f(0x249),_0x4f9f06[_0x250b0f(0x28f)]='';var _0x2ca29d=document[_0x250b0f(0x1ff)](_0x250b0f(0x2aa));_0x2ca29d[_0x250b0f(0x285)][_0x250b0f(0x254)]='bold',_0x2ca29d[_0x250b0f(0x285)][_0x250b0f(0x225)]='15px',_0x4f9f06[_0x250b0f(0x1fe)](_0x2ca29d);var _0x5173df=[];if(_0x2117bf===_0x250b0f(0x2c2))_0x5173df=Object['keys'](leagueColors);else _0x2117bf==='Top\x205\x20Leagues'&&(_0x5173df=['Premier\x20League','La\x20Liga',_0x250b0f(0x268),_0x250b0f(0x287),_0x250b0f(0x21a)]);_0x5173df[_0x250b0f(0x27a)](function(_0x4b0963){var _0x5946df=_0x250b0f,_0x37e62=document[_0x5946df(0x1ff)](_0x5946df(0x2aa));_0x37e62['className']=_0x5946df(0x1eb);var _0x2a11dd=document[_0x5946df(0x1ff)](_0x5946df(0x2aa));_0x2a11dd[_0x5946df(0x286)]=_0x5946df(0x2c1),_0x2a11dd[_0x5946df(0x285)][_0x5946df(0x20e)]=leagueColors[_0x4b0963];var _0x2696b1=document[_0x5946df(0x1ff)]('span');_0x2696b1[_0x5946df(0x1d8)]=_0x4b0963,_0x37e62[_0x5946df(0x1fe)](_0x2a11dd),_0x37e62[_0x5946df(0x1fe)](_0x2696b1),_0x4f9f06[_0x5946df(0x1fe)](_0x37e62);});}const data1=dataLines[_0xbcd8be(0x271)](_0x26d225=>{const [_0x68925d,_0x3eaec0]=_0x26d225['split'](',');return{'name':_0x68925d,'link':_0x3eaec0};});function search2(_0x4d035d){var _0x3d7e58=_0xbcd8be;autocompleteBox[_0x3d7e58(0x28f)]='';const _0x1bc208=_0x4d035d[_0x3d7e58(0x1f1)](),_0x154722=data1['filter'](_0xf69188=>{var _0x32f0b8=_0x3d7e58;const _0x44dfa1=_0xf69188[_0x32f0b8(0x2a0)]?_0xf69188[_0x32f0b8(0x2a0)][_0x32f0b8(0x1f1)]():'';return _0x44dfa1[_0x32f0b8(0x215)](_0x1bc208);});if(_0x154722[_0x3d7e58(0x25b)]===0x0){autocompleteBox[_0x3d7e58(0x285)][_0x3d7e58(0x2af)]=_0x3d7e58(0x1da);return;}_0x154722[_0x3d7e58(0x27a)](_0x30d0cf=>{var _0x107861=_0x3d7e58;if(_0x30d0cf['name']&&_0x30d0cf[_0x107861(0x1e3)]){const _0x54178c=document[_0x107861(0x1ff)](_0x107861(0x2aa)),_0x1a3b58=document[_0x107861(0x1ff)]('a');_0x1a3b58[_0x107861(0x2a3)]=_0x30d0cf['link'],_0x1a3b58['textContent']=_0x30d0cf[_0x107861(0x2a0)],_0x54178c[_0x107861(0x1fe)](_0x1a3b58),autocompleteBox['appendChild'](_0x54178c);}}),autocompleteBox[_0x3d7e58(0x285)][_0x3d7e58(0x2af)]=_0x3d7e58(0x257);}searchInput[_0xbcd8be(0x26f)](_0xbcd8be(0x26d),()=>{var _0x35eb88=_0xbcd8be;const _0x3c6b96=searchInput[_0x35eb88(0x1df)];_0x3c6b96['trim']()===''?autocompleteBox['style'][_0x35eb88(0x2af)]=_0x35eb88(0x1da):search2(_0x3c6b96);});function addTeamLabel(_0x1a60c0){var _0x5729a3=_0xbcd8be,_0x39747b=xScale(_0x1a60c0[header[_0x5729a3(0x24b)](xMetric)]),_0x338c8a=yScale(_0x1a60c0[header['indexOf'](yMetric)]),_0x1f4168=_0x5729a3(0x1ec)+_0x1a60c0[0x1]['replace'](/\s+/g,'-')['toLowerCase']();if(svg[_0x5729a3(0x247)]('.'+_0x1f4168)['size']()>0x0)return;var _0x1d5527=svg[_0x5729a3(0x2c4)](_0x5729a3(0x241))['attr'](_0x5729a3(0x21c),_0x5729a3(0x1f5)+_0x1f4168)['attr']('x',_0x39747b+0xc)['attr']('y',_0x338c8a+0x4)[_0x5729a3(0x241)](_0x1a60c0[0x1])[_0x5729a3(0x285)]('font-family',_0x5729a3(0x2ab))[_0x5729a3(0x285)](_0x5729a3(0x23d),_0x5729a3(0x20f))[_0x5729a3(0x285)](_0x5729a3(0x255),_0x5729a3(0x239))[_0x5729a3(0x285)]('fill','#333')[_0x5729a3(0x273)](_0x5729a3(0x20b),_0x39747b)['attr'](_0x5729a3(0x26a),_0x338c8a)[_0x5729a3(0x273)](_0x5729a3(0x2b8),_0x5729a3(0x275));positionLabelToAvoidOverlap(_0x1d5527,_0x39747b,_0x338c8a);}function positionLabelToAvoidOverlap(_0x26ed29,_0x4ce416,_0x9e2be2){var _0x3a2929=_0xbcd8be;if(_0x26ed29[_0x3a2929(0x273)](_0x3a2929(0x2b8))===_0x3a2929(0x260)){var _0x178e3a=parseFloat(_0x26ed29['attr'](_0x3a2929(0x20b))),_0x4e90fa=parseFloat(_0x26ed29[_0x3a2929(0x273)](_0x3a2929(0x26a))),_0x278ac7=parseFloat(_0x26ed29[_0x3a2929(0x273)]('x')),_0x545e0e=parseFloat(_0x26ed29[_0x3a2929(0x273)]('y')),_0x2b5bb6=Math[_0x3a2929(0x2b0)](Math[_0x3a2929(0x282)](_0x178e3a-_0x4ce416,0x2)+Math['pow'](_0x4e90fa-_0x9e2be2,0x2));if(_0x2b5bb6<0x5){_0x26ed29[_0x3a2929(0x273)](_0x3a2929(0x20b),_0x4ce416)[_0x3a2929(0x273)](_0x3a2929(0x26a),_0x9e2be2);return;}_0x26ed29[_0x3a2929(0x273)]('data-stable-position','false');}var _0x2d32a7=svg[_0x3a2929(0x2a7)](_0x3a2929(0x243))[_0x3a2929(0x298)](function(){var _0x207f47=_0x3a2929;return this!==_0x26ed29[_0x207f47(0x1e4)]();}),_0x3505c3=_0x26ed29[_0x3a2929(0x1e4)]()[_0x3a2929(0x1fb)](),_0x2f27e1=[{'x':_0x4ce416+0xc,'y':_0x9e2be2+0x4},{'x':_0x4ce416+0xc,'y':_0x9e2be2-0xa},{'x':_0x4ce416+0xc,'y':_0x9e2be2+0x12},{'x':_0x4ce416-_0x3505c3[_0x3a2929(0x22a)]-0x5,'y':_0x9e2be2+0x4},{'x':_0x4ce416-_0x3505c3[_0x3a2929(0x22a)]-0x5,'y':_0x9e2be2-0xa},{'x':_0x4ce416-_0x3505c3[_0x3a2929(0x22a)]-0x5,'y':_0x9e2be2+0x12},{'x':_0x4ce416-_0x3505c3[_0x3a2929(0x22a)]/0x2,'y':_0x9e2be2-0xf},{'x':_0x4ce416-_0x3505c3[_0x3a2929(0x22a)]/0x2,'y':_0x9e2be2+0x19}],_0x21fdc8=findPositionWithoutOverlap(_0x2f27e1,_0x2d32a7,_0x3505c3);_0x26ed29[_0x3a2929(0x273)]('x',_0x21fdc8['x'])['attr']('y',_0x21fdc8['y'])[_0x3a2929(0x273)](_0x3a2929(0x20b),_0x4ce416)['attr'](_0x3a2929(0x26a),_0x9e2be2)[_0x3a2929(0x273)](_0x3a2929(0x2b8),_0x3a2929(0x260));}function findPositionWithoutOverlap(_0x53bd0f,_0x4baf20,_0x1b7a48){var _0x52ade8=_0xbcd8be;for(var _0x1123af=0x0;_0x1123af<_0x53bd0f['length'];_0x1123af++){var _0x42bde5=_0x53bd0f[_0x1123af],_0x15ac25=![],_0x536195={'x1':_0x42bde5['x'],'y1':_0x42bde5['y']-_0x1b7a48[_0x52ade8(0x267)],'x2':_0x42bde5['x']+_0x1b7a48['width'],'y2':_0x42bde5['y']+0x5};if(_0x536195['x1']<0x0||_0x536195['x2']>width||_0x536195['y1']<0x0||_0x536195['y2']>height)continue;_0x4baf20['each'](function(){var _0xcd283e=_0x52ade8,_0x148a4a=d3['select'](this)[_0xcd283e(0x1e4)]()[_0xcd283e(0x1fb)](),_0x48c6f3=parseFloat(d3[_0xcd283e(0x247)](this)[_0xcd283e(0x273)]('x')),_0x49fa83=parseFloat(d3[_0xcd283e(0x247)](this)[_0xcd283e(0x273)]('y')),_0x8dc7e5={'x1':_0x48c6f3,'y1':_0x49fa83-_0x148a4a['height'],'x2':_0x48c6f3+_0x148a4a[_0xcd283e(0x22a)],'y2':_0x49fa83+0x5};!(_0x536195['x2']<_0x8dc7e5['x1']||_0x536195['x1']>_0x8dc7e5['x2']||_0x536195['y2']<_0x8dc7e5['y1']||_0x536195['y1']>_0x8dc7e5['y2'])&&(_0x15ac25=!![]);});if(!_0x15ac25)return _0x42bde5;}for(var _0x1123af=0x0;_0x1123af<_0x53bd0f[_0x52ade8(0x25b)];_0x1123af++){var _0x42bde5=_0x53bd0f[_0x1123af],_0x536195={'x1':_0x42bde5['x'],'y1':_0x42bde5['y']-_0x1b7a48[_0x52ade8(0x267)],'x2':_0x42bde5['x']+_0x1b7a48[_0x52ade8(0x22a)],'y2':_0x42bde5['y']+0x5};if(_0x536195['x1']>=0x0&&_0x536195['x2']<=width&&_0x536195['y1']>=0x0&&_0x536195['y2']<=height)return _0x42bde5;}var _0x535397={'x':Math['min'](Math['max'](0x0,_0x53bd0f[0x0]['x']),width-_0x1b7a48[_0x52ade8(0x22a)]),'y':Math[_0x52ade8(0x24c)](Math['max'](_0x1b7a48[_0x52ade8(0x267)],_0x53bd0f[0x0]['y']),height)};return _0x535397;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0x44ccaf=_0x3b9a,_0x10eb5c=svg['selectAll'](_0x44ccaf(0x243));_0x10eb5c[_0x44ccaf(0x1d3)](function(){var _0x38b9c4=_0x44ccaf,_0x10e2fb=d3['select'](this),_0x4cb08a=_0x10e2fb[_0x38b9c4(0x241)](),_0x3462c3=filteredData['find'](function(_0x581446){return _0x581446[0x1]===_0x4cb08a;});if(_0x3462c3){var _0x232907=xScale(_0x3462c3[header[_0x38b9c4(0x24b)](xMetric)]),_0x119c11=yScale(_0x3462c3[header[_0x38b9c4(0x24b)](yMetric)]);positionLabelToAvoidOverlap(_0x10e2fb,_0x232907,_0x119c11);}});},0xa);},document['addEventListener'](_0xbcd8be(0x22e),function(){var _0x431a9d=_0xbcd8be;const _0x31fc0f=document[_0x431a9d(0x264)](_0x431a9d(0x2a6));_0x31fc0f[_0x431a9d(0x1d8)]=medianLinesVisible?_0x431a9d(0x244):_0x431a9d(0x1d4);});
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'META') {
              element.setAttribute('content', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
            updateChart();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });


function takeScreenshot() {
    const isDarkMode = document.body.classList.contains('dark-mode');
    const svg = document.getElementById('scatter-plot');
    const svgRect = svg.getBoundingClientRect();
    
    // Create a canvas with 2x resolution for higher quality
    const canvas = document.createElement('canvas');
    const scale = 2; // Increase resolution by 2x
    canvas.width = svgRect.width * scale;
    canvas.height = svgRect.height * scale;
    
    const ctx = canvas.getContext('2d');
    ctx.scale(scale, scale); 

    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = 'high';
    
    ctx.fillStyle = isDarkMode ? '#2c2c2c' : '#FFFFFF';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    const svgImg = new Image();
    const svgData = new XMLSerializer().serializeToString(svg);
    const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
    const url = URL.createObjectURL(svgBlob);

    const watermarkImg = new Image();
    watermarkImg.crossOrigin = "Anonymous";
    
    svgImg.onload = function() {
        ctx.drawImage(svgImg, 0, 0, svgRect.width, svgRect.height);
        watermarkImg.onload = function() {
            ctx.save();
            ctx.globalAlpha = 0.04;
            
            const watermarkWidth = svgRect.width * 0.3;
            const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
            const x = (svgRect.width - watermarkWidth) / 2;
            const y = (svgRect.height - watermarkHeight) / 2;
            
            ctx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
            ctx.restore();
            
            const dataURL = canvas.toDataURL('image/png', 1.0);
            const link = document.createElement('a');
            link.download = 'DataMB Screenshot.png';
            link.href = dataURL;
            link.click();
            URL.revokeObjectURL(url);
        };
        
        watermarkImg.src = 'https://datamb.football/logo.png';
    };
    
    svgImg.src = url;
}

    </script>
    
</body>
</html>
