<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

 
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }





body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 




        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

#SFctr {
	font-size: 15px !important;
}

#SFctr .SFfrm {
    margin-top: 20px;
margin-left: 10px;
}
	    
#SFctr td {
	font-family: Arial, Helvetica, sans-serif !important;
}

body.dark-mode #SFctr td {
	color: #f3f6f4 !important;
}
	    
#SFctr input[type="text"],
#SFctr input[type="password"],
#SFctr input[type="email"] {
	border-radius: 8px;

}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        var _0x4c3651=_0x63d1;(function(_0x18bed4,_0x45e1a2){var _0xf9c67f=_0x63d1,_0x3ea35d=_0x18bed4();while(!![]){try{var _0x147437=parseInt(_0xf9c67f(0x1bd))/0x1+parseInt(_0xf9c67f(0x153))/0x2+parseInt(_0xf9c67f(0x18c))/0x3*(parseInt(_0xf9c67f(0x1c4))/0x4)+-parseInt(_0xf9c67f(0x1f1))/0x5+parseInt(_0xf9c67f(0x1e4))/0x6+parseInt(_0xf9c67f(0x151))/0x7+-parseInt(_0xf9c67f(0x16d))/0x8;if(_0x147437===_0x45e1a2)break;else _0x3ea35d['push'](_0x3ea35d['shift']());}catch(_0x446909){_0x3ea35d['push'](_0x3ea35d['shift']());}}}(_0x3875,0x8e9a8));let initializeCustomSelectors=function(){var _0x2de92e=_0x63d1;const _0x38d01f=document[_0x2de92e(0x1ef)](_0x2de92e(0x135)),_0x4f9efc=document[_0x2de92e(0x1ef)](_0x2de92e(0x13e)),_0x1e0754=document[_0x2de92e(0x1ef)]('select-league');setupCustomSelect(_0x38d01f,_0x4f9efc,_0x1e0754);const _0x2b7387=document['getElementById'](_0x2de92e(0x11f)),_0xb9f981=document[_0x2de92e(0x1ef)](_0x2de92e(0x127)),_0x14fb9d=document['getElementById'](_0x2de92e(0x1cb));populateMetricOptions(_0xb9f981,header[_0x2de92e(0x1ad)](0x3),function(_0x5ea3ca,_0x2f50ba){var _0x56dce3=_0x2de92e;_0x2b7387['querySelector'](_0x56dce3(0x1d5))[_0x56dce3(0x145)]===_0x2f50ba&&_0x5ea3ca[_0x56dce3(0x1f0)][_0x56dce3(0x1eb)](_0x56dce3(0x1c7));if(_0x2f50ba===header[0x3]){_0x5ea3ca[_0x56dce3(0x1f0)][_0x56dce3(0x1eb)](_0x56dce3(0x1c7)),_0x2b7387[_0x56dce3(0x161)](_0x56dce3(0x1d5))['textContent']=_0x2f50ba;const _0x5aa9bb=_0x2f50ba[_0x56dce3(0x1c3)]()['replace'](/ /g,'-')['replace'](/%/g,_0x56dce3(0x15b));_0x2b7387[_0x56dce3(0x161)](_0x56dce3(0x1d5))[_0x56dce3(0x17d)](_0x56dce3(0x11b),_0x56dce3(0x1a2)+_0x5aa9bb);}}),setupCustomSelect(_0x2b7387,_0xb9f981,_0x14fb9d);const _0x426cf0=document['getElementById'](_0x2de92e(0x1b2)),_0x2eb54f=document[_0x2de92e(0x1ef)]('y-metric-options'),_0x2745a1=document['getElementById'](_0x2de92e(0x143));populateMetricOptions(_0x2eb54f,header['slice'](0x3),function(_0x30e634,_0x161b7d){var _0x339497=_0x2de92e;_0x426cf0[_0x339497(0x161)](_0x339497(0x1d5))['textContent']===_0x161b7d&&_0x30e634[_0x339497(0x1f0)][_0x339497(0x1eb)](_0x339497(0x1c7));if(_0x161b7d===header[0x4]){_0x30e634[_0x339497(0x1f0)][_0x339497(0x1eb)]('selected'),_0x426cf0[_0x339497(0x161)](_0x339497(0x1d5))['textContent']=_0x161b7d;const _0x355d6f=_0x161b7d[_0x339497(0x1c3)]()[_0x339497(0x174)](/ /g,'-')[_0x339497(0x174)](/%/g,_0x339497(0x15b));_0x426cf0['querySelector'](_0x339497(0x1d5))[_0x339497(0x17d)](_0x339497(0x11b),_0x339497(0x1a2)+_0x355d6f);}}),setupCustomSelect(_0x426cf0,_0x2eb54f,_0x2745a1);};function populateMetricOptions(_0x235c6d,_0x3ece67,_0x5627cd){var _0x5b7751=_0x63d1;_0x235c6d[_0x5b7751(0x1be)]='',_0x3ece67['forEach'](function(_0x921db7){var _0x153835=_0x5b7751;const _0x471342=document[_0x153835(0x1c1)](_0x153835(0x193));_0x471342[_0x153835(0x1b9)]=_0x153835(0x119),_0x471342['setAttribute'](_0x153835(0x140),_0x921db7);const _0x4f0f9e=document[_0x153835(0x1c1)](_0x153835(0x1d5));_0x4f0f9e[_0x153835(0x145)]=_0x921db7;const _0x4eaef6=_0x921db7['toLowerCase']()['replace'](/ /g,'-')[_0x153835(0x174)](/%/g,_0x153835(0x15b));_0x4f0f9e[_0x153835(0x17d)]('data-i18n','metrics.'+_0x4eaef6),_0x471342['appendChild'](_0x4f0f9e);if(_0x5627cd)_0x5627cd(_0x471342,_0x921db7);_0x235c6d['appendChild'](_0x471342);});}function setupCustomSelect(_0x2abddb,_0x4df3e8,_0xbea860){var _0x1a2a4c=_0x63d1;_0x2abddb['addEventListener'](_0x1a2a4c(0x142),function(){var _0x264fa8=_0x1a2a4c;document['querySelectorAll'](_0x264fa8(0x129))[_0x264fa8(0x190)](function(_0x32aaec){var _0x3cb02d=_0x264fa8;if(_0x32aaec!==_0x2abddb){_0x32aaec[_0x3cb02d(0x1f0)][_0x3cb02d(0x17a)](_0x3cb02d(0x181));const _0x4bb83a=_0x32aaec[_0x3cb02d(0x178)];if(_0x4bb83a)_0x4bb83a['style'][_0x3cb02d(0x1bc)]=_0x3cb02d(0x1e7);}}),_0x2abddb[_0x264fa8(0x1f0)]['toggle']('open');const _0xfcacd8=_0x2abddb['classList']['contains'](_0x264fa8(0x181));_0x4df3e8[_0x264fa8(0x1b6)][_0x264fa8(0x1bc)]=_0xfcacd8?_0x264fa8(0x1c5):'none';});const _0x5c0c40=_0x4df3e8[_0x1a2a4c(0x160)](_0x1a2a4c(0x14c));_0x5c0c40[_0x1a2a4c(0x190)](_0x1558f=>{var _0x50593a=_0x1a2a4c;_0x1558f[_0x50593a(0x1ca)](_0x50593a(0x142),function(){var _0x28688=_0x50593a;_0x5c0c40['forEach'](_0x2215e8=>_0x2215e8['classList'][_0x28688(0x17a)](_0x28688(0x1c7))),this[_0x28688(0x1f0)]['add'](_0x28688(0x1c7));const _0x51bfeb=this['querySelector'](_0x28688(0x1d5))[_0x28688(0x145)],_0xe63cc=this[_0x28688(0x161)](_0x28688(0x1d5))['getAttribute'](_0x28688(0x11b)),_0x4902f6=this[_0x28688(0x161)](_0x28688(0x1b5));_0x2abddb[_0x28688(0x1be)]='';if(_0x4902f6){const _0x2841c5=_0x4902f6[_0x28688(0x184)](!![]);_0x2841c5[_0x28688(0x1b6)][_0x28688(0x18e)]='8px',_0x2abddb['appendChild'](_0x2841c5);}const _0x5dadf6=document[_0x28688(0x1c1)](_0x28688(0x1d5));_0x5dadf6[_0x28688(0x145)]=_0x51bfeb;_0xe63cc&&_0x5dadf6[_0x28688(0x17d)](_0x28688(0x11b),_0xe63cc);_0x2abddb[_0x28688(0x130)](_0x5dadf6);const _0x28f152=this['getAttribute']('data-value');_0xbea860[_0x28688(0x182)]=_0x28f152||_0x51bfeb;const _0x37ea86=new Event('change');_0xbea860['dispatchEvent'](_0x37ea86),_0x2abddb['classList'][_0x28688(0x17a)](_0x28688(0x181)),_0x4df3e8[_0x28688(0x1b6)]['display']=_0x28688(0x1e7);});});let _0x4d8df6='',_0x5d5365;document[_0x1a2a4c(0x1ca)](_0x1a2a4c(0x10a),function(_0x369fb7){var _0x10b85e=_0x1a2a4c;if(!_0x2abddb[_0x10b85e(0x1f0)][_0x10b85e(0x1b3)](_0x10b85e(0x181)))return;if(_0x369fb7['key']==='ArrowDown'||_0x369fb7[_0x10b85e(0x10e)]===_0x10b85e(0x116)){_0x369fb7[_0x10b85e(0x19b)]();const _0x205cbd=Array[_0x10b85e(0x115)](_0x5c0c40),_0x55f384=_0x205cbd[_0x10b85e(0x1f4)](_0x133ad8=>_0x133ad8['classList']['contains'](_0x10b85e(0x1c7)));let _0x246e4b;_0x369fb7[_0x10b85e(0x10e)]===_0x10b85e(0x1ab)?_0x246e4b=_0x55f384<_0x205cbd[_0x10b85e(0x1e8)]-0x1?_0x55f384+0x1:0x0:_0x246e4b=_0x55f384>0x0?_0x55f384-0x1:_0x205cbd[_0x10b85e(0x1e8)]-0x1;_0x5c0c40['forEach'](_0x3b1719=>_0x3b1719['classList'][_0x10b85e(0x17a)]('selected')),_0x205cbd[_0x246e4b]['classList']['add'](_0x10b85e(0x1c7)),_0x205cbd[_0x246e4b]['scrollIntoView']({'block':_0x10b85e(0x120)});return;}if(_0x369fb7[_0x10b85e(0x10e)]===_0x10b85e(0x113)){_0x369fb7[_0x10b85e(0x19b)]();const _0x3569da=_0x4df3e8[_0x10b85e(0x161)](_0x10b85e(0x156));_0x3569da&&_0x3569da[_0x10b85e(0x142)]();return;}if(_0x369fb7['key']===_0x10b85e(0x1e6)){_0x369fb7[_0x10b85e(0x19b)](),_0x2abddb['classList']['remove']('open'),_0x4df3e8['style']['display']=_0x10b85e(0x1e7);return;}if(_0x369fb7[_0x10b85e(0x10e)]['length']===0x1&&_0x369fb7[_0x10b85e(0x10e)][_0x10b85e(0x1cd)](/[a-zA-Z0-9%]/)){clearTimeout(_0x5d5365),_0x4d8df6+=_0x369fb7[_0x10b85e(0x10e)][_0x10b85e(0x1c3)]();const _0x142d2e=Array[_0x10b85e(0x115)](_0x5c0c40)['find'](_0x4a340b=>{var _0x56e46c=_0x10b85e;const _0x54da11=_0x4a340b[_0x56e46c(0x161)](_0x56e46c(0x1d5))[_0x56e46c(0x145)][_0x56e46c(0x1c3)]();return _0x54da11[_0x56e46c(0x104)](_0x4d8df6);});_0x142d2e&&(_0x5c0c40[_0x10b85e(0x190)](_0x58e58c=>_0x58e58c['classList'][_0x10b85e(0x17a)](_0x10b85e(0x1c7))),_0x142d2e[_0x10b85e(0x1f0)][_0x10b85e(0x1eb)](_0x10b85e(0x1c7)),_0x142d2e[_0x10b85e(0x121)]({'block':_0x10b85e(0x120)})),_0x5d5365=setTimeout(()=>{_0x4d8df6='';},0x3e8);}});}document[_0x4c3651(0x1ca)](_0x4c3651(0x142),function(_0xf06cbe){var _0x5c40ce=_0x4c3651;const _0x4acffe=document[_0x5c40ce(0x160)](_0x5c40ce(0x18d)),_0x46964f=document['querySelectorAll'](_0x5c40ce(0x1ce));let _0x481061=![];_0x4acffe['forEach'](function(_0x31391c,_0x38bd17){var _0x3241d0=_0x5c40ce;const _0x290295=_0x46964f[_0x38bd17];_0x31391c&&_0x290295&&(_0x31391c[_0x3241d0(0x1b3)](_0xf06cbe[_0x3241d0(0x162)])||_0x290295[_0x3241d0(0x1b3)](_0xf06cbe[_0x3241d0(0x162)]))&&(_0x481061=!![]);}),!_0x481061&&_0x4acffe[_0x5c40ce(0x190)](function(_0x1824b9,_0x387f3f){var _0x299225=_0x5c40ce;_0x1824b9&&_0x46964f[_0x387f3f]&&(_0x1824b9[_0x299225(0x1f0)][_0x299225(0x17a)]('open'),_0x46964f[_0x387f3f][_0x299225(0x1b6)][_0x299225(0x1bc)]=_0x299225(0x1e7));});});function _0x3875(){var _0x16ac5f=['circle','14px','x-metric-trigger','nearest','scrollIntoView','includes','scaleLinear','getBBox','axisBottom','enter','x-metric-options','node','.custom-select-trigger.open,\x20.metric-select-trigger.open','<br/>','Unselect\x20all\x20teams','append','stroke-dasharray','backgroundColor','domain','appendChild','splice','all','false','end','league-select-trigger','#select-y','tooltip.xg-line-title','x-label','5,3','keys','.median-line','fill','tooltip.xg-line-left','league-select-options','tooltip','data-value','unselectAll','click','select-y','html','textContent','change','</span><br/>','sqrt','call','height','rgba(255,\x200,\x200,\x200.7)','.custom-select-option,\x20.metric-select-option','pageX','transform','.team-label','true','8044638GghCYh','getBoundingClientRect','1303964PdFcjv','xy-line','rgba(70,\x20130,\x20180,\x200.7)','.selected','fontWeight','#2ecc71','data-original-y','Select\x20all\x20teams','pct','stroke','each','every','text-anchor','querySelectorAll','querySelector','target','#scatter-plot','map','15px','right','range','data-stable-position','Top\x205\x20Leagues','resize','Serie\x20A','selectAll','15282224cCLCss','search-bar','axisLeft','font-family','legend-color','pointer','transition','replace','min','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','pow','nextElementSibling','split','remove','rgba(255,\x20165,\x200,\x200.7)','https://datamb.football/database/TEAM/teamplots.csv','setAttribute','font-size','trim','#select-x','open','value','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','cloneNode','median','interrupt','Goals\x20per\x2090','tooltip.xg-line-right','NFD','bold','rgba(0,\x200,\x200,\x200.3)','36opqTEX','.custom-select-trigger,\x20.metric-select-trigger','marginRight','duration','forEach','x-axis','pageY','div','Bundesliga','indexOf','size','toFixed','stroke-width','mouseout','metrics','preventDefault','Hide\x20median\x20lines','max','tooltip.xg-line-above','translate(0,','cursor','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','metrics.','.xy-line','</strong><br/>','property','team-label\x20','data-original-x','500','toggle-median-lines','<strong>','ArrowDown','parentNode','slice','DOMContentLoaded','line','search-match','select-all-tooltip','y-metric-trigger','contains','tickSize','iconify-icon','style','rgba(75,\x200,\x20130,\x200.7)','xG\x20per\x2090','className','innerHeight','option','display','727930mLizhf','innerHTML','dark-mode','top','createElement','event','toLowerCase','264980BgiLfb','block','median-lines-tooltip','selected','Show\x20median\x20lines','help','addEventListener','select-x','GET','match','.custom-select-options,\x20.metric-select-options','linearGradient#line-gradient','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','classed','width','select-league','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','span','.chart-container','bottom','attr','filter','xy-line-hover','push','marker#arrow-over,\x20marker#arrow-under','find','.team-label-','.chart-wrapper','opacity','rgba(0,\x20128,\x200,\x200.7)','text','rgba(255,\x20255,\x200,\x200.7)','1081956zopoOJ','Inter,\x20sans-serif','Escape','none','length','.xy-line-hover','select-icon','add','currentTranslations','league-legend','Premier\x20League','getElementById','classList','5050150WRHFxD','team-label-','apply','findIndex','select','#000','startsWith','<span>','translate(','mouseover','left','responseText','keydown','ion-ios-circle-filled','tooltip.xg-line-below','innerWidth','key','rgba(0,\x200,\x20255,\x200.7)','.xy-line-bg','</span>','body','Enter','search-dimmed','from','ArrowUp','median-line','class','metric-select-option','normalize','data-i18n','.xy-line-label'];_0x3875=function(){return _0x16ac5f;};return _0x3875();}const xhr=new XMLHttpRequest();xhr['open'](_0x4c3651(0x1cc),_0x4c3651(0x17c),![]),xhr['send'](null);let csvData=xhr[_0x4c3651(0x109)],extraHeaderRow=_0x4c3651(0x176);csvData=extraHeaderRow+csvData;var rows=csvData[_0x4c3651(0x17f)]()[_0x4c3651(0x179)]('\x0a'),header=rows[0x0]['split'](','),data=rows[_0x4c3651(0x1ad)](0x1)['map'](function(_0x2c23ce){var _0x41d72c=_0x4c3651;return _0x2c23ce['split'](',')[_0x41d72c(0x164)](function(_0x1dd9db,_0x1ac511){return _0x1ac511>=0x3?parseFloat(_0x1dd9db):_0x1dd9db;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0x4c3651(0x108)]-margin['right'],height=0x302-margin[_0x4c3651(0x1c0)]-margin[_0x4c3651(0x1d7)],leagueColors={'Premier\x20League':'rgba(255,\x200,\x200,\x200.7)','La\x20Liga':_0x4c3651(0x17b),'Bundesliga':_0x4c3651(0x1e3),'Serie\x20A':_0x4c3651(0x1e1),'Ligue\x201':_0x4c3651(0x10f),'Eredivisie':_0x4c3651(0x1b7),'Primeira\x20Liga':'rgba(238,\x20130,\x20238,\x200.7)'};function getLeagueColor(_0x9628f9){var _0x459d8c=_0x4c3651;return leagueColors[_0x9628f9]||_0x459d8c(0x14b);}function updateChartDimensions(){var _0x4721e3=_0x4c3651,_0xd5e0ad=document[_0x4721e3(0x161)](_0x4721e3(0x1df))['clientWidth'],_0x3041ae=window['innerHeight']*0.7,_0x58249d=0x1e,_0x135768=Math[_0x4721e3(0x175)](0x43a,_0xd5e0ad-_0x58249d*0x2),_0x3eea09=window[_0x4721e3(0x10d)]/window[_0x4721e3(0x1ba)]<0x1;if(_0x3eea09){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x2eacf6=1.4,_0x540094=Math['min'](_0x3041ae,_0x135768*_0x2eacf6);_0x540094=Math[_0x4721e3(0x19d)](_0x540094,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x2ce595=0.7,_0x540094=_0x135768*_0x2ce595;}width=_0x135768-margin[_0x4721e3(0x108)]-margin[_0x4721e3(0x166)],height=_0x540094-margin[_0x4721e3(0x1c0)]-margin[_0x4721e3(0x1d7)],d3['select'](_0x4721e3(0x163))[_0x4721e3(0x1d8)](_0x4721e3(0x1d2),_0x135768)['attr']('height',_0x540094),document[_0x4721e3(0x161)](_0x4721e3(0x1d6))[_0x4721e3(0x1b6)][_0x4721e3(0x14a)]=_0x540094+'px';}window[_0x4c3651(0x1ca)](_0x4c3651(0x16a),function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0x431c23,_0x1f7a8c){let _0x5eaf28;return function(){const _0x54ad40=this,_0xafe396=arguments;clearTimeout(_0x5eaf28),_0x5eaf28=setTimeout(function(){var _0x8667c0=_0x63d1;_0x431c23[_0x8667c0(0x1f3)](_0x54ad40,_0xafe396);},_0x1f7a8c);};}var prevWindowWidth=window['innerWidth'],prevWindowHeight=window[_0x4c3651(0x1ba)];window[_0x4c3651(0x1ca)](_0x4c3651(0x16a),debounce(function(){var _0x83398e=_0x4c3651,_0x365681=prevWindowWidth/prevWindowHeight<0x1,_0x549113=window['innerWidth']/window[_0x83398e(0x1ba)]<0x1;prevWindowWidth=window['innerWidth'],prevWindowHeight=window[_0x83398e(0x1ba)],requestAnimationFrame(function(){updateChart();});},0x32));var medianLinesVisible=![],selectX=d3[_0x4c3651(0x1f5)](_0x4c3651(0x180)),selectY=d3[_0x4c3651(0x1f5)](_0x4c3651(0x136)),names=data['map'](function(_0x54e293){return _0x54e293[0x1];});header[_0x4c3651(0x1ad)](0x3)[_0x4c3651(0x190)](function(_0x248f26){var _0x473595=_0x4c3651;selectX[_0x473595(0x12c)]('option')[_0x473595(0x1e2)](_0x248f26)['attr']('value',_0x248f26),selectY[_0x473595(0x12c)](_0x473595(0x1bb))[_0x473595(0x1e2)](_0x248f26)['attr'](_0x473595(0x182),_0x248f26);}),selectX[_0x4c3651(0x1a5)](_0x4c3651(0x182),header[0x3]),selectY[_0x4c3651(0x1a5)](_0x4c3651(0x182),header[0x4]);var svg=d3[_0x4c3651(0x1f5)]('#scatter-plot')[_0x4c3651(0x1d8)]('width',width+margin[_0x4c3651(0x108)]+margin['right'])[_0x4c3651(0x1d8)](_0x4c3651(0x14a),height+margin['top']+margin[_0x4c3651(0x1d7)])[_0x4c3651(0x12c)]('g')[_0x4c3651(0x1d8)](_0x4c3651(0x14e),_0x4c3651(0x106)+margin[_0x4c3651(0x108)]+','+margin[_0x4c3651(0x1c0)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3[_0x4c3651(0x123)]()['range']([0x0,width]),yScale=d3[_0x4c3651(0x123)]()[_0x4c3651(0x167)]([height,0x0]),xAxis=d3[_0x4c3651(0x125)](xScale)[_0x4c3651(0x1b4)](0x0),yAxis=d3['axisLeft'](yScale)[_0x4c3651(0x1b4)](0x0),gXAxis=svg['append']('g')['attr'](_0x4c3651(0x118),_0x4c3651(0x191))[_0x4c3651(0x1d8)](_0x4c3651(0x14e),_0x4c3651(0x19f)+height+')'),gYAxis=svg['append']('g')[_0x4c3651(0x1d8)](_0x4c3651(0x118),'y-axis'),xLabel=svg[_0x4c3651(0x12c)](_0x4c3651(0x1e2))[_0x4c3651(0x1d8)](_0x4c3651(0x118),_0x4c3651(0x138))['attr'](_0x4c3651(0x15f),_0x4c3651(0x134))[_0x4c3651(0x1d8)]('x',width)[_0x4c3651(0x1d8)]('y',height+0x23)[_0x4c3651(0x1b6)](_0x4c3651(0x170),_0x4c3651(0x1e5))['style'](_0x4c3651(0x17e),'14px'),yLabel=svg['append'](_0x4c3651(0x1e2))[_0x4c3651(0x1d8)](_0x4c3651(0x118),'y-label')['attr'](_0x4c3651(0x15f),_0x4c3651(0x134))[_0x4c3651(0x1d8)]('transform','rotate(-90)')['attr']('y',-0x35)[_0x4c3651(0x1d8)]('x',0x0)[_0x4c3651(0x1b6)]('font-family',_0x4c3651(0x1e5))[_0x4c3651(0x1b6)]('font-size',_0x4c3651(0x11e)),tooltip=d3[_0x4c3651(0x1f5)](_0x4c3651(0x112))[_0x4c3651(0x12c)](_0x4c3651(0x193))[_0x4c3651(0x1d8)](_0x4c3651(0x118),'tooltip');function isMobileDevice(){var _0x2832d9=_0x4c3651;return window[_0x2832d9(0x10d)]<=0x300;}function positionTooltip(_0x49f4c1,_0x471df9){var _0x58a8f7=_0x4c3651;const _0x30c109=_0x471df9[_0x58a8f7(0x128)]();if(!_0x30c109)return{'left':0x0,'top':0x0};const _0x3e13d3=_0x30c109[_0x58a8f7(0x152)](),_0x927ce5=window['innerWidth'],_0x441254=window['innerHeight'];let _0x1cc56d=_0x49f4c1['pageX']+0xa,_0x177e63=_0x49f4c1['pageY']-0x1c;return _0x1cc56d+_0x3e13d3[_0x58a8f7(0x1d2)]>_0x927ce5-0xa&&(_0x1cc56d=_0x49f4c1[_0x58a8f7(0x14d)]-_0x3e13d3[_0x58a8f7(0x1d2)]-0xa),_0x177e63+_0x3e13d3['height']>_0x441254-0xa&&(_0x177e63=_0x49f4c1[_0x58a8f7(0x192)]-_0x3e13d3['height']-0xa),_0x1cc56d=Math['max'](0xa,_0x1cc56d),_0x177e63=Math['max'](0xa,_0x177e63),{'left':_0x1cc56d,'top':_0x177e63};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function _0x63d1(_0x37d326,_0x1100db){var _0x387574=_0x3875();return _0x63d1=function(_0x63d11a,_0x4c0679){_0x63d11a=_0x63d11a-0x103;var _0x382560=_0x387574[_0x63d11a];return _0x382560;},_0x63d1(_0x37d326,_0x1100db);}function updateChart(){var _0x54de40=_0x4c3651;updateChartDimensions(),d3[_0x54de40(0x1f5)]('#scatter-plot')[_0x54de40(0x1d8)]('width',width+margin[_0x54de40(0x108)]+margin[_0x54de40(0x166)])[_0x54de40(0x1d8)](_0x54de40(0x14a),height+margin['top']+margin['bottom']),gXAxis[_0x54de40(0x1d8)](_0x54de40(0x14e),_0x54de40(0x19f)+height+')'),xLabel[_0x54de40(0x1d8)]('x',width)[_0x54de40(0x1d8)]('y',height+0x23),yLabel[_0x54de40(0x1d8)]('x',0x0);const _0x44ee7c=document[_0x54de40(0x112)][_0x54de40(0x1f0)]['contains'](_0x54de40(0x1bf));var _0x5e70db=document[_0x54de40(0x1ef)](_0x54de40(0x1d3))[_0x54de40(0x182)];if(_0x5e70db===_0x54de40(0x132))filteredData=data;else _0x5e70db===_0x54de40(0x169)?filteredData=data['filter'](function(_0x225bf1){var _0x351232=_0x54de40;return _0x225bf1[0x2]===_0x351232(0x1ee)||_0x225bf1[0x2]==='La\x20Liga'||_0x225bf1[0x2]===_0x351232(0x194)||_0x225bf1[0x2]===_0x351232(0x16b)||_0x225bf1[0x2]==='Ligue\x201';}):filteredData=data['filter'](function(_0x2ec924){return _0x2ec924[0x2]===_0x5e70db;});filteredNames=filteredData[_0x54de40(0x164)](function(_0xe0d246){return _0xe0d246[0x1];}),xMetric=selectX[_0x54de40(0x1a5)](_0x54de40(0x182)),yMetric=selectY[_0x54de40(0x1a5)]('value'),xScale[_0x54de40(0x167)]([0x0,width])['domain']((function(){var _0x5d60ad=_0x54de40;const _0x58f0fd=d3[_0x5d60ad(0x175)](filteredData,_0x3bc5d6=>_0x3bc5d6[header['indexOf'](xMetric)]),_0x1a857d=d3['max'](filteredData,_0x34c330=>_0x34c330[header['indexOf'](xMetric)]),_0x50658b=_0x1a857d-_0x58f0fd,_0x4eff4e=_0x50658b*0.1;return[_0x58f0fd-_0x4eff4e,_0x1a857d+_0x4eff4e];}())),yScale['range']([height,0x0])[_0x54de40(0x12f)]((function(){var _0x463da7=_0x54de40;const _0x49cbb0=d3[_0x463da7(0x175)](filteredData,_0x301326=>_0x301326[header[_0x463da7(0x195)](yMetric)]),_0x48e2ff=d3[_0x463da7(0x19d)](filteredData,_0xd28062=>_0xd28062[header[_0x463da7(0x195)](yMetric)]),_0x4f205e=_0x48e2ff-_0x49cbb0,_0x3da084=_0x4f205e*0.1;return[_0x49cbb0-_0x3da084,_0x48e2ff+_0x3da084];}())),gXAxis[_0x54de40(0x149)](d3['axisBottom'](xScale)[_0x54de40(0x1b4)](0x0)),gYAxis[_0x54de40(0x149)](d3[_0x54de40(0x16f)](yScale)[_0x54de40(0x1b4)](0x0));const _0x46e285='metrics.'+xMetric['toLowerCase']()[_0x54de40(0x174)](/ /g,'-')[_0x54de40(0x174)](/%/g,'pct'),_0x21ed07='metrics.'+yMetric[_0x54de40(0x1c3)]()['replace'](/ /g,'-')['replace'](/%/g,'pct');xLabel[_0x54de40(0x1d8)](_0x54de40(0x11b),_0x46e285),yLabel[_0x54de40(0x1d8)](_0x54de40(0x11b),_0x21ed07);if(window['currentTranslations']&&window[_0x54de40(0x1ec)][_0x54de40(0x19a)]){const _0xf069ca=xMetric['toLowerCase']()['replace'](/ /g,'-')[_0x54de40(0x174)](/%/g,_0x54de40(0x15b)),_0x57eba1=yMetric['toLowerCase']()[_0x54de40(0x174)](/ /g,'-')[_0x54de40(0x174)](/%/g,'pct'),_0x293b78=window[_0x54de40(0x1ec)][_0x54de40(0x19a)][_0xf069ca],_0x3b6f4f=window[_0x54de40(0x1ec)][_0x54de40(0x19a)][_0x57eba1];xLabel[_0x54de40(0x1e2)](_0x293b78||xMetric),yLabel[_0x54de40(0x1e2)](_0x3b6f4f||yMetric);}else xLabel[_0x54de40(0x1e2)](xMetric),yLabel[_0x54de40(0x1e2)](yMetric);svg[_0x54de40(0x16c)](_0x54de40(0x11d))[_0x54de40(0x17a)](),svg['selectAll']('.team-label')[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)](_0x54de40(0x1a3))[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)](_0x54de40(0x110))[_0x54de40(0x17a)](),svg['selectAll'](_0x54de40(0x11c))[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)]('.xy-line-label-bg')[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)]('.performance-label')[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)](_0x54de40(0x1cf))['remove'](),svg[_0x54de40(0x16c)](_0x54de40(0x1dc))[_0x54de40(0x17a)](),svg['selectAll'](_0x54de40(0x1e9))[_0x54de40(0x17a)](),svg[_0x54de40(0x16c)](_0x54de40(0x13b))[_0x54de40(0x17a)]();if(xMetric===_0x54de40(0x1b8)&&yMetric==='Goals\x20per\x2090'||xMetric==='Goals\x20per\x2090'&&yMetric===_0x54de40(0x1b8)){var _0x332a9c=null,_0xa40519=d3[_0x54de40(0x175)](filteredData,function(_0x3dc14c){var _0x4b7092=_0x54de40;return _0x3dc14c[header[_0x4b7092(0x195)](xMetric)];}),_0x30000a=d3[_0x54de40(0x19d)](filteredData,function(_0x1663cf){var _0x54eb06=_0x54de40;return _0x1663cf[header[_0x54eb06(0x195)](xMetric)];}),_0x43d3e2=d3[_0x54de40(0x175)](filteredData,function(_0x3f9880){var _0x5df654=_0x54de40;return _0x3f9880[header[_0x5df654(0x195)](yMetric)];}),_0x2906e2=d3[_0x54de40(0x19d)](filteredData,function(_0x510d42){return _0x510d42[header['indexOf'](yMetric)];}),_0x599a1e=Math['min'](_0x30000a,_0x2906e2),_0x27102c=Math[_0x54de40(0x19d)](_0xa40519,_0x43d3e2);svg[_0x54de40(0x12c)]('line')[_0x54de40(0x1d8)](_0x54de40(0x118),_0x54de40(0x154))['attr']('x1',xScale(_0x27102c))[_0x54de40(0x1d8)]('y1',yScale(_0x27102c))[_0x54de40(0x1d8)]('x2',xScale(_0x599a1e))[_0x54de40(0x1d8)]('y2',yScale(_0x599a1e))[_0x54de40(0x1b6)](_0x54de40(0x15c),_0x54de40(0x158))[_0x54de40(0x1b6)](_0x54de40(0x198),'2')['style'](_0x54de40(0x12d),_0x54de40(0x139)),svg[_0x54de40(0x12c)](_0x54de40(0x1af))[_0x54de40(0x1d8)]('class',_0x54de40(0x1da))['attr']('x1',xScale(_0x27102c))[_0x54de40(0x1d8)]('y1',yScale(_0x27102c))[_0x54de40(0x1d8)]('x2',xScale(_0x599a1e))['attr']('y2',yScale(_0x599a1e))[_0x54de40(0x1b6)](_0x54de40(0x15c),'transparent')[_0x54de40(0x1b6)](_0x54de40(0x198),'15')['style'](_0x54de40(0x1a0),_0x54de40(0x1c9))['on'](_0x54de40(0x107),function(){var _0x49659c=_0x54de40;_0x332a9c&&clearTimeout(_0x332a9c);var _0x55e916=d3[_0x49659c(0x1c2)]['pageX'],_0x585ece=d3[_0x49659c(0x1c2)][_0x49659c(0x192)];_0x332a9c=setTimeout(function(){var _0x17c467=_0x49659c;tooltip['transition']()['duration'](0xc8)[_0x17c467(0x1b6)](_0x17c467(0x1e0),0.9);var _0x12a4d5='<strong>'+getTranslation(_0x17c467(0x137),'G\x20=\x20xG\x20Line')+_0x17c467(0x1a4);xMetric===_0x17c467(0x1b8)&&yMetric===_0x17c467(0x187)?_0x12a4d5+='<span>'+getTranslation(_0x17c467(0x19e),_0x17c467(0x183))+_0x17c467(0x147)+_0x17c467(0x105)+getTranslation(_0x17c467(0x10c),_0x17c467(0x1a1))+_0x17c467(0x111):_0x12a4d5+=_0x17c467(0x105)+getTranslation(_0x17c467(0x188),_0x17c467(0x1d0))+_0x17c467(0x147)+_0x17c467(0x105)+getTranslation(_0x17c467(0x13d),_0x17c467(0x1d4))+_0x17c467(0x111),tooltip[_0x17c467(0x144)](_0x12a4d5)[_0x17c467(0x1b6)](_0x17c467(0x108),_0x55e916+0xa+'px')[_0x17c467(0x1b6)](_0x17c467(0x1c0),_0x585ece-0x1c+'px');},0x258);})['on'](_0x54de40(0x199),function(){var _0xfcf6ac=_0x54de40;_0x332a9c&&(clearTimeout(_0x332a9c),_0x332a9c=null),tooltip[_0xfcf6ac(0x173)]()[_0xfcf6ac(0x18f)](0x1f4)['style'](_0xfcf6ac(0x1e0),0x0);});}if(medianLinesVisible){var _0x5036fa=d3['median'](filteredData,function(_0x56e0d4){var _0x12bbb6=_0x54de40;return _0x56e0d4[header[_0x12bbb6(0x195)](xMetric)];}),_0x14b1c9=d3[_0x54de40(0x185)](filteredData,function(_0x4a5000){return _0x4a5000[header['indexOf'](yMetric)];});svg[_0x54de40(0x12c)](_0x54de40(0x1af))[_0x54de40(0x1d8)](_0x54de40(0x118),'median-line')[_0x54de40(0x1d8)]('x1',xScale(_0x5036fa))[_0x54de40(0x1d8)]('y1',0x0)[_0x54de40(0x1d8)]('x2',xScale(_0x5036fa))[_0x54de40(0x1d8)]('y2',height)['style']('stroke',_0x54de40(0x18b))['style'](_0x54de40(0x12d),'4'),svg[_0x54de40(0x12c)](_0x54de40(0x1af))[_0x54de40(0x1d8)](_0x54de40(0x118),_0x54de40(0x117))[_0x54de40(0x1d8)]('x1',0x0)[_0x54de40(0x1d8)]('y1',yScale(_0x14b1c9))[_0x54de40(0x1d8)]('x2',width)[_0x54de40(0x1d8)]('y2',yScale(_0x14b1c9))[_0x54de40(0x1b6)](_0x54de40(0x15c),'rgba(0,\x200,\x200,\x200.3)')[_0x54de40(0x1b6)]('stroke-dasharray','4');}circles=svg[_0x54de40(0x16c)](_0x54de40(0x11d))['data'](filteredData)[_0x54de40(0x126)]()[_0x54de40(0x12c)](_0x54de40(0x11d))[_0x54de40(0x1d8)]('cx',function(_0x410a2c){var _0x45b56d=_0x54de40;return xScale(_0x410a2c[header[_0x45b56d(0x195)](xMetric)]);})[_0x54de40(0x1d8)]('cy',function(_0x2ec70a){var _0x18a1c8=_0x54de40;return yScale(_0x2ec70a[header[_0x18a1c8(0x195)](yMetric)]);})[_0x54de40(0x1d8)]('r',0x8)[_0x54de40(0x1b6)](_0x54de40(0x13c),function(_0xbc9214){var _0x202cb2=_0x54de40;if(clickedCircles[_0x202cb2(0x122)](_0xbc9214[0x1]))return getLeagueColor(_0xbc9214[0x2]);return'rgba(70,\x20130,\x20180,\x200.7)';})[_0x54de40(0x1b6)](_0x54de40(0x15c),function(_0x9b0f67){var _0x36cabe=_0x54de40;return clickedCircles['includes'](_0x9b0f67[0x1])?'#000':_0x36cabe(0x1e7);})['style'](_0x54de40(0x198),function(_0x5a672d){return clickedCircles['includes'](_0x5a672d[0x1])?0x2:0x0;})[_0x54de40(0x1b6)](_0x54de40(0x1a0),_0x54de40(0x172))['on'](_0x54de40(0x107),function(_0x23f264){var _0x508e19=_0x54de40;d3[_0x508e19(0x1f5)](this)[_0x508e19(0x173)]()['duration'](0xc8)[_0x508e19(0x1d8)]('r',0xa)[_0x508e19(0x1b6)]('fill',getLeagueColor(_0x23f264[0x2])),tooltip[_0x508e19(0x173)]()[_0x508e19(0x18f)](0xc8)['style'](_0x508e19(0x1e0),0.9);const _0x158485=_0x508e19(0x1a2)+xMetric['toLowerCase']()[_0x508e19(0x174)](/ /g,'-')[_0x508e19(0x174)](/%/g,_0x508e19(0x15b)),_0x88be20=_0x508e19(0x1a2)+yMetric[_0x508e19(0x1c3)]()[_0x508e19(0x174)](/ /g,'-')[_0x508e19(0x174)](/%/g,_0x508e19(0x15b)),_0x2bec05=getTranslation(_0x158485,xMetric),_0x9e787f=getTranslation(_0x88be20,yMetric);tooltip[_0x508e19(0x144)](_0x508e19(0x1aa)+_0x23f264[0x1]+'</strong><br/>'+_0x2bec05+':\x20'+_0x23f264[header[_0x508e19(0x195)](xMetric)][_0x508e19(0x197)](0x2)+_0x508e19(0x12a)+_0x9e787f+':\x20'+_0x23f264[header['indexOf'](yMetric)][_0x508e19(0x197)](0x2));const _0x574411=tooltip['node']();if(_0x574411){const _0x1d369b=_0x574411[_0x508e19(0x152)](),_0x4fe9b4=window['innerWidth'],_0x579d94=window['innerHeight'];let _0x2a1049=d3[_0x508e19(0x1c2)][_0x508e19(0x14d)]+0xa,_0x5b35de=d3[_0x508e19(0x1c2)][_0x508e19(0x192)]-0x1c;_0x2a1049+_0x1d369b['width']>_0x4fe9b4-0xa&&(_0x2a1049=d3['event'][_0x508e19(0x14d)]-_0x1d369b[_0x508e19(0x1d2)]-0xa),_0x5b35de+_0x1d369b[_0x508e19(0x14a)]>_0x579d94-0xa&&(_0x5b35de=d3[_0x508e19(0x1c2)][_0x508e19(0x192)]-_0x1d369b[_0x508e19(0x14a)]-0xa),_0x2a1049=Math[_0x508e19(0x19d)](0xa,_0x2a1049),_0x5b35de=Math[_0x508e19(0x19d)](0xa,_0x5b35de),tooltip[_0x508e19(0x1b6)](_0x508e19(0x108),_0x2a1049+'px')[_0x508e19(0x1b6)](_0x508e19(0x1c0),_0x5b35de+'px');}else tooltip[_0x508e19(0x1b6)]('left',d3[_0x508e19(0x1c2)][_0x508e19(0x14d)]+0xa+'px')['style'](_0x508e19(0x1c0),d3[_0x508e19(0x1c2)][_0x508e19(0x192)]-0x1c+'px');window[_0x508e19(0x10d)]<=0x300&&setTimeout(function(){tooltip['transition']()['duration'](0xc8)['style']('opacity',0x0);},0x3e8);})['on'](_0x54de40(0x199),function(_0x2fb5eb){var _0xe75b86=_0x54de40;window['innerWidth']>0x300&&tooltip[_0xe75b86(0x173)]()[_0xe75b86(0x18f)](0x1f4)[_0xe75b86(0x1b6)](_0xe75b86(0x1e0),0x0);var _0x25d095=clickedCircles[_0xe75b86(0x122)](_0x2fb5eb[0x1]);d3[_0xe75b86(0x1f5)](this)[_0xe75b86(0x173)]()[_0xe75b86(0x18f)](0xc8)[_0xe75b86(0x1d8)]('r',0x8)['style'](_0xe75b86(0x13c),function(){var _0x557239=_0xe75b86;return _0x25d095?getLeagueColor(_0x2fb5eb[0x2]):_0x557239(0x155);});})['on']('click',function(_0x431e6b){var _0x5c0274=_0x54de40,_0x45641b=d3[_0x5c0274(0x1f5)](this)[_0x5c0274(0x1d1)](_0x5c0274(0x1b0));_0x45641b&&resetSearch();var _0x2140f8=clickedCircles['indexOf'](_0x431e6b[0x1]);_0x2140f8===-0x1?(clickedCircles[_0x5c0274(0x1db)](_0x431e6b[0x1]),d3['select'](this)[_0x5c0274(0x1b6)](_0x5c0274(0x13c),getLeagueColor(_0x431e6b[0x2]))[_0x5c0274(0x1b6)](_0x5c0274(0x15c),_0x5c0274(0x103))[_0x5c0274(0x1b6)]('stroke-width',0x2),addTeamLabel(_0x431e6b)):(clickedCircles[_0x5c0274(0x131)](_0x2140f8,0x1),d3['select'](this)[_0x5c0274(0x1b6)]('fill','rgba(70,\x20130,\x20180,\x200.7)')[_0x5c0274(0x1b6)](_0x5c0274(0x15c),_0x5c0274(0x1e7)),svg['selectAll'](_0x5c0274(0x1de)+_0x431e6b[0x1][_0x5c0274(0x174)](/\s+/g,'-')['toLowerCase']())[_0x5c0274(0x17a)]());updateSelectAllButtonText();var _0xca79b6=document[_0x5c0274(0x1ef)]('select-league')[_0x5c0274(0x182)];updateLeagueLegend(_0xca79b6);}),clickedCircles[_0x54de40(0x190)](function(_0x6f46c6){var _0x2b779b=_0x54de40,_0x38694c=filteredData[_0x2b779b(0x1dd)](function(_0x346c54){return _0x346c54[0x1]===_0x6f46c6;});_0x38694c&&addTeamLabel(_0x38694c);}),updateSelectAllButtonText(),updateLeagueLegend(_0x5e70db);}function updateSelectAllButtonText(){var _0x1ef1b8=_0x4c3651,_0x360faf=document[_0x1ef1b8(0x1ef)](_0x1ef1b8(0x1ea)),_0x3ef3bf=document[_0x1ef1b8(0x1ef)](_0x1ef1b8(0x1b1)),_0x41df5f=filteredData['every'](function(_0x1c6139){var _0x3d8211=_0x1ef1b8;return clickedCircles[_0x3d8211(0x122)](_0x1c6139[0x1]);});_0x41df5f?(_0x360faf[_0x1ef1b8(0x1b9)]='ion-ios-circle-outline',_0x3ef3bf&&(window[_0x1ef1b8(0x1ec)]&&window[_0x1ef1b8(0x1ec)][_0x1ef1b8(0x13f)]?_0x3ef3bf[_0x1ef1b8(0x145)]=window[_0x1ef1b8(0x1ec)][_0x1ef1b8(0x13f)][_0x1ef1b8(0x141)]||_0x1ef1b8(0x12b):_0x3ef3bf[_0x1ef1b8(0x145)]=_0x1ef1b8(0x12b))):(_0x360faf[_0x1ef1b8(0x1b9)]=_0x1ef1b8(0x10b),_0x3ef3bf&&(window[_0x1ef1b8(0x1ec)]&&window['currentTranslations'][_0x1ef1b8(0x13f)]?_0x3ef3bf[_0x1ef1b8(0x145)]=window['currentTranslations'][_0x1ef1b8(0x13f)]['selectAll']||'Select\x20all\x20teams':_0x3ef3bf[_0x1ef1b8(0x145)]=_0x1ef1b8(0x15a)));}selectX['on'](_0x4c3651(0x146),updateChart),selectY['on'](_0x4c3651(0x146),updateChart);function removeSpecialCharsAndDiacritics(_0x2676c7){var _0x3eb739=_0x4c3651;if(!_0x2676c7)return'';return _0x2676c7[_0x3eb739(0x11a)](_0x3eb739(0x189))['replace'](/[\u0300-\u036f]/g,'')[_0x3eb739(0x174)](/Ø/g,'O')[_0x3eb739(0x174)](/ø/g,'o');}var searchBar=document['getElementById'](_0x4c3651(0x16e));searchBar[_0x4c3651(0x1ca)]('input',function(){var _0x3c993a=_0x4c3651,_0x2a20e8=searchBar[_0x3c993a(0x182)][_0x3c993a(0x1c3)]();if(_0x2a20e8===''){resetSearch();return;}var _0x420595=removeSpecialCharsAndDiacritics(_0x2a20e8);svg['selectAll'](_0x3c993a(0x11d))[_0x3c993a(0x1d1)](_0x3c993a(0x1b0),![])[_0x3c993a(0x1b6)]('fill',function(_0x2f5320){var _0xd9f47f=_0x3c993a;return clickedCircles[_0xd9f47f(0x122)](_0x2f5320[0x1])?getLeagueColor(_0x2f5320[0x2]):_0xd9f47f(0x155);})[_0x3c993a(0x1b6)](_0x3c993a(0x15c),function(_0x1c935b){var _0x5853db=_0x3c993a;return clickedCircles[_0x5853db(0x122)](_0x1c935b[0x1])?_0x5853db(0x103):_0x5853db(0x1e7);})[_0x3c993a(0x1b6)](_0x3c993a(0x198),function(_0x5a7608){var _0x5d5fe1=_0x3c993a;return clickedCircles[_0x5d5fe1(0x122)](_0x5a7608[0x1])?0x2:0x0;})[_0x3c993a(0x1b6)]('filter',_0x3c993a(0x1e7))[_0x3c993a(0x15d)](function(){var _0x4795e9=_0x3c993a;d3[_0x4795e9(0x1f5)](this)['style']('r',null);}),svg[_0x3c993a(0x16c)](_0x3c993a(0x14f))[_0x3c993a(0x1d1)](_0x3c993a(0x1b0),![])['classed'](_0x3c993a(0x114),![]);var _0x17fd71=[];svg[_0x3c993a(0x16c)](_0x3c993a(0x11d))[_0x3c993a(0x1d9)](function(_0x2de384){var _0x10ac65=_0x3c993a,_0x309795=_0x2de384[0x1][_0x10ac65(0x1c3)](),_0x4c9a12=removeSpecialCharsAndDiacritics(_0x309795),_0x569910=_0x309795[_0x10ac65(0x122)](_0x2a20e8)||_0x4c9a12[_0x10ac65(0x122)](_0x420595);return _0x569910&&_0x17fd71[_0x10ac65(0x1db)](_0x2de384[0x1]),_0x569910;})['classed'](_0x3c993a(0x1b0),!![])[_0x3c993a(0x15d)](function(){var _0x4154a2=_0x3c993a;this[_0x4154a2(0x1ac)][_0x4154a2(0x130)](this);}),_0x17fd71['length']>0x0?(svg[_0x3c993a(0x16c)]('.team-label')[_0x3c993a(0x1d1)](_0x3c993a(0x114),!![]),svg[_0x3c993a(0x16c)](_0x3c993a(0x14f))['filter'](function(){var _0x1ab072=_0x3c993a,_0x23f626=d3['select'](this)[_0x1ab072(0x1e2)]();return _0x17fd71[_0x1ab072(0x122)](_0x23f626);})['classed'](_0x3c993a(0x1b0),!![])[_0x3c993a(0x1d1)](_0x3c993a(0x114),![])[_0x3c993a(0x15d)](function(){var _0x44a29a=_0x3c993a;this[_0x44a29a(0x1ac)][_0x44a29a(0x130)](this);}),_0x17fd71[_0x3c993a(0x190)](function(_0x15a6af){var _0x32bbfa=_0x3c993a,_0x3d7529=_0x32bbfa(0x1f2)+_0x15a6af[_0x32bbfa(0x174)](/\s+/g,'-')[_0x32bbfa(0x1c3)]();if(svg[_0x32bbfa(0x1f5)]('.'+_0x3d7529)[_0x32bbfa(0x196)]()===0x0){var _0x4a6cbb=filteredData['find'](function(_0x15e9a2){return _0x15e9a2[0x1]===_0x15a6af;});_0x4a6cbb&&(addTeamLabel(_0x4a6cbb),svg[_0x32bbfa(0x1f5)]('.'+_0x3d7529)[_0x32bbfa(0x1d1)](_0x32bbfa(0x1b0),!![]));}})):(svg[_0x3c993a(0x16c)](_0x3c993a(0x14f))[_0x3c993a(0x15d)](function(){var _0x251c38=_0x3c993a,_0x93ed71=d3[_0x251c38(0x1f5)](this),_0x486e1c=_0x93ed71[_0x251c38(0x1e2)]();!clickedCircles[_0x251c38(0x122)](_0x486e1c)&&_0x93ed71[_0x251c38(0x17a)]();}),svg[_0x3c993a(0x16c)](_0x3c993a(0x11d))['style'](_0x3c993a(0x13c),function(_0x303f49){var _0x14d306=_0x3c993a;return clickedCircles[_0x14d306(0x122)](_0x303f49[0x1])?getLeagueColor(_0x303f49[0x2]):_0x14d306(0x155);})['style']('stroke',function(_0x4b79c7){var _0x22ea12=_0x3c993a;return clickedCircles[_0x22ea12(0x122)](_0x4b79c7[0x1])?_0x22ea12(0x103):_0x22ea12(0x1e7);})[_0x3c993a(0x1b6)](_0x3c993a(0x198),function(_0x9b16b4){var _0x239f91=_0x3c993a;return clickedCircles[_0x239f91(0x122)](_0x9b16b4[0x1])?0x2:0x0;}));});function resetSearch(){var _0x4f617c=_0x4c3651;searchBar[_0x4f617c(0x182)]='',svg['selectAll'](_0x4f617c(0x11d))['classed'](_0x4f617c(0x1b0),![])[_0x4f617c(0x1b6)](_0x4f617c(0x13c),function(_0x5b82c9){var _0x25e556=_0x4f617c;return clickedCircles[_0x25e556(0x122)](_0x5b82c9[0x1])?getLeagueColor(_0x5b82c9[0x2]):_0x25e556(0x155);})[_0x4f617c(0x1b6)](_0x4f617c(0x15c),function(_0xbae9a2){var _0x29867d=_0x4f617c;return clickedCircles[_0x29867d(0x122)](_0xbae9a2[0x1])?_0x29867d(0x103):'none';})[_0x4f617c(0x1b6)](_0x4f617c(0x198),function(_0xf6a404){return clickedCircles['includes'](_0xf6a404[0x1])?0x2:0x0;})['style'](_0x4f617c(0x1d9),'none')[_0x4f617c(0x15d)](function(){var _0x11a28f=_0x4f617c;d3[_0x11a28f(0x1f5)](this)['style']('r',null),d3['select'](this)[_0x11a28f(0x186)]();}),svg['selectAll'](_0x4f617c(0x14f))['classed'](_0x4f617c(0x1b0),![])[_0x4f617c(0x1d1)](_0x4f617c(0x114),![])[_0x4f617c(0x15d)](function(){var _0x5a1d7b=_0x4f617c;d3['select'](this)[_0x5a1d7b(0x186)]();}),svg[_0x4f617c(0x16c)](_0x4f617c(0x14f))[_0x4f617c(0x15d)](function(){var _0x18228c=_0x4f617c,_0x489549=d3[_0x18228c(0x1f5)](this),_0x14d79d=_0x489549[_0x18228c(0x1e2)]();!clickedCircles[_0x18228c(0x122)](_0x14d79d)&&_0x489549[_0x18228c(0x17a)]();});}var toggleButton=document['getElementById'](_0x4c3651(0x1a9));toggleButton[_0x4c3651(0x1ca)](_0x4c3651(0x142),function(){var _0x44a4a1=_0x4c3651;medianLinesVisible=!medianLinesVisible,updateChart();const _0x1d7e6e=document['getElementById'](_0x44a4a1(0x1c6));window[_0x44a4a1(0x1ec)]&&window[_0x44a4a1(0x1ec)][_0x44a4a1(0x13f)]?_0x1d7e6e[_0x44a4a1(0x145)]=medianLinesVisible?window[_0x44a4a1(0x1ec)]['tooltip']['hideMedianLines']||_0x44a4a1(0x19c):window['currentTranslations'][_0x44a4a1(0x13f)]['showMedianLines']||'Show\x20median\x20lines':_0x1d7e6e[_0x44a4a1(0x145)]=medianLinesVisible?_0x44a4a1(0x19c):_0x44a4a1(0x1c8);});function selectAllCircles(){var _0x1ac873=_0x4c3651,_0x4c0ea0=filteredData[_0x1ac873(0x15e)](function(_0x46a7d0){var _0x49f28d=_0x1ac873;return clickedCircles[_0x49f28d(0x122)](_0x46a7d0[0x1]);});_0x4c0ea0?(clickedCircles=[],svg[_0x1ac873(0x16c)](_0x1ac873(0x11d))['style'](_0x1ac873(0x13c),_0x1ac873(0x155))['style'](_0x1ac873(0x15c),_0x1ac873(0x1e7)),svg[_0x1ac873(0x16c)](_0x1ac873(0x14f))[_0x1ac873(0x17a)]()):(svg[_0x1ac873(0x16c)](_0x1ac873(0x11d))['each'](function(_0x527719){var _0x9bf5ee=_0x1ac873;!clickedCircles[_0x9bf5ee(0x122)](_0x527719[0x1])&&(clickedCircles[_0x9bf5ee(0x1db)](_0x527719[0x1]),d3[_0x9bf5ee(0x1f5)](this)[_0x9bf5ee(0x1b6)](_0x9bf5ee(0x13c),getLeagueColor(_0x527719[0x2]))['style']('stroke',_0x9bf5ee(0x103))['style'](_0x9bf5ee(0x198),0x2));}),filteredData['forEach'](function(_0x59fe87){addTeamLabel(_0x59fe87);}));updateSelectAllButtonText();var _0x3c2ea3=document[_0x1ac873(0x1ef)](_0x1ac873(0x1d3))['value'];updateLeagueLegend(_0x3c2ea3);}updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x364a9a){var _0x2a8b8c=_0x4c3651,_0x2ce836=document['getElementById'](_0x2a8b8c(0x1ed));if(_0x364a9a!==_0x2a8b8c(0x132)&&_0x364a9a!==_0x2a8b8c(0x169)){_0x2ce836[_0x2a8b8c(0x1b6)][_0x2a8b8c(0x1bc)]=_0x2a8b8c(0x1e7);return;}if(clickedCircles[_0x2a8b8c(0x1e8)]===0x0){_0x2ce836[_0x2a8b8c(0x1b6)][_0x2a8b8c(0x1bc)]=_0x2a8b8c(0x1e7);return;}_0x2ce836[_0x2a8b8c(0x1b6)][_0x2a8b8c(0x1bc)]='flex',_0x2ce836[_0x2a8b8c(0x1be)]='';var _0x3f5562=document[_0x2a8b8c(0x1c1)]('div');_0x3f5562[_0x2a8b8c(0x1b6)][_0x2a8b8c(0x157)]=_0x2a8b8c(0x18a),_0x3f5562[_0x2a8b8c(0x1b6)]['marginRight']=_0x2a8b8c(0x165),_0x2ce836[_0x2a8b8c(0x130)](_0x3f5562);var _0xcf1f4a=[];if(_0x364a9a===_0x2a8b8c(0x132))_0xcf1f4a=Object[_0x2a8b8c(0x13a)](leagueColors);else _0x364a9a===_0x2a8b8c(0x169)&&(_0xcf1f4a=[_0x2a8b8c(0x1ee),'La\x20Liga',_0x2a8b8c(0x194),_0x2a8b8c(0x16b),'Ligue\x201']);_0xcf1f4a[_0x2a8b8c(0x190)](function(_0x49620f){var _0x4e83be=_0x2a8b8c,_0x5b0c10=document[_0x4e83be(0x1c1)]('div');_0x5b0c10[_0x4e83be(0x1b9)]='legend-item';var _0x19e45a=document[_0x4e83be(0x1c1)](_0x4e83be(0x193));_0x19e45a[_0x4e83be(0x1b9)]=_0x4e83be(0x171),_0x19e45a[_0x4e83be(0x1b6)][_0x4e83be(0x12e)]=leagueColors[_0x49620f];var _0xe9e51e=document[_0x4e83be(0x1c1)]('span');_0xe9e51e[_0x4e83be(0x145)]=_0x49620f,_0x5b0c10['appendChild'](_0x19e45a),_0x5b0c10[_0x4e83be(0x130)](_0xe9e51e),_0x2ce836['appendChild'](_0x5b0c10);});}function addTeamLabel(_0x203ef2){var _0xd86da8=_0x4c3651,_0x128f04=xScale(_0x203ef2[header[_0xd86da8(0x195)](xMetric)]),_0x57226b=yScale(_0x203ef2[header['indexOf'](yMetric)]),_0x5574e2=_0xd86da8(0x1f2)+_0x203ef2[0x1]['replace'](/\s+/g,'-')['toLowerCase']();if(svg[_0xd86da8(0x1f5)]('.'+_0x5574e2)[_0xd86da8(0x196)]()>0x0)return;var _0x3fef86=svg[_0xd86da8(0x12c)](_0xd86da8(0x1e2))['attr'](_0xd86da8(0x118),_0xd86da8(0x1a6)+_0x5574e2)[_0xd86da8(0x1d8)]('x',_0x128f04+0xc)[_0xd86da8(0x1d8)]('y',_0x57226b+0x4)[_0xd86da8(0x1e2)](_0x203ef2[0x1])[_0xd86da8(0x1b6)](_0xd86da8(0x170),_0xd86da8(0x1e5))[_0xd86da8(0x1b6)](_0xd86da8(0x17e),'12px')[_0xd86da8(0x1b6)]('font-weight',_0xd86da8(0x1a8))[_0xd86da8(0x1b6)](_0xd86da8(0x13c),'#333')['attr'](_0xd86da8(0x1a7),_0x128f04)[_0xd86da8(0x1d8)]('data-original-y',_0x57226b)[_0xd86da8(0x1d8)]('data-stable-position',_0xd86da8(0x133));positionLabelToAvoidOverlap(_0x3fef86,_0x128f04,_0x57226b);}function positionLabelToAvoidOverlap(_0x50a2ec,_0x422a23,_0x430415){var _0x4ec688=_0x4c3651;if(_0x50a2ec[_0x4ec688(0x1d8)](_0x4ec688(0x168))===_0x4ec688(0x150)){var _0x1930fe=parseFloat(_0x50a2ec[_0x4ec688(0x1d8)](_0x4ec688(0x1a7))),_0x32de00=parseFloat(_0x50a2ec[_0x4ec688(0x1d8)](_0x4ec688(0x159))),_0x9231b8=parseFloat(_0x50a2ec[_0x4ec688(0x1d8)]('x')),_0x37745e=parseFloat(_0x50a2ec[_0x4ec688(0x1d8)]('y')),_0x33488e=Math[_0x4ec688(0x148)](Math[_0x4ec688(0x177)](_0x1930fe-_0x422a23,0x2)+Math[_0x4ec688(0x177)](_0x32de00-_0x430415,0x2));if(_0x33488e<0x5){_0x50a2ec[_0x4ec688(0x1d8)]('data-original-x',_0x422a23)[_0x4ec688(0x1d8)](_0x4ec688(0x159),_0x430415);return;}_0x50a2ec['attr'](_0x4ec688(0x168),_0x4ec688(0x133));}var _0x3f2b44=svg['selectAll']('.team-label')[_0x4ec688(0x1d9)](function(){var _0x5514b4=_0x4ec688;return this!==_0x50a2ec[_0x5514b4(0x128)]();}),_0x2d7ab8=_0x50a2ec[_0x4ec688(0x128)]()[_0x4ec688(0x124)](),_0x4aa55b=[{'x':_0x422a23+0xc,'y':_0x430415+0x4},{'x':_0x422a23+0xc,'y':_0x430415-0xa},{'x':_0x422a23+0xc,'y':_0x430415+0x12},{'x':_0x422a23-_0x2d7ab8[_0x4ec688(0x1d2)]-0x5,'y':_0x430415+0x4},{'x':_0x422a23-_0x2d7ab8[_0x4ec688(0x1d2)]-0x5,'y':_0x430415-0xa},{'x':_0x422a23-_0x2d7ab8['width']-0x5,'y':_0x430415+0x12},{'x':_0x422a23-_0x2d7ab8[_0x4ec688(0x1d2)]/0x2,'y':_0x430415-0xf},{'x':_0x422a23-_0x2d7ab8[_0x4ec688(0x1d2)]/0x2,'y':_0x430415+0x19}],_0x1e3881=findPositionWithoutOverlap(_0x4aa55b,_0x3f2b44,_0x2d7ab8);_0x50a2ec[_0x4ec688(0x1d8)]('x',_0x1e3881['x'])['attr']('y',_0x1e3881['y'])[_0x4ec688(0x1d8)](_0x4ec688(0x1a7),_0x422a23)[_0x4ec688(0x1d8)](_0x4ec688(0x159),_0x430415)[_0x4ec688(0x1d8)]('data-stable-position',_0x4ec688(0x150));}function findPositionWithoutOverlap(_0x1a5f37,_0x519c9a,_0x3fe75f){var _0x313666=_0x4c3651;for(var _0x2dad35=0x0;_0x2dad35<_0x1a5f37[_0x313666(0x1e8)];_0x2dad35++){var _0x57d8b1=_0x1a5f37[_0x2dad35],_0x2f9c01=![],_0x444ca5={'x1':_0x57d8b1['x'],'y1':_0x57d8b1['y']-_0x3fe75f['height'],'x2':_0x57d8b1['x']+_0x3fe75f[_0x313666(0x1d2)],'y2':_0x57d8b1['y']+0x5};if(_0x444ca5['x1']<0x0||_0x444ca5['x2']>width||_0x444ca5['y1']<0x0||_0x444ca5['y2']>height)continue;_0x519c9a[_0x313666(0x15d)](function(){var _0x461a27=_0x313666,_0x3a1ba3=d3[_0x461a27(0x1f5)](this)[_0x461a27(0x128)]()['getBBox'](),_0x134c0c=parseFloat(d3[_0x461a27(0x1f5)](this)[_0x461a27(0x1d8)]('x')),_0x14ea48=parseFloat(d3['select'](this)[_0x461a27(0x1d8)]('y')),_0x363a8d={'x1':_0x134c0c,'y1':_0x14ea48-_0x3a1ba3[_0x461a27(0x14a)],'x2':_0x134c0c+_0x3a1ba3[_0x461a27(0x1d2)],'y2':_0x14ea48+0x5};!(_0x444ca5['x2']<_0x363a8d['x1']||_0x444ca5['x1']>_0x363a8d['x2']||_0x444ca5['y2']<_0x363a8d['y1']||_0x444ca5['y1']>_0x363a8d['y2'])&&(_0x2f9c01=!![]);});if(!_0x2f9c01)return _0x57d8b1;}for(var _0x2dad35=0x0;_0x2dad35<_0x1a5f37[_0x313666(0x1e8)];_0x2dad35++){var _0x57d8b1=_0x1a5f37[_0x2dad35],_0x444ca5={'x1':_0x57d8b1['x'],'y1':_0x57d8b1['y']-_0x3fe75f['height'],'x2':_0x57d8b1['x']+_0x3fe75f[_0x313666(0x1d2)],'y2':_0x57d8b1['y']+0x5};if(_0x444ca5['x1']>=0x0&&_0x444ca5['x2']<=width&&_0x444ca5['y1']>=0x0&&_0x444ca5['y2']<=height)return _0x57d8b1;}var _0x12fcca={'x':Math[_0x313666(0x175)](Math[_0x313666(0x19d)](0x0,_0x1a5f37[0x0]['x']),width-_0x3fe75f[_0x313666(0x1d2)]),'y':Math['min'](Math[_0x313666(0x19d)](_0x3fe75f[_0x313666(0x14a)],_0x1a5f37[0x0]['y']),height)};return _0x12fcca;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0x13e338=_0x63d1,_0x159015=svg[_0x13e338(0x16c)](_0x13e338(0x14f));_0x159015[_0x13e338(0x15d)](function(){var _0xc7cbec=_0x13e338,_0x210f08=d3['select'](this),_0x25ad03=_0x210f08[_0xc7cbec(0x1e2)](),_0x27f9a9=filteredData[_0xc7cbec(0x1dd)](function(_0x36cde4){return _0x36cde4[0x1]===_0x25ad03;});if(_0x27f9a9){var _0x2ecf70=xScale(_0x27f9a9[header[_0xc7cbec(0x195)](xMetric)]),_0x107ae4=yScale(_0x27f9a9[header['indexOf'](yMetric)]);positionLabelToAvoidOverlap(_0x210f08,_0x2ecf70,_0x107ae4);}});},0xa);},document['addEventListener'](_0x4c3651(0x1ae),function(){var _0x4ec28b=_0x4c3651;const _0x14e554=document[_0x4ec28b(0x1ef)](_0x4ec28b(0x1c6));_0x14e554[_0x4ec28b(0x145)]=medianLinesVisible?_0x4ec28b(0x19c):_0x4ec28b(0x1c8);});
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'META') {
              element.setAttribute('content', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });

        function takeScreenshot() {
            const chartContainer = document.querySelector('.chart-container');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            html2canvas(chartContainer, {
                scale: 2, // Higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = renderedCanvas.width;
                finalCanvas.height = renderedCanvas.height;
                const finalCtx = finalCanvas.getContext('2d');
                finalCtx.drawImage(renderedCanvas, 0, 0);
                
                // Load the watermark
                const watermarkImg = new Image();
                watermarkImg.crossOrigin = "Anonymous";
                
                watermarkImg.onload = function() {
                    const watermarkWidth = finalCanvas.width * 0.3;
                    const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
                    
                    const x = (finalCanvas.width - watermarkWidth) / 2;
                    const y = (finalCanvas.height - watermarkHeight) / 2;
                    
                    finalCtx.save();
                    finalCtx.globalAlpha = 0.04;
                    finalCtx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
                    finalCtx.restore();
                    
                    const dataURL = finalCanvas.toDataURL('image/png', 1.0);
                    const link = document.createElement('a');
                    link.download = 'DataMB Screenshot.png';
                    link.href = dataURL;
                    link.click();
                };
                watermarkImg.src = 'https://datamb.football/logo.png';
            }).catch(function(error) {
            });
        }
    </script>
    
</body>
</html>
