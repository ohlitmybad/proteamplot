<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            background-color: var(--header-bg);
            display: flex;
            padding: 20px;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: relative;
            font-family: system-ui;
            top: 0;
            z-index: 100;
        }


        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .position-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .position-btn:hover, .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }
        
        .watermark-logo {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 100px;
            opacity: 0;
            z-index: 1;
            pointer-events: none; /* Ensure it doesn't interfere with chart interactions */
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }

        circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }


  
  .search-input-modal {
      display: none;
      position: fixed; 
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7); 
      z-index: 999; 
  }
  
  .search-input-container {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border-radius: 4px;
      z-index: 1000; 
  }
  
  #searchInput {
              width: 370px;
              padding: 12px;
              border: 3px solid #ccc;
              border-radius: 4px;
              font-size: 18.3px;
              outline: none;
              height: 50px;
              color: #000000;
              background-color: #fff;
              ;          }
  
          #autocompleteBox {
              width: 370px;
              max-height: 150px;
              overflow-y: auto;
              background-color: #fff;
          }
  
  
          #autocompleteBox ul {
              list-style: none;
              padding: 0;
              margin: 0;
          }
  
          #autocompleteBox li {
              margin: 0;
              padding: 5px;
          }
  
          #autocompleteBox {
              line-height: 2; 
              text-align: center !important;
  
          }
  
          #autocompleteBox a {
              text-decoration: none;
              font-family: Arial, sans-serif;
              text-align: center !important;
              color: #333 !important;
              cursor: pointer; 
          }
  
          #autocompleteBox li:hover {
              background-color: #f0f0f0;
          }
          #searchButton3 {
            padding: 8.5px;  /* Reduced from 10px */
  background-color: #0074d9;
  color: #fff;
  border: none;
  width: 34px;  /* Reduced from 40px */
  height: 34px;  /* Reduced from 40px */
  border-radius: 50%;
  cursor: pointer;
  font-size: 17px;  /* Reduced from 20px */
  }


  body.dark-mode .header .button10 {
      color: #aeaeae;
}
body.dark-mode .header .button10:hover {
  color: #2563eb;
background-color: #ffffff;
}

    body.dark-mode header a {
      color: #aeaeae;
}

body.dark-mode .header .logo img {
  opacity: 0.88;
}


body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

.header .logo {
  display: flex;
  align-items: center;
  margin-right: auto; /* Push logo to the left */
}

.header .logo img {
  height: 34px;
  width: auto;
  opacity: 0.84;
}
.header .logo-text {
  margin-left: 10px;
  font-size: 23px;
  font-weight: 600;
  transform: translateY(-1.1px); /* Move logo text slightly higher */
}

.header .navigation {
  display: flex;
  align-items: center;
  gap: 25px; /* Reduced gap between buttons */
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px); /* Center the navigation and move it higher */
}



.header .button10 {
  padding: 0.5rem 1rem;
  text-decoration: none;
  color: #333;
  line-height: 1.6;
  border-radius: 4px;
  transition: background-color 0.2s;
  font-size: 1.1rem;  /* Added larger font size */
}


.header .button10:hover {
  background-color: #f0f0f0;
  color: #2563eb;

}



/* Group search and language buttons */
.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto; /* Push buttons to the right */
  transform: translateY(-1.25px); /* Move search and language buttons higher */
}

header a {
      color: black;
      text-decoration: none;
    }

    .language-switcher-container {
  position: relative;
  display: none;
}

.language-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  color: #444444;
  display: flex;
  align-items: center;
  font-size: 17px;
}

.language-button iconify-icon {
  font-size: 24px;
  opacity: 0.7;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 10px;
  width: 200px;
  z-index: 1000;
}

.language-option {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  color: #444444;
  text-decoration: none;
}



.language-option iconify-icon {
  margin-right: 10px;
  font-size: 20px;
}

.language-dropdown.show {
  display: block;
}

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
@media screen and (max-width: 550px) { .header .navigation { display: none; } }

        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }

        .dark-mode .position-btn {
            background-color: #1a1a1a;
            color: var(--text-color);
            border: 1px solid #333;
        }

        .dark-mode .position-btn:hover, 
        .dark-mode .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 



        .dark-mode #searchButton3 {
            background-color: #0074d9;
            color: #fff;
        }


        .dark-mode .header .button10 {
            color: #aaa;
        }

        .dark-mode .header .button10:hover {
            color: #2563eb;
            background-color: #1a1a1a;
        }

        .dark-mode header a {
            color: #aaa;
        }

        .dark-mode .header .logo img {
            opacity: 0.9;
            filter: brightness(0.9);
        }

        .dark-mode .language-button {
            background-color: #0e0f0f;
            color: #aaa;
        }

        .dark-mode .language-button:hover {
            background-color: #1a1a1a;
        }

        .dark-mode .language-dropdown {
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .language-option {
            color: #e0e0e0;
        }

        .dark-mode .language-option:hover {
            background-color: #252525;
        }

        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }

        .dark-mode circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }

        .dark-mode .watermark-logo {
            opacity: 0 !important;
            filter: brightness(0.7) invert(0.8);
        }
        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    
    .control-group {
        width: 100%;
        margin-bottom: 10px;
    }
    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n-placeholder="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        // ... existing scripts ...
        
        // Function to toggle dark mode
        function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            // Store the user's preference in local storage
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
            // Update chart to apply dark mode styles to SVG elements
            updateChart();
        }
        
        // Check if user has a stored preference for dark mode
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
            // Add transition for smoother dark mode toggle
            setTimeout(() => {
                document.body.style.transition = "background-color 0.3s, color 0.3s";
                document.querySelectorAll('.chart-wrapper, .header, .btn, input, select, .tooltip, .dark-mode-toggle')
                    .forEach(el => {
                        el.style.transition = "background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s";
                    });
            }, 100);
        });
        
        // We'll initialize the custom selectors after the data is loaded
        let initializeCustomSelectors = function() {
            // League selector functionality
            const leagueTrigger = document.getElementById('league-select-trigger');
            const leagueOptions = document.getElementById('league-select-options');
            const leagueSelect = document.getElementById('select-league');
            
            setupCustomSelect(leagueTrigger, leagueOptions, leagueSelect);
            
            // X metric selector functionality
            const xTrigger = document.getElementById('x-metric-trigger');
            const xOptions = document.getElementById('x-metric-options');
            const xSelect = document.getElementById('select-x');
            
            // Populate X metric options
            populateMetricOptions(xOptions, header.slice(3), function(option, value) {
                if (xTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[3]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    xTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    xTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(xTrigger, xOptions, xSelect);
            
            // Y metric selector functionality
            const yTrigger = document.getElementById('y-metric-trigger');
            const yOptions = document.getElementById('y-metric-options');
            const ySelect = document.getElementById('select-y');
            
            // Populate Y metric options
            populateMetricOptions(yOptions, header.slice(3), function(option, value) {
                if (yTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[4]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    yTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    yTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(yTrigger, yOptions, ySelect);
        };
        
        // Function to populate metric options
        function populateMetricOptions(optionsContainer, metrics, callback) {
            // Clear existing options
            optionsContainer.innerHTML = '';
            
            // Create a custom option for each metric
            metrics.forEach(function(metric) {
                const customOption = document.createElement('div');
                customOption.className = 'metric-select-option';
                customOption.setAttribute('data-value', metric);
                
                const span = document.createElement('span');
                span.textContent = metric;
                
                // Add data-i18n attribute for translation
                const metricKey = metric.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                span.setAttribute('data-i18n', 'metrics.' + metricKey);
                
                customOption.appendChild(span);
                
                // Call the callback to potentially add selected class
                if (callback) callback(customOption, metric);
                
                optionsContainer.appendChild(customOption);
            });
        }
        
        // Function to set up a custom select
        function setupCustomSelect(trigger, options, selectElement) {
            // Toggle dropdown when clicking the trigger
            trigger.addEventListener('click', function() {
                // Close all other open dropdowns first
                document.querySelectorAll('.custom-select-trigger.open, .metric-select-trigger.open').forEach(function(openTrigger) {
                    if (openTrigger !== trigger) {
                        openTrigger.classList.remove('open');
                        const openOptions = openTrigger.nextElementSibling;
                        if (openOptions) openOptions.style.display = 'none';
                    }
                });
                
                // Toggle this dropdown
                trigger.classList.toggle('open');
                const isOpen = trigger.classList.contains('open');
                options.style.display = isOpen ? 'block' : 'none';
            });
            
            // Handle option selection
            const optionElements = options.querySelectorAll('.custom-select-option, .metric-select-option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    // Update selected option
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Update trigger content
                    const text = this.querySelector('span').textContent;
                    const dataI18n = this.querySelector('span').getAttribute('data-i18n');
                    const icon = this.querySelector('iconify-icon');
                    
                    trigger.innerHTML = '';
                    
                    if (icon) {
                        const clonedIcon = icon.cloneNode(true);
                        clonedIcon.style.marginRight = '8px';
                        trigger.appendChild(clonedIcon);
                    }
                    
                    const span = document.createElement('span');
                    span.textContent = text;
                    if (dataI18n) {
                        span.setAttribute('data-i18n', dataI18n);
                    }
                    trigger.appendChild(span);
                    
                    // Update hidden select and trigger change event
                    const value = this.getAttribute('data-value');
                    selectElement.value = value || text;
                    
                    // Trigger the change event on the hidden select
                    const event = new Event('change');
                    selectElement.dispatchEvent(event);
                    
                    // Close dropdown
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                });
            });
            
            // Add keyboard navigation
            let searchTerm = '';
            let searchTimeout;
            
            // Add keydown event listener to the document
            document.addEventListener('keydown', function(e) {
                // Only process keyboard input when dropdown is open
                if (!trigger.classList.contains('open')) return;
                
                // Handle arrow keys for navigation
                if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
                    e.preventDefault();
                    
                    const visibleOptions = Array.from(optionElements);
                    const currentIndex = visibleOptions.findIndex(opt => opt.classList.contains('selected'));
                    let newIndex;
                    
                    if (e.key === 'ArrowDown') {
                        newIndex = currentIndex < visibleOptions.length - 1 ? currentIndex + 1 : 0;
                    } else {
                        newIndex = currentIndex > 0 ? currentIndex - 1 : visibleOptions.length - 1;
                    }
                    
                    // Update selection
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    visibleOptions[newIndex].classList.add('selected');
                    
                    // Ensure the selected option is visible in the dropdown
                    visibleOptions[newIndex].scrollIntoView({ block: 'nearest' });
                    
                    return;
                }
                
                // Handle Enter key to select the currently highlighted option
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const selectedOption = options.querySelector('.selected');
                    if (selectedOption) {
                        selectedOption.click();
                    }
                    return;
                }
                
                // Handle Escape key to close the dropdown
                if (e.key === 'Escape') {
                    e.preventDefault();
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                    return;
                }
                
                // Handle typing to search
                if (e.key.length === 1 && e.key.match(/[a-zA-Z0-9%]/)) {
                    // Clear the previous timeout
                    clearTimeout(searchTimeout);
                    
                    // Add the key to the search term
                    searchTerm += e.key.toLowerCase();
                    
                    // Find the first option that starts with the search term
                    const matchingOption = Array.from(optionElements).find(option => {
                        const optionText = option.querySelector('span').textContent.toLowerCase();
                        return optionText.startsWith(searchTerm);
                    });
                    
                    // If a matching option is found, select it
                    if (matchingOption) {
                        optionElements.forEach(opt => opt.classList.remove('selected'));
                        matchingOption.classList.add('selected');
                        matchingOption.scrollIntoView({ block: 'nearest' });
                    }
                    
                    // Clear the search term after a delay
                    searchTimeout = setTimeout(() => {
                        searchTerm = '';
                    }, 1000);
                }
            });
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            const triggers = document.querySelectorAll('.custom-select-trigger, .metric-select-trigger');
            const optionsContainers = document.querySelectorAll('.custom-select-options, .metric-select-options');
            
            let clickedInsideDropdown = false;
            
            triggers.forEach(function(trigger, index) {
                const options = optionsContainers[index];
                
                if (trigger && options && (trigger.contains(e.target) || options.contains(e.target))) {
                    clickedInsideDropdown = true;
                }
            });
            
            if (!clickedInsideDropdown) {
                triggers.forEach(function(trigger, index) {
                    if (trigger && optionsContainers[index]) {
                        trigger.classList.remove('open');
                        optionsContainers[index].style.display = 'none';
                    }
                });
            }
        });
        
        // Function to capture and download the chart area
        function takeScreenshot() {
            // Get the chart container element (includes SVG and watermark)
            const chartContainer = document.querySelector('.chart-container');
            
            // Check if we're in dark mode
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            // Use html2canvas to capture the entire chart container with watermark
            html2canvas(chartContainer, {
                scale: 2, // 2x resolution for higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                // Convert canvas to image and trigger download
                const dataURL = renderedCanvas.toDataURL('image/png', 1.0); // Use maximum quality
                const link = document.createElement('a');
                link.download = 'DataMB Screenshot.png';
                link.href = dataURL;
                link.click();
            }).catch(function(error) {
                console.error('Screenshot failed:', error);
                
                // Fallback method if html2canvas fails
                fallbackScreenshot(isDarkMode);
            });
        }
        
        // Fallback screenshot method that captures just the SVG but with higher quality
        function fallbackScreenshot(isDarkMode) {
            // Get the SVG element
            const svg = document.getElementById('scatter-plot');
            const watermark = document.querySelector('.watermark-logo');
            
            // Get dimensions
            const svgRect = svg.getBoundingClientRect();
            
            // Create a canvas with 2x resolution for higher quality
            const canvas = document.createElement('canvas');
            const scale = 2; // Increase resolution by 2x
            canvas.width = svgRect.width * scale;
            canvas.height = svgRect.height * scale;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(scale, scale); // Scale the context to match our increased canvas size
            
            // Set high quality rendering
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            
            // Fill canvas with appropriate background color
            ctx.fillStyle = isDarkMode ? '#2c2c2c' : '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // First draw the watermark
            const watermarkImg = new Image();
            watermarkImg.crossOrigin = "Anonymous";
            watermarkImg.src = watermark.src;
            
            // Create an image from the SVG
            const svgImg = new Image();
            
            // Get SVG data with proper XML serialization
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            // First load the watermark
            watermarkImg.onload = function() {
                // Calculate watermark position (centered)
                const wmX = (svgRect.width - watermark.width) / 2;
                const wmY = (svgRect.height - watermark.height) / 2;
                
                // Draw watermark with proper opacity
                ctx.globalAlpha = 0.04; // Match the CSS opacity
                ctx.drawImage(watermarkImg, wmX, wmY, watermark.width, watermark.height);
                ctx.globalAlpha = 1.0;
                
                // Then load and draw the SVG
                svgImg.onload = function() {
                    // Draw the SVG on top
                    ctx.drawImage(svgImg, 0, 0, svgRect.width, svgRect.height);
                    
                    // Convert canvas to image and trigger download
                    const dataURL = canvas.toDataURL('image/png', 1.0); // Use maximum quality
                    const link = document.createElement('a');
                    link.download = 'team-performance-chart.png';
                    link.href = dataURL;
                    link.click();
                    
                    // Clean up
                    URL.revokeObjectURL(url);
                };
                
                svgImg.src = url;
            };
        }
        
        // Add event listeners for position buttons
        document.querySelectorAll('.position-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // Add position filtering logic here
            });
        });
        
   
    </script>
    
    <script>

var _0x3571df=_0x246a;(function(_0x4510d8,_0x3ad3dc){var _0xf4692b=_0x246a,_0x414b46=_0x4510d8();while(!![]){try{var _0x1adc40=-parseInt(_0xf4692b(0xda))/0x1*(-parseInt(_0xf4692b(0x132))/0x2)+-parseInt(_0xf4692b(0x133))/0x3+parseInt(_0xf4692b(0xd7))/0x4+parseInt(_0xf4692b(0xef))/0x5+parseInt(_0xf4692b(0x184))/0x6+parseInt(_0xf4692b(0x138))/0x7*(parseInt(_0xf4692b(0x18d))/0x8)+-parseInt(_0xf4692b(0xd8))/0x9;if(_0x1adc40===_0x3ad3dc)break;else _0x414b46['push'](_0x414b46['shift']());}catch(_0x3b4424){_0x414b46['push'](_0x414b46['shift']());}}}(_0x1ccc,0x28555));function getTranslation(_0x32141d,_0x1d38ba){var _0x3ffdc4=_0x246a;const _0xae2814=_0x32141d[_0x3ffdc4(0x10f)]('.');try{let _0x368585=window[_0x3ffdc4(0x186)]||{};for(const _0x17a79b of _0xae2814){if(_0x368585&&_0x368585[_0x17a79b])_0x368585=_0x368585[_0x17a79b];else return _0x1d38ba;}return _0x368585;}catch(_0x19f385){return _0x1d38ba;}}const xhr=new XMLHttpRequest();xhr[_0x3571df(0x150)](_0x3571df(0x166),_0x3571df(0x17a),![]),xhr['send'](null);let csvData=xhr[_0x3571df(0x164)],extraHeaderRow='ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a';csvData=extraHeaderRow+csvData;var rows=csvData[_0x3571df(0x141)]()[_0x3571df(0x10f)]('\x0a'),header=rows[0x0][_0x3571df(0x10f)](','),data=rows['slice'](0x1)['map'](function(_0x3e138d){var _0x136245=_0x3571df;return _0x3e138d[_0x136245(0x10f)](',')[_0x136245(0x11b)](function(_0x470297,_0x36a786){return _0x36a786>=0x3?parseFloat(_0x470297):_0x470297;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin['left']-margin[_0x3571df(0x119)],height=0x302-margin[_0x3571df(0x17b)]-margin['bottom'],leagueColors={'Premier\x20League':_0x3571df(0x13b),'La\x20Liga':_0x3571df(0xe1),'Bundesliga':'rgba(255,\x20255,\x200,\x200.7)','Serie\x20A':'rgba(0,\x20128,\x200,\x200.7)','Ligue\x201':_0x3571df(0x14e),'Eredivisie':_0x3571df(0x12e),'Primeira\x20Liga':_0x3571df(0x14a)};function getLeagueColor(_0x34dc22){var _0x11ec72=_0x3571df;return leagueColors[_0x34dc22]||_0x11ec72(0x13b);}function updateChartDimensions(){var _0x37f1e1=_0x3571df,_0x1a198f=document[_0x37f1e1(0xe7)](_0x37f1e1(0x157))[_0x37f1e1(0x163)],_0x13f97b=window[_0x37f1e1(0x101)]*0.7,_0x18f48d=0x1e,_0x38c91f=Math[_0x37f1e1(0x158)](0x43a,_0x1a198f-_0x18f48d*0x2),_0x1f4ee9=window[_0x37f1e1(0x16c)]/window[_0x37f1e1(0x101)]<0x1;if(_0x1f4ee9){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x2f7f40=1.4,_0xe4e12e=Math['min'](_0x13f97b,_0x38c91f*_0x2f7f40);_0xe4e12e=Math[_0x37f1e1(0x16d)](_0xe4e12e,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x189ddc=0.7,_0xe4e12e=_0x38c91f*_0x189ddc;}width=_0x38c91f-margin[_0x37f1e1(0x140)]-margin[_0x37f1e1(0x119)],height=_0xe4e12e-margin[_0x37f1e1(0x17b)]-margin[_0x37f1e1(0x16a)],d3['select'](_0x37f1e1(0x122))[_0x37f1e1(0x154)](_0x37f1e1(0x172),_0x38c91f)[_0x37f1e1(0x154)](_0x37f1e1(0x14f),_0xe4e12e),document[_0x37f1e1(0xe7)](_0x37f1e1(0x12f))[_0x37f1e1(0xf7)][_0x37f1e1(0x14f)]=_0xe4e12e+'px';}window[_0x3571df(0x10b)](_0x3571df(0x104),function(){var _0x2cbc79=_0x3571df;clearTimeout(window[_0x2cbc79(0x16e)]),window[_0x2cbc79(0x16e)]=setTimeout(function(){updateChartDimensions(),updateChart();},0xfa);}),updateChartDimensions();function debounce(_0x188c92,_0x260df9){let _0x5cd123;return function(){const _0x3ff3f1=this,_0x233599=arguments;clearTimeout(_0x5cd123),_0x5cd123=setTimeout(function(){var _0x583f26=_0x246a;_0x188c92[_0x583f26(0x187)](_0x3ff3f1,_0x233599);},_0x260df9);};}var prevWindowWidth=window[_0x3571df(0x16c)],prevWindowHeight=window[_0x3571df(0x101)];window[_0x3571df(0x10b)]('resize',debounce(function(){var _0x295e36=_0x3571df,_0x414b0e=prevWindowWidth/prevWindowHeight<0x1,_0x526fa2=window[_0x295e36(0x16c)]/window[_0x295e36(0x101)]<0x1;prevWindowWidth=window[_0x295e36(0x16c)],prevWindowHeight=window['innerHeight'],updateChart();},0xfa));function _0x246a(_0x2f8eb4,_0x3dc654){var _0x1ccc70=_0x1ccc();return _0x246a=function(_0x246ac4,_0x4d9b2c){_0x246ac4=_0x246ac4-0xcc;var _0x1b086c=_0x1ccc70[_0x246ac4];return _0x1b086c;},_0x246a(_0x2f8eb4,_0x3dc654);}var medianLinesVisible=![],selectX=d3[_0x3571df(0x152)](_0x3571df(0xf5)),selectY=d3['select']('#select-y'),names=data[_0x3571df(0x11b)](function(_0x5792db){return _0x5792db[0x1];});header[_0x3571df(0x174)](0x3)[_0x3571df(0x156)](function(_0x38a083){var _0x2327d9=_0x3571df;selectX[_0x2327d9(0x192)](_0x2327d9(0xdf))['text'](_0x38a083)[_0x2327d9(0x154)](_0x2327d9(0xfd),_0x38a083),selectY[_0x2327d9(0x192)](_0x2327d9(0xdf))[_0x2327d9(0x103)](_0x38a083)[_0x2327d9(0x154)](_0x2327d9(0xfd),_0x38a083);}),selectX[_0x3571df(0x142)](_0x3571df(0xfd),header[0x3]),selectY[_0x3571df(0x142)](_0x3571df(0xfd),header[0x4]);var svg=d3[_0x3571df(0x152)]('#scatter-plot')['attr']('width',width+margin[_0x3571df(0x140)]+margin[_0x3571df(0x119)])[_0x3571df(0x154)](_0x3571df(0x14f),height+margin[_0x3571df(0x17b)]+margin[_0x3571df(0x16a)])[_0x3571df(0x192)]('g')[_0x3571df(0x154)](_0x3571df(0x196),_0x3571df(0x181)+margin['left']+','+margin[_0x3571df(0x17b)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3['scaleLinear']()[_0x3571df(0x162)]([0x0,width]),yScale=d3[_0x3571df(0x120)]()[_0x3571df(0x162)]([height,0x0]),xAxis=d3[_0x3571df(0x148)](xScale)[_0x3571df(0xfb)](0x0),yAxis=d3['axisLeft'](yScale)[_0x3571df(0xfb)](0x0),gXAxis=svg['append']('g')[_0x3571df(0x154)]('class',_0x3571df(0x175))[_0x3571df(0x154)](_0x3571df(0x196),_0x3571df(0x10e)+height+')'),gYAxis=svg[_0x3571df(0x192)]('g')[_0x3571df(0x154)](_0x3571df(0x167),'y-axis'),xLabel=svg['append'](_0x3571df(0x103))[_0x3571df(0x154)](_0x3571df(0x167),'x-label')['attr'](_0x3571df(0xd4),_0x3571df(0x127))['attr']('x',width)[_0x3571df(0x154)]('y',height+0x23)['style'](_0x3571df(0xe2),_0x3571df(0xd3))[_0x3571df(0xf7)](_0x3571df(0x15c),_0x3571df(0x100)),yLabel=svg[_0x3571df(0x192)](_0x3571df(0x103))[_0x3571df(0x154)]('class',_0x3571df(0x149))['attr'](_0x3571df(0xd4),'end')[_0x3571df(0x154)](_0x3571df(0x196),_0x3571df(0x134))[_0x3571df(0x154)]('y',-0x35)[_0x3571df(0x154)]('x',0x0)[_0x3571df(0xf7)](_0x3571df(0xe2),_0x3571df(0xd3))['style']('font-size',_0x3571df(0x100)),tooltip=d3[_0x3571df(0x152)](_0x3571df(0xfc))['append'](_0x3571df(0xee))[_0x3571df(0x154)](_0x3571df(0x167),'tooltip');function isMobileDevice(){var _0x42bc79=_0x3571df;return window[_0x42bc79(0x16c)]<=0x300;}function positionTooltip(_0x4594e4,_0x4d26de){var _0x2d7d88=_0x3571df;const _0x4b8d94=_0x4d26de[_0x2d7d88(0x109)]();if(!_0x4b8d94)return{'left':0x0,'top':0x0};const _0x5c5ecd=_0x4b8d94[_0x2d7d88(0x180)](),_0x377b01=window['innerWidth'],_0x241a5c=window[_0x2d7d88(0x101)];let _0x361baf=_0x4594e4[_0x2d7d88(0xe5)]+0xa,_0x399cea=_0x4594e4[_0x2d7d88(0x18e)]-0x1c;return _0x361baf+_0x5c5ecd['width']>_0x377b01-0xa&&(_0x361baf=_0x4594e4[_0x2d7d88(0xe5)]-_0x5c5ecd[_0x2d7d88(0x172)]-0xa),_0x399cea+_0x5c5ecd[_0x2d7d88(0x14f)]>_0x241a5c-0xa&&(_0x399cea=_0x4594e4[_0x2d7d88(0x18e)]-_0x5c5ecd['height']-0xa),_0x361baf=Math[_0x2d7d88(0x16d)](0xa,_0x361baf),_0x399cea=Math[_0x2d7d88(0x16d)](0xa,_0x399cea),{'left':_0x361baf,'top':_0x399cea};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x16ed1a=_0x3571df;updateChartDimensions(),d3['select'](_0x16ed1a(0x122))['attr'](_0x16ed1a(0x172),width+margin[_0x16ed1a(0x140)]+margin[_0x16ed1a(0x119)])[_0x16ed1a(0x154)](_0x16ed1a(0x14f),height+margin[_0x16ed1a(0x17b)]+margin[_0x16ed1a(0x16a)]),gXAxis[_0x16ed1a(0x154)](_0x16ed1a(0x196),'translate(0,'+height+')'),xLabel[_0x16ed1a(0x154)]('x',width)[_0x16ed1a(0x154)]('y',height+0x23),yLabel[_0x16ed1a(0x154)]('x',0x0);const _0x2508f3=document['body']['classList'][_0x16ed1a(0x121)]('dark-mode');var _0x93ab6=document[_0x16ed1a(0xe4)](_0x16ed1a(0x179))[_0x16ed1a(0xfd)];if(_0x93ab6==='all')filteredData=data;else _0x93ab6==='Top\x205\x20Leagues'?filteredData=data['filter'](function(_0xf36345){var _0x83e341=_0x16ed1a;return _0xf36345[0x2]===_0x83e341(0x124)||_0xf36345[0x2]==='La\x20Liga'||_0xf36345[0x2]==='Bundesliga'||_0xf36345[0x2]===_0x83e341(0x12d)||_0xf36345[0x2]==='Ligue\x201';}):filteredData=data['filter'](function(_0xeb130e){return _0xeb130e[0x2]===_0x93ab6;});filteredNames=filteredData[_0x16ed1a(0x11b)](function(_0x504331){return _0x504331[0x1];}),xMetric=selectX[_0x16ed1a(0x142)]('value'),yMetric=selectY['property'](_0x16ed1a(0xfd)),xScale['range']([0x0,width])['domain']((function(){var _0x1b0898=_0x16ed1a;const _0x24c0f0=d3['min'](filteredData,_0xc24830=>_0xc24830[header[_0x1b0898(0x106)](xMetric)]),_0x100412=d3['max'](filteredData,_0x3303d9=>_0x3303d9[header[_0x1b0898(0x106)](xMetric)]),_0x2e366f=_0x100412-_0x24c0f0,_0x3aa450=_0x2e366f*0.1;return[_0x24c0f0-_0x3aa450,_0x100412+_0x3aa450];}())),yScale[_0x16ed1a(0x162)]([height,0x0])[_0x16ed1a(0x183)]((function(){var _0x422593=_0x16ed1a;const _0x134040=d3[_0x422593(0x158)](filteredData,_0x482e78=>_0x482e78[header[_0x422593(0x106)](yMetric)]),_0x2dd53a=d3['max'](filteredData,_0x29bf5e=>_0x29bf5e[header[_0x422593(0x106)](yMetric)]),_0x5d370f=_0x2dd53a-_0x134040,_0x578d92=_0x5d370f*0.1;return[_0x134040-_0x578d92,_0x2dd53a+_0x578d92];}())),gXAxis[_0x16ed1a(0x128)](d3[_0x16ed1a(0x148)](xScale)[_0x16ed1a(0xfb)](0x0)),gYAxis['call'](d3[_0x16ed1a(0xf0)](yScale)[_0x16ed1a(0xfb)](0x0));const _0x59aed9='metrics.'+xMetric[_0x16ed1a(0x112)]()[_0x16ed1a(0x13c)](/ /g,'-')[_0x16ed1a(0x13c)](/%/g,_0x16ed1a(0x190)),_0x4fc200=_0x16ed1a(0x107)+yMetric['toLowerCase']()[_0x16ed1a(0x13c)](/ /g,'-')['replace'](/%/g,'pct');xLabel[_0x16ed1a(0x154)](_0x16ed1a(0x168),_0x59aed9),yLabel['attr'](_0x16ed1a(0x168),_0x4fc200);if(window[_0x16ed1a(0x186)]&&window[_0x16ed1a(0x186)][_0x16ed1a(0x165)]){const _0x10ded4=xMetric['toLowerCase']()[_0x16ed1a(0x13c)](/ /g,'-')['replace'](/%/g,_0x16ed1a(0x190)),_0xc6a065=yMetric[_0x16ed1a(0x112)]()[_0x16ed1a(0x13c)](/ /g,'-')[_0x16ed1a(0x13c)](/%/g,'pct'),_0x5762bf=window[_0x16ed1a(0x186)]['metrics'][_0x10ded4],_0x1de4e6=window[_0x16ed1a(0x186)]['metrics'][_0xc6a065];xLabel['text'](_0x5762bf||xMetric),yLabel[_0x16ed1a(0x103)](_0x1de4e6||yMetric);}else xLabel[_0x16ed1a(0x103)](xMetric),yLabel[_0x16ed1a(0x103)](yMetric);svg[_0x16ed1a(0x153)]('circle')['remove'](),svg['selectAll'](_0x16ed1a(0x188))[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0xfa))['remove'](),svg[_0x16ed1a(0x153)](_0x16ed1a(0xd0))[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0x13e))[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0xe3))['remove'](),svg[_0x16ed1a(0x153)]('.performance-label')[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0xeb))[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0x189))[_0x16ed1a(0x114)](),svg[_0x16ed1a(0x153)](_0x16ed1a(0x102))['remove'](),svg[_0x16ed1a(0x153)](_0x16ed1a(0xe9))[_0x16ed1a(0x114)]();if(xMetric===_0x16ed1a(0xfe)&&yMetric===_0x16ed1a(0x16b)||xMetric===_0x16ed1a(0x16b)&&yMetric===_0x16ed1a(0xfe)){var _0x24edad=null,_0xcea359=d3[_0x16ed1a(0x158)](filteredData,function(_0xbb5bfb){var _0x4cdd43=_0x16ed1a;return _0xbb5bfb[header[_0x4cdd43(0x106)](xMetric)];}),_0x493f50=d3[_0x16ed1a(0x16d)](filteredData,function(_0x198f30){return _0x198f30[header['indexOf'](xMetric)];}),_0x1c592f=d3[_0x16ed1a(0x158)](filteredData,function(_0x5303d4){return _0x5303d4[header['indexOf'](yMetric)];}),_0x430051=d3['max'](filteredData,function(_0x8ea03){var _0x518658=_0x16ed1a;return _0x8ea03[header[_0x518658(0x106)](yMetric)];}),_0x41ea79=Math['min'](_0x493f50,_0x430051),_0x3ef4f0=Math[_0x16ed1a(0x16d)](_0xcea359,_0x1c592f);svg['append'](_0x16ed1a(0xcc))[_0x16ed1a(0x154)](_0x16ed1a(0x167),_0x16ed1a(0xd9))[_0x16ed1a(0x154)]('x1',xScale(_0x3ef4f0))['attr']('y1',yScale(_0x3ef4f0))[_0x16ed1a(0x154)]('x2',xScale(_0x41ea79))[_0x16ed1a(0x154)]('y2',yScale(_0x41ea79))[_0x16ed1a(0xf7)](_0x16ed1a(0x14b),_0x16ed1a(0x12a))[_0x16ed1a(0xf7)](_0x16ed1a(0x11f),'2')[_0x16ed1a(0xf7)](_0x16ed1a(0x178),_0x16ed1a(0x173)),svg[_0x16ed1a(0x192)]('line')['attr'](_0x16ed1a(0x167),_0x16ed1a(0x15f))[_0x16ed1a(0x154)]('x1',xScale(_0x3ef4f0))[_0x16ed1a(0x154)]('y1',yScale(_0x3ef4f0))[_0x16ed1a(0x154)]('x2',xScale(_0x41ea79))['attr']('y2',yScale(_0x41ea79))[_0x16ed1a(0xf7)](_0x16ed1a(0x14b),_0x16ed1a(0x197))[_0x16ed1a(0xf7)]('stroke-width','15')[_0x16ed1a(0xf7)](_0x16ed1a(0x13a),'help')['on'](_0x16ed1a(0x137),function(){var _0x57e374=_0x16ed1a;_0x24edad&&clearTimeout(_0x24edad);var _0x1f2d32=d3[_0x57e374(0x14c)][_0x57e374(0xe5)],_0x2bc266=d3['event'][_0x57e374(0x18e)];_0x24edad=setTimeout(function(){var _0x587a6f=_0x57e374;tooltip[_0x587a6f(0x14d)]()[_0x587a6f(0x15d)](0xc8)[_0x587a6f(0xf7)](_0x587a6f(0x113),0.9);var _0x2d6354=_0x587a6f(0xdc)+getTranslation(_0x587a6f(0xdb),_0x587a6f(0xf6))+_0x587a6f(0x131);xMetric==='xG\x20per\x2090'&&yMetric===_0x587a6f(0x16b)?_0x2d6354+=_0x587a6f(0x17e)+getTranslation('tooltip.xg-line-above','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.')+_0x587a6f(0xe8)+_0x587a6f(0x17e)+getTranslation('tooltip.xg-line-below',_0x587a6f(0x145))+_0x587a6f(0x111):_0x2d6354+=_0x587a6f(0x17e)+getTranslation(_0x587a6f(0xec),_0x587a6f(0x15b))+_0x587a6f(0xe8)+_0x587a6f(0x17e)+getTranslation(_0x587a6f(0xcf),_0x587a6f(0x143))+_0x587a6f(0x111),tooltip[_0x587a6f(0x15a)](_0x2d6354)[_0x587a6f(0xf7)](_0x587a6f(0x140),_0x1f2d32+0xa+'px')[_0x587a6f(0xf7)](_0x587a6f(0x17b),_0x2bc266-0x1c+'px');},0x258);})['on'](_0x16ed1a(0x171),function(){var _0x33d089=_0x16ed1a;_0x24edad&&(clearTimeout(_0x24edad),_0x24edad=null),tooltip[_0x33d089(0x14d)]()[_0x33d089(0x15d)](0x1f4)[_0x33d089(0xf7)]('opacity',0x0);});}if(medianLinesVisible){var _0x4d8590=d3[_0x16ed1a(0x105)](filteredData,function(_0x12fc6b){var _0x3133e2=_0x16ed1a;return _0x12fc6b[header[_0x3133e2(0x106)](xMetric)];}),_0x2ce9c0=d3['median'](filteredData,function(_0x53708e){return _0x53708e[header['indexOf'](yMetric)];});svg['append'](_0x16ed1a(0xcc))['attr']('class',_0x16ed1a(0x12b))[_0x16ed1a(0x154)]('x1',xScale(_0x4d8590))[_0x16ed1a(0x154)]('y1',0x0)[_0x16ed1a(0x154)]('x2',xScale(_0x4d8590))[_0x16ed1a(0x154)]('y2',height)[_0x16ed1a(0xf7)]('stroke',_0x16ed1a(0x161))[_0x16ed1a(0xf7)](_0x16ed1a(0x178),'4'),svg[_0x16ed1a(0x192)](_0x16ed1a(0xcc))[_0x16ed1a(0x154)](_0x16ed1a(0x167),_0x16ed1a(0x12b))[_0x16ed1a(0x154)]('x1',0x0)[_0x16ed1a(0x154)]('y1',yScale(_0x2ce9c0))[_0x16ed1a(0x154)]('x2',width)['attr']('y2',yScale(_0x2ce9c0))[_0x16ed1a(0xf7)](_0x16ed1a(0x14b),_0x16ed1a(0x161))['style']('stroke-dasharray','4');}circles=svg['selectAll'](_0x16ed1a(0x147))[_0x16ed1a(0xcd)](filteredData)[_0x16ed1a(0xd2)]()[_0x16ed1a(0x192)](_0x16ed1a(0x147))['attr']('cx',function(_0x638c22){var _0x1477c9=_0x16ed1a;return xScale(_0x638c22[header[_0x1477c9(0x106)](xMetric)]);})[_0x16ed1a(0x154)]('cy',function(_0x581a7d){var _0x32b211=_0x16ed1a;return yScale(_0x581a7d[header[_0x32b211(0x106)](yMetric)]);})[_0x16ed1a(0x154)]('r',0x8)[_0x16ed1a(0xf7)](_0x16ed1a(0x17d),function(_0x5bd65a){if(clickedCircles['includes'](_0x5bd65a[0x1]))return getLeagueColor(_0x5bd65a[0x2]);return'rgba(70,\x20130,\x20180,\x200.7)';})[_0x16ed1a(0xf7)]('stroke',function(_0x4d8f72){var _0x2a1fd8=_0x16ed1a;return clickedCircles[_0x2a1fd8(0x135)](_0x4d8f72[0x1])?_0x2a1fd8(0xd1):_0x2a1fd8(0x18c);})[_0x16ed1a(0xf7)](_0x16ed1a(0x11f),function(_0x1aa9fa){return clickedCircles['includes'](_0x1aa9fa[0x1])?0x2:0x0;})['style'](_0x16ed1a(0x13a),'pointer')['on']('mouseover',function(_0x430779){var _0x14ce59=_0x16ed1a;d3['select'](this)[_0x14ce59(0x14d)]()[_0x14ce59(0x15d)](0xc8)[_0x14ce59(0x154)]('r',0xa)['style'](_0x14ce59(0x17d),getLeagueColor(_0x430779[0x2])),tooltip[_0x14ce59(0x14d)]()[_0x14ce59(0x15d)](0xc8)[_0x14ce59(0xf7)](_0x14ce59(0x113),0.9);const _0x1bef02='metrics.'+xMetric[_0x14ce59(0x112)]()[_0x14ce59(0x13c)](/ /g,'-')['replace'](/%/g,_0x14ce59(0x190)),_0x3e4293=_0x14ce59(0x107)+yMetric[_0x14ce59(0x112)]()['replace'](/ /g,'-')[_0x14ce59(0x13c)](/%/g,_0x14ce59(0x190)),_0x2be73c=getTranslation(_0x1bef02,xMetric),_0x3bbe62=getTranslation(_0x3e4293,yMetric);tooltip[_0x14ce59(0x15a)](_0x14ce59(0xdc)+_0x430779[0x1]+_0x14ce59(0x131)+_0x2be73c+':\x20'+_0x430779[header[_0x14ce59(0x106)](xMetric)][_0x14ce59(0x151)](0x2)+_0x14ce59(0x16f)+_0x3bbe62+':\x20'+_0x430779[header[_0x14ce59(0x106)](yMetric)][_0x14ce59(0x151)](0x2));const _0x38cad5=tooltip[_0x14ce59(0x109)]();if(_0x38cad5){const _0x7176ce=_0x38cad5['getBoundingClientRect'](),_0x6d3a9=window[_0x14ce59(0x16c)],_0xa5d6f4=window['innerHeight'];let _0xe8a60b=d3[_0x14ce59(0x14c)][_0x14ce59(0xe5)]+0xa,_0x93251b=d3[_0x14ce59(0x14c)][_0x14ce59(0x18e)]-0x1c;_0xe8a60b+_0x7176ce['width']>_0x6d3a9-0xa&&(_0xe8a60b=d3[_0x14ce59(0x14c)][_0x14ce59(0xe5)]-_0x7176ce['width']-0xa),_0x93251b+_0x7176ce[_0x14ce59(0x14f)]>_0xa5d6f4-0xa&&(_0x93251b=d3['event'][_0x14ce59(0x18e)]-_0x7176ce[_0x14ce59(0x14f)]-0xa),_0xe8a60b=Math[_0x14ce59(0x16d)](0xa,_0xe8a60b),_0x93251b=Math[_0x14ce59(0x16d)](0xa,_0x93251b),tooltip[_0x14ce59(0xf7)](_0x14ce59(0x140),_0xe8a60b+'px')[_0x14ce59(0xf7)]('top',_0x93251b+'px');}else tooltip['style']('left',d3[_0x14ce59(0x14c)][_0x14ce59(0xe5)]+0xa+'px')[_0x14ce59(0xf7)](_0x14ce59(0x17b),d3[_0x14ce59(0x14c)][_0x14ce59(0x18e)]-0x1c+'px');window[_0x14ce59(0x16c)]<=0x300&&setTimeout(function(){var _0xcf6e69=_0x14ce59;tooltip[_0xcf6e69(0x14d)]()[_0xcf6e69(0x15d)](0xc8)[_0xcf6e69(0xf7)](_0xcf6e69(0x113),0x0);},0x3e8);})['on'](_0x16ed1a(0x171),function(_0xaf90a3){var _0x4c674a=_0x16ed1a;window[_0x4c674a(0x16c)]>0x300&&tooltip['transition']()[_0x4c674a(0x15d)](0x1f4)['style']('opacity',0x0);var _0x450c69=clickedCircles[_0x4c674a(0x135)](_0xaf90a3[0x1]);d3['select'](this)[_0x4c674a(0x14d)]()[_0x4c674a(0x15d)](0xc8)[_0x4c674a(0x154)]('r',0x8)['style'](_0x4c674a(0x17d),function(){var _0x52a8da=_0x4c674a;return _0x450c69?getLeagueColor(_0xaf90a3[0x2]):_0x52a8da(0x177);});})['on'](_0x16ed1a(0x13d),function(_0x59e554){var _0x3ec6ef=_0x16ed1a,_0x42ead3=d3['select'](this)[_0x3ec6ef(0xce)](_0x3ec6ef(0x10a));_0x42ead3&&resetSearch();var _0x155af8=clickedCircles[_0x3ec6ef(0x106)](_0x59e554[0x1]);_0x155af8===-0x1?(clickedCircles[_0x3ec6ef(0xf4)](_0x59e554[0x1]),d3[_0x3ec6ef(0x152)](this)[_0x3ec6ef(0xf7)](_0x3ec6ef(0x17d),getLeagueColor(_0x59e554[0x2]))[_0x3ec6ef(0xf7)](_0x3ec6ef(0x14b),_0x3ec6ef(0xd1))['style'](_0x3ec6ef(0x11f),0x2),addTeamLabel(_0x59e554)):(clickedCircles['splice'](_0x155af8,0x1),d3['select'](this)[_0x3ec6ef(0xf7)](_0x3ec6ef(0x17d),'rgba(70,\x20130,\x20180,\x200.7)')[_0x3ec6ef(0xf7)]('stroke',_0x3ec6ef(0x18c)),svg[_0x3ec6ef(0x153)](_0x3ec6ef(0xff)+_0x59e554[0x1][_0x3ec6ef(0x13c)](/\s+/g,'-')['toLowerCase']())[_0x3ec6ef(0x114)]());updateSelectAllButtonText();var _0x2c8d4d=document[_0x3ec6ef(0xe4)](_0x3ec6ef(0x179))['value'];updateLeagueLegend(_0x2c8d4d);}),clickedCircles[_0x16ed1a(0x156)](function(_0x40d4ae){var _0x586d5f=filteredData['find'](function(_0x22c080){return _0x22c080[0x1]===_0x40d4ae;});_0x586d5f&&addTeamLabel(_0x586d5f);}),updateSelectAllButtonText(),updateLeagueLegend(_0x93ab6);}function updateSelectAllButtonText(){var _0x4ce6e8=_0x3571df,_0x7315be=document[_0x4ce6e8(0xe4)](_0x4ce6e8(0x117)),_0x486e2d=document[_0x4ce6e8(0xe4)](_0x4ce6e8(0x123)),_0x5e22d9=filteredData[_0x4ce6e8(0xde)](function(_0x36bed8){var _0xd22b5=_0x4ce6e8;return clickedCircles[_0xd22b5(0x135)](_0x36bed8[0x1]);});_0x5e22d9?(_0x7315be['className']=_0x4ce6e8(0x11a),_0x486e2d&&(window[_0x4ce6e8(0x186)]&&window[_0x4ce6e8(0x186)]['tooltip']?_0x486e2d[_0x4ce6e8(0x195)]=window[_0x4ce6e8(0x186)]['tooltip'][_0x4ce6e8(0x198)]||_0x4ce6e8(0x160):_0x486e2d[_0x4ce6e8(0x195)]=_0x4ce6e8(0x160))):(_0x7315be['className']=_0x4ce6e8(0xd6),_0x486e2d&&(window['currentTranslations']&&window[_0x4ce6e8(0x186)][_0x4ce6e8(0x199)]?_0x486e2d[_0x4ce6e8(0x195)]=window[_0x4ce6e8(0x186)]['tooltip']['selectAll']||_0x4ce6e8(0xf2):_0x486e2d[_0x4ce6e8(0x195)]=_0x4ce6e8(0xf2)));}selectX['on']('change',updateChart),selectY['on'](_0x3571df(0xea),updateChart);function removeSpecialCharsAndDiacritics(_0x2243af){var _0x53ca25=_0x3571df;if(!_0x2243af)return'';return _0x2243af[_0x53ca25(0x17f)]('NFD')[_0x53ca25(0x13c)](/[\u0300-\u036f]/g,'')[_0x53ca25(0x13c)](//g,'O')['replace'](//g,'o');}var searchBar=document[_0x3571df(0xe4)]('search-bar');searchBar[_0x3571df(0x10b)](_0x3571df(0x108),function(){var _0x387178=_0x3571df,_0x34b75a=searchBar[_0x387178(0xfd)][_0x387178(0x112)]();if(_0x34b75a===''){resetSearch();return;}var _0x2585af=removeSpecialCharsAndDiacritics(_0x34b75a);svg[_0x387178(0x153)](_0x387178(0x147))[_0x387178(0xce)]('search-match',![])['style'](_0x387178(0x17d),function(_0x5973b2){return clickedCircles['includes'](_0x5973b2[0x1])?getLeagueColor(_0x5973b2[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})[_0x387178(0xf7)]('stroke',function(_0x2665e8){var _0x4ce82e=_0x387178;return clickedCircles[_0x4ce82e(0x135)](_0x2665e8[0x1])?_0x4ce82e(0xd1):_0x4ce82e(0x18c);})['style'](_0x387178(0x11f),function(_0x24fe55){var _0x3ef8d6=_0x387178;return clickedCircles[_0x3ef8d6(0x135)](_0x24fe55[0x1])?0x2:0x0;})[_0x387178(0xf7)](_0x387178(0x118),'none')[_0x387178(0xf8)](function(){var _0x487ba6=_0x387178;d3[_0x487ba6(0x152)](this)[_0x487ba6(0xf7)]('r',null);}),svg[_0x387178(0x153)](_0x387178(0x188))[_0x387178(0xce)](_0x387178(0x10a),![])['classed'](_0x387178(0x159),![]);var _0x4fa4f9=[];svg[_0x387178(0x153)](_0x387178(0x147))[_0x387178(0x118)](function(_0x4e4dd5){var _0x517415=_0x387178,_0x32a9eb=_0x4e4dd5[0x1][_0x517415(0x112)](),_0x3cca48=removeSpecialCharsAndDiacritics(_0x32a9eb),_0x23deaf=_0x32a9eb['includes'](_0x34b75a)||_0x3cca48['includes'](_0x2585af);return _0x23deaf&&_0x4fa4f9[_0x517415(0xf4)](_0x4e4dd5[0x1]),_0x23deaf;})[_0x387178(0xce)](_0x387178(0x10a),!![])[_0x387178(0xf8)](function(){var _0x5cc699=_0x387178;this['parentNode'][_0x5cc699(0xf3)](this);}),_0x4fa4f9[_0x387178(0x15e)]>0x0?(svg[_0x387178(0x153)](_0x387178(0x188))[_0x387178(0xce)](_0x387178(0x159),!![]),svg['selectAll'](_0x387178(0x188))['filter'](function(){var _0x320ccc=_0x387178,_0x26cd0f=d3[_0x320ccc(0x152)](this)[_0x320ccc(0x103)]();return _0x4fa4f9[_0x320ccc(0x135)](_0x26cd0f);})['classed']('search-match',!![])[_0x387178(0xce)](_0x387178(0x159),![])['each'](function(){var _0x1e609c=_0x387178;this[_0x1e609c(0xf9)][_0x1e609c(0xf3)](this);}),_0x4fa4f9[_0x387178(0x156)](function(_0x4cbf6e){var _0x3d6edd=_0x387178,_0x1589f2=_0x3d6edd(0xed)+_0x4cbf6e[_0x3d6edd(0x13c)](/\s+/g,'-')[_0x3d6edd(0x112)]();if(svg[_0x3d6edd(0x152)]('.'+_0x1589f2)['size']()===0x0){var _0x468db0=filteredData['find'](function(_0x87c5e0){return _0x87c5e0[0x1]===_0x4cbf6e;});_0x468db0&&(addTeamLabel(_0x468db0),svg['select']('.'+_0x1589f2)[_0x3d6edd(0xce)](_0x3d6edd(0x10a),!![]));}})):(svg[_0x387178(0x153)]('.team-label')[_0x387178(0xf8)](function(){var _0x48e144=_0x387178,_0x30eeda=d3['select'](this),_0x1f0b75=_0x30eeda[_0x48e144(0x103)]();!clickedCircles[_0x48e144(0x135)](_0x1f0b75)&&_0x30eeda['remove']();}),svg[_0x387178(0x153)]('circle')[_0x387178(0xf7)]('fill',function(_0x495ea3){var _0x439ef0=_0x387178;return clickedCircles[_0x439ef0(0x135)](_0x495ea3[0x1])?getLeagueColor(_0x495ea3[0x2]):_0x439ef0(0x177);})['style'](_0x387178(0x14b),function(_0x25ccd4){var _0x25f68d=_0x387178;return clickedCircles[_0x25f68d(0x135)](_0x25ccd4[0x1])?_0x25f68d(0xd1):_0x25f68d(0x18c);})[_0x387178(0xf7)](_0x387178(0x11f),function(_0x548f4b){return clickedCircles['includes'](_0x548f4b[0x1])?0x2:0x0;}));});function resetSearch(){var _0x30f293=_0x3571df;searchBar['value']='',svg[_0x30f293(0x153)]('circle')[_0x30f293(0xce)]('search-match',![])[_0x30f293(0xf7)](_0x30f293(0x17d),function(_0x2742ba){var _0x35fd70=_0x30f293;return clickedCircles['includes'](_0x2742ba[0x1])?getLeagueColor(_0x2742ba[0x2]):_0x35fd70(0x177);})['style'](_0x30f293(0x14b),function(_0x502cf5){var _0x53b275=_0x30f293;return clickedCircles['includes'](_0x502cf5[0x1])?_0x53b275(0xd1):_0x53b275(0x18c);})['style'](_0x30f293(0x11f),function(_0x155d2b){var _0x4c9836=_0x30f293;return clickedCircles[_0x4c9836(0x135)](_0x155d2b[0x1])?0x2:0x0;})[_0x30f293(0xf7)](_0x30f293(0x118),_0x30f293(0x18c))[_0x30f293(0xf8)](function(){var _0x50b147=_0x30f293;d3[_0x50b147(0x152)](this)[_0x50b147(0xf7)]('r',null),d3['select'](this)[_0x50b147(0xe6)]();}),svg[_0x30f293(0x153)]('.team-label')['classed'](_0x30f293(0x10a),![])[_0x30f293(0xce)](_0x30f293(0x159),![])[_0x30f293(0xf8)](function(){var _0x39be98=_0x30f293;d3[_0x39be98(0x152)](this)[_0x39be98(0xe6)]();}),svg['selectAll'](_0x30f293(0x188))[_0x30f293(0xf8)](function(){var _0x14cafd=_0x30f293,_0x3b83fa=d3[_0x14cafd(0x152)](this),_0x333e58=_0x3b83fa[_0x14cafd(0x103)]();!clickedCircles[_0x14cafd(0x135)](_0x333e58)&&_0x3b83fa[_0x14cafd(0x114)]();});}var toggleButton=document['getElementById'](_0x3571df(0x139));toggleButton[_0x3571df(0x10b)](_0x3571df(0x13d),function(){var _0x8308bb=_0x3571df;medianLinesVisible=!medianLinesVisible,updateChart();const _0x8e4428=document['getElementById'](_0x8308bb(0x194));window['currentTranslations']&&window['currentTranslations'][_0x8308bb(0x199)]?_0x8e4428[_0x8308bb(0x195)]=medianLinesVisible?window[_0x8308bb(0x186)][_0x8308bb(0x199)][_0x8308bb(0x136)]||_0x8308bb(0x125):window[_0x8308bb(0x186)][_0x8308bb(0x199)][_0x8308bb(0xdd)]||_0x8308bb(0x115):_0x8e4428[_0x8308bb(0x195)]=medianLinesVisible?'Hide\x20median\x20lines':_0x8308bb(0x115);});function selectAllCircles(){var _0x3523e3=_0x3571df,_0x201697=filteredData[_0x3523e3(0xde)](function(_0x4abaaa){var _0xd133c=_0x3523e3;return clickedCircles[_0xd133c(0x135)](_0x4abaaa[0x1]);});_0x201697?(clickedCircles=[],svg[_0x3523e3(0x153)](_0x3523e3(0x147))['style'](_0x3523e3(0x17d),_0x3523e3(0x177))['style'](_0x3523e3(0x14b),_0x3523e3(0x18c)),svg['selectAll'](_0x3523e3(0x188))[_0x3523e3(0x114)]()):(svg[_0x3523e3(0x153)](_0x3523e3(0x147))[_0x3523e3(0xf8)](function(_0x3d3a7f){var _0x2097d7=_0x3523e3;!clickedCircles['includes'](_0x3d3a7f[0x1])&&(clickedCircles['push'](_0x3d3a7f[0x1]),d3[_0x2097d7(0x152)](this)['style'](_0x2097d7(0x17d),getLeagueColor(_0x3d3a7f[0x2]))[_0x2097d7(0xf7)](_0x2097d7(0x14b),_0x2097d7(0xd1))[_0x2097d7(0xf7)](_0x2097d7(0x11f),0x2));}),filteredData['forEach'](function(_0x1d0bb2){addTeamLabel(_0x1d0bb2);}));updateSelectAllButtonText();var _0x175c8d=document[_0x3523e3(0xe4)]('select-league')[_0x3523e3(0xfd)];updateLeagueLegend(_0x175c8d);}function _0x1ccc(){var _0x3a05aa=['5,3','slice','x-axis','block','rgba(70,\x20130,\x20180,\x200.7)','stroke-dasharray','select-league','https://datamb.football/database/TEAM/teamplots.csv','top','querySelectorAll','fill','<span>','normalize','getBoundingClientRect','translate(','className','domain','1696374GKqaNJ','.position-btn','currentTranslations','apply','.team-label','marker#arrow-over,\x20marker#arrow-under','DOMContentLoaded','link','none','24otpGFU','pageY','backgroundColor','pct','15px','append','team-label\x20','median-lines-tooltip','textContent','transform','transparent','unselectAll','tooltip','active','line','data','classed','tooltip.xg-line-left','.xy-line-bg','#000','enter','Inter,\x20sans-serif','text-anchor','keys','ion-ios-circle-filled','421244uapeDm','4652766uIFjli','xy-line','1cLpJnq','tooltip.xg-line-title','<strong>','showMedianLines','every','option','size','rgba(255,\x20165,\x200,\x200.7)','font-family','.xy-line-label-bg','getElementById','pageX','interrupt','querySelector','</span><br/>','.median-line','change','linearGradient#line-gradient','tooltip.xg-line-right','team-label-','div','819200KkhNpE','axisLeft','marginRight','Select\x20all\x20teams','appendChild','push','#select-x','G\x20=\x20xG\x20Line','style','each','parentNode','.xy-line','tickSize','body','value','xG\x20per\x2090','.team-label-','14px','innerHeight','.xy-line-hover','text','resize','median','indexOf','metrics.','input','node','search-match','addEventListener','span','innerHTML','translate(0,','split','add','</span>','toLowerCase','opacity','remove','Show\x20median\x20lines','500','select-icon','filter','right','ion-ios-circle-outline','map','all','name','league-legend','stroke-width','scaleLinear','contains','#scatter-plot','select-all-tooltip','Premier\x20League','Hide\x20median\x20lines','find','end','call','font-weight','#2ecc71','median-line','createElement','Serie\x20A','rgba(75,\x200,\x20130,\x200.7)','.chart-container','bold','</strong><br/>','262634BAIQJY','173865frQddX','rotate(-90)','includes','hideMedianLines','mouseover','132853kftxIi','toggle-median-lines','cursor','rgba(255,\x200,\x200,\x200.7)','replace','click','.xy-line-label','getBBox','left','trim','property','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','classList','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','display','circle','axisBottom','y-label','rgba(238,\x20130,\x20238,\x200.7)','stroke','event','transition','rgba(0,\x200,\x20255,\x200.7)','height','open','toFixed','select','selectAll','attr','#333','forEach','.chart-wrapper','min','search-dimmed','html','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','font-size','duration','length','xy-line-hover','Unselect\x20all\x20teams','rgba(0,\x200,\x200,\x200.3)','range','clientWidth','responseText','metrics','GET','class','data-i18n','flex','bottom','Goals\x20per\x2090','innerWidth','max','resizeTimer','<br/>','La\x20Liga','mouseout','width'];_0x1ccc=function(){return _0x3a05aa;};return _0x1ccc();}document[_0x3571df(0x17c)](_0x3571df(0x185))['forEach'](_0x11631b=>{var _0x30f538=_0x3571df;_0x11631b[_0x30f538(0x10b)](_0x30f538(0x13d),function(){var _0x24e833=_0x30f538;document[_0x24e833(0x17c)]('.position-btn')[_0x24e833(0x156)](_0x37cc20=>_0x37cc20[_0x24e833(0x144)][_0x24e833(0x114)](_0x24e833(0x19a))),this[_0x24e833(0x144)][_0x24e833(0x110)](_0x24e833(0x19a)),updateChart();});}),updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x28da79){var _0x92ea8f=_0x3571df,_0xec6240=document['getElementById'](_0x92ea8f(0x11e));if(_0x28da79!==_0x92ea8f(0x11c)&&_0x28da79!=='Top\x205\x20Leagues'){_0xec6240[_0x92ea8f(0xf7)][_0x92ea8f(0x146)]=_0x92ea8f(0x18c);return;}if(clickedCircles[_0x92ea8f(0x15e)]===0x0){_0xec6240['style'][_0x92ea8f(0x146)]=_0x92ea8f(0x18c);return;}_0xec6240[_0x92ea8f(0xf7)][_0x92ea8f(0x146)]=_0x92ea8f(0x169),_0xec6240[_0x92ea8f(0x10d)]='';var _0x31e7b8=document[_0x92ea8f(0x12c)](_0x92ea8f(0xee));_0x31e7b8[_0x92ea8f(0xf7)]['fontWeight']=_0x92ea8f(0x130),_0x31e7b8[_0x92ea8f(0xf7)][_0x92ea8f(0xf1)]=_0x92ea8f(0x191),_0xec6240[_0x92ea8f(0xf3)](_0x31e7b8);var _0x57c9ee=[];if(_0x28da79==='all')_0x57c9ee=Object[_0x92ea8f(0xd5)](leagueColors);else _0x28da79==='Top\x205\x20Leagues'&&(_0x57c9ee=[_0x92ea8f(0x124),_0x92ea8f(0x170),'Bundesliga',_0x92ea8f(0x12d),'Ligue\x201']);_0x57c9ee[_0x92ea8f(0x156)](function(_0xe8f627){var _0x447233=_0x92ea8f,_0x3ee0ca=document['createElement'](_0x447233(0xee));_0x3ee0ca[_0x447233(0x182)]='legend-item';var _0x811942=document[_0x447233(0x12c)](_0x447233(0xee));_0x811942[_0x447233(0x182)]='legend-color',_0x811942['style'][_0x447233(0x18f)]=leagueColors[_0xe8f627];var _0x54302b=document[_0x447233(0x12c)](_0x447233(0x10c));_0x54302b[_0x447233(0x195)]=_0xe8f627,_0x3ee0ca[_0x447233(0xf3)](_0x811942),_0x3ee0ca['appendChild'](_0x54302b),_0xec6240[_0x447233(0xf3)](_0x3ee0ca);});}const data1=dataLines[_0x3571df(0x11b)](_0xc5a24b=>{var _0x29d961=_0x3571df;const [_0x2856ae,_0x59766c]=_0xc5a24b[_0x29d961(0x10f)](',');return{'name':_0x2856ae,'link':_0x59766c};});function search2(_0x17692c){var _0x4974d9=_0x3571df;autocompleteBox[_0x4974d9(0x10d)]='';const _0x444749=_0x17692c[_0x4974d9(0x112)](),_0x42f2a4=data1['filter'](_0x3dff9b=>{var _0x25d31f=_0x4974d9;const _0x592c19=_0x3dff9b[_0x25d31f(0x11d)]?_0x3dff9b[_0x25d31f(0x11d)][_0x25d31f(0x112)]():'';return _0x592c19[_0x25d31f(0x135)](_0x444749);});if(_0x42f2a4[_0x4974d9(0x15e)]===0x0){autocompleteBox[_0x4974d9(0xf7)]['display']='none';return;}_0x42f2a4[_0x4974d9(0x156)](_0x389736=>{var _0x33614d=_0x4974d9;if(_0x389736['name']&&_0x389736[_0x33614d(0x18b)]){const _0x15c5f8=document[_0x33614d(0x12c)]('div'),_0x1889d9=document[_0x33614d(0x12c)]('a');_0x1889d9['href']=_0x389736[_0x33614d(0x18b)],_0x1889d9['textContent']=_0x389736['name'],_0x15c5f8['appendChild'](_0x1889d9),autocompleteBox[_0x33614d(0xf3)](_0x15c5f8);}}),autocompleteBox[_0x4974d9(0xf7)][_0x4974d9(0x146)]=_0x4974d9(0x176);}searchInput[_0x3571df(0x10b)]('input',()=>{var _0x4ba0a8=_0x3571df;const _0x42d77b=searchInput[_0x4ba0a8(0xfd)];_0x42d77b[_0x4ba0a8(0x141)]()===''?autocompleteBox[_0x4ba0a8(0xf7)]['display']='none':search2(_0x42d77b);});function addTeamLabel(_0x1692be){var _0x230203=_0x3571df,_0xb21084=xScale(_0x1692be[header['indexOf'](xMetric)]),_0x55635a=yScale(_0x1692be[header[_0x230203(0x106)](yMetric)]),_0x394b68=_0x230203(0xed)+_0x1692be[0x1]['replace'](/\s+/g,'-')['toLowerCase']();if(svg[_0x230203(0x152)]('.'+_0x394b68)[_0x230203(0xe0)]()>0x0)return;var _0x52f706=svg[_0x230203(0x192)](_0x230203(0x103))[_0x230203(0x154)](_0x230203(0x167),_0x230203(0x193)+_0x394b68)[_0x230203(0x154)]('x',_0xb21084+0xc)[_0x230203(0x154)]('y',_0x55635a+0x4)[_0x230203(0x103)](_0x1692be[0x1])[_0x230203(0xf7)](_0x230203(0xe2),_0x230203(0xd3))[_0x230203(0xf7)](_0x230203(0x15c),'12px')['style'](_0x230203(0x129),_0x230203(0x116))[_0x230203(0xf7)](_0x230203(0x17d),_0x230203(0x155));positionLabelToAvoidOverlap(_0x52f706,_0xb21084,_0x55635a);}function positionLabelToAvoidOverlap(_0x3e9975,_0x439908,_0x36f384){var _0x2b8981=_0x3571df,_0xfe974b=svg[_0x2b8981(0x153)](_0x2b8981(0x188))[_0x2b8981(0x118)](function(){var _0xba2047=_0x2b8981;return this!==_0x3e9975[_0xba2047(0x109)]();}),_0x380533=_0x3e9975['node']()[_0x2b8981(0x13f)](),_0x2bd2ed=[{'x':_0x439908+0xc,'y':_0x36f384+0x4},{'x':_0x439908+0xc,'y':_0x36f384-0xa},{'x':_0x439908+0xc,'y':_0x36f384+0x12},{'x':_0x439908-_0x380533[_0x2b8981(0x172)]-0x5,'y':_0x36f384+0x4},{'x':_0x439908-_0x380533[_0x2b8981(0x172)]-0x5,'y':_0x36f384-0xa},{'x':_0x439908-_0x380533['width']-0x5,'y':_0x36f384+0x12},{'x':_0x439908-_0x380533[_0x2b8981(0x172)]/0x2,'y':_0x36f384-0xf},{'x':_0x439908-_0x380533[_0x2b8981(0x172)]/0x2,'y':_0x36f384+0x19}],_0x52f920=findPositionWithoutOverlap(_0x2bd2ed,_0xfe974b,_0x380533);_0x3e9975[_0x2b8981(0x154)]('x',_0x52f920['x'])[_0x2b8981(0x154)]('y',_0x52f920['y']);}function findPositionWithoutOverlap(_0x2cb2f9,_0x532a84,_0x108613){var _0x139ff3=_0x3571df;for(var _0x7066e1=0x0;_0x7066e1<_0x2cb2f9['length'];_0x7066e1++){var _0x5c2c02=_0x2cb2f9[_0x7066e1],_0x57c869=![],_0x42e91e={'x1':_0x5c2c02['x'],'y1':_0x5c2c02['y']-_0x108613[_0x139ff3(0x14f)],'x2':_0x5c2c02['x']+_0x108613[_0x139ff3(0x172)],'y2':_0x5c2c02['y']+0x5};if(_0x42e91e['x1']<0x0||_0x42e91e['x2']>width||_0x42e91e['y1']<0x0||_0x42e91e['y2']>height)continue;_0x532a84[_0x139ff3(0xf8)](function(){var _0x1204e6=_0x139ff3,_0x21008f=d3['select'](this)[_0x1204e6(0x109)]()[_0x1204e6(0x13f)](),_0xa66f92=parseFloat(d3[_0x1204e6(0x152)](this)[_0x1204e6(0x154)]('x')),_0x21771e=parseFloat(d3[_0x1204e6(0x152)](this)['attr']('y')),_0x444527={'x1':_0xa66f92,'y1':_0x21771e-_0x21008f['height'],'x2':_0xa66f92+_0x21008f[_0x1204e6(0x172)],'y2':_0x21771e+0x5};!(_0x42e91e['x2']<_0x444527['x1']||_0x42e91e['x1']>_0x444527['x2']||_0x42e91e['y2']<_0x444527['y1']||_0x42e91e['y1']>_0x444527['y2'])&&(_0x57c869=!![]);});if(!_0x57c869)return _0x5c2c02;}for(var _0x7066e1=0x0;_0x7066e1<_0x2cb2f9[_0x139ff3(0x15e)];_0x7066e1++){var _0x5c2c02=_0x2cb2f9[_0x7066e1],_0x42e91e={'x1':_0x5c2c02['x'],'y1':_0x5c2c02['y']-_0x108613[_0x139ff3(0x14f)],'x2':_0x5c2c02['x']+_0x108613['width'],'y2':_0x5c2c02['y']+0x5};if(_0x42e91e['x1']>=0x0&&_0x42e91e['x2']<=width&&_0x42e91e['y1']>=0x0&&_0x42e91e['y2']<=height)return _0x5c2c02;}var _0x48bee4={'x':Math[_0x139ff3(0x158)](Math[_0x139ff3(0x16d)](0x0,_0x2cb2f9[0x0]['x']),width-_0x108613[_0x139ff3(0x172)]),'y':Math['min'](Math[_0x139ff3(0x16d)](_0x108613[_0x139ff3(0x14f)],_0x2cb2f9[0x0]['y']),height)};return _0x48bee4;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0x399db0=_0x246a,_0x1d06f4=svg['selectAll'](_0x399db0(0x188));_0x1d06f4[_0x399db0(0xf8)](function(){var _0x1e688c=_0x399db0,_0x2e161f=d3['select'](this),_0x4a0c96=_0x2e161f[_0x1e688c(0x103)](),_0x34c014=filteredData[_0x1e688c(0x126)](function(_0x6a60cb){return _0x6a60cb[0x1]===_0x4a0c96;});if(_0x34c014){var _0x48c837=xScale(_0x34c014[header[_0x1e688c(0x106)](xMetric)]),_0x5b716f=yScale(_0x34c014[header[_0x1e688c(0x106)](yMetric)]);positionLabelToAvoidOverlap(_0x2e161f,_0x48c837,_0x5b716f);}});},0xa);},document[_0x3571df(0x10b)](_0x3571df(0x18a),function(){var _0x30de03=_0x3571df;const _0x5bfd1d=document['getElementById'](_0x30de03(0x194));_0x5bfd1d[_0x30de03(0x195)]=medianLinesVisible?_0x30de03(0x125):'Show\x20median\x20lines';});        
    </script>
  <script>
    // Translation functionality
    function setLanguage(language) {
      localStorage.setItem('preferredLanguage', language);
      // Update URL with language parameter
      const url = new URL(window.location.href);
      if (language === 'en') {
        url.searchParams.delete('lang');
      } else {
        url.searchParams.set('lang', language);
      }
      window.history.pushState({}, '', url);
      applyLanguage(language);
    }
    
    function getPreferredLanguage() {
      // Check URL parameter first
      const urlParams = new URLSearchParams(window.location.search);
      const langParam = urlParams.get('lang');
      if (langParam) {
        return langParam;
      }
      return localStorage.getItem('preferredLanguage') || getBrowserLanguage() || 'en';
    }
    
    function getBrowserLanguage() {
      return navigator.language.slice(0, 2);
    }
    
    function applyLanguage(language) {
      fetch(`locales/${language}.json`)
        .then(response => response.json())
        .then(translations => {
          // Store translations globally for dynamic access
          window.currentTranslations = translations;
          
          // Update text content for elements with data-i18n attribute
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.textContent = value;
            }
          });
    
          // Update placeholders for elements with data-i18n-placeholder attribute
          document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const keys = element.getAttribute('data-i18n-placeholder').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.placeholder = value;
            }
          });
    
          // Update meta tags
          document.title = translations.meta.title;
          document.querySelector('meta[name="description"]').setAttribute('content', translations.meta.description);
          document.querySelector('meta[name="language"]').setAttribute('content', language);
        });
    }
    
    // Initialize translations
    const preferredLanguage = getPreferredLanguage();
    applyLanguage(preferredLanguage);
    
    // Language dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      const languageButton = document.getElementById('languageButton');
      const languageDropdown = document.getElementById('languageDropdown');
    
      // Toggle dropdown on button click
      languageButton.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });
    
      // Handle language option clicks
      document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('href').split('=')[1];
          setLanguage(lang);
          languageDropdown.classList.remove('show');
        });
      });
    
      // Close dropdown when clicking outside
      document.addEventListener('click', function(event) {
        if (!event.target.closest('.language-switcher-container')) {
          languageDropdown.classList.remove('show');
        }
      });
    });
    </script>
    
</body>
</html>
