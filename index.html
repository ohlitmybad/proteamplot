<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

 
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }


        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 30px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
            font-size: 20px;
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }






  

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    cursor: pointer;
    color: var(--text-color);
    background-color: var(--container-bg);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}


.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

/* Make the league selector span 30px smaller */
#league-select-trigger span {
    max-width: calc(100% - 45px); /* 20px + 30px reduction */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 4px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}



.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}



.custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

.metric-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}


.dark-mode .custom-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

@media (max-width: 768px) {
    .custom-select-option {
        padding: 6px 12px;
    }
}


/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}


/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 




        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        

        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}


/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}




.custom-select-option {
    -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            
}
        /* Disable text selection for SVG text elements */
        svg text, .legend,
        .x-label,
        .y-label,
        .team-label,
        .player-name,
        .x-axis text,
        .y-axis text {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
        }


            body.dark-mode #SFctr {
        color: #ffffff !important
        }
        
        
        #SFctr input {
            background-color: #ffffff !important;
        color:#000000 !important;
        border: 1px solid #c2c2c2 !important
        }
  #SFctr {
	font-family: Arial, Helvetica, sans-serif !important;
	color: #000000 !important;
  margin-left: 21.4px;
}

#SFusrlogpst strong:first-child {
  font-size: 0px;
}

#SFusrlogpst input[type="checkbox"],
#SFusrlogpwd input[type="checkbox"],
#SFusrlogpst i,
#SFusrlogpwd i {
  display: none !important;
}

#SFctr .SFfrm input[type="text"],
#SFctr .SFfrm input[type="password"],
#SFctr .SFfrm button {
  border-radius: 6px;
}

#SFusrlogpwd strong {
  visibility: hidden; /* Hide the original text */
  position: relative;
}

#SFusrlogpwd strong::after {
  content: "Forgot Password?"; /* Add the new text */
  visibility: visible;
  position: absolute;
  font-size: 12px;
  font-weight: 400;
  left: 100px;
  white-space: nowrap; /* Prevent text from wrapping */
  
}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        
        var _0xa0cae6=_0x5717;(function(_0x5dde6d,_0xed0c35){var _0x5c667b=_0x5717,_0x2fdbcb=_0x5dde6d();while(!![]){try{var _0x324e4a=parseInt(_0x5c667b(0x113))/0x1*(-parseInt(_0x5c667b(0x1e7))/0x2)+-parseInt(_0x5c667b(0x175))/0x3*(-parseInt(_0x5c667b(0x1a9))/0x4)+parseInt(_0x5c667b(0x1f1))/0x5+-parseInt(_0x5c667b(0x1ba))/0x6+-parseInt(_0x5c667b(0x18a))/0x7*(-parseInt(_0x5c667b(0x106))/0x8)+-parseInt(_0x5c667b(0x182))/0x9+parseInt(_0x5c667b(0x178))/0xa*(-parseInt(_0x5c667b(0x15a))/0xb);if(_0x324e4a===_0xed0c35)break;else _0x2fdbcb['push'](_0x2fdbcb['shift']());}catch(_0x18da6b){_0x2fdbcb['push'](_0x2fdbcb['shift']());}}}(_0x24a4,0x3d79a));let initializeCustomSelectors=function(){var _0x34ebd9=_0x5717;const _0x2cf5d3=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x10b)),_0x1bf78a=document['getElementById']('league-select-options'),_0x81004c=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x16d));setupCustomSelect(_0x2cf5d3,_0x1bf78a,_0x81004c);const _0x353c78=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x1be)),_0x33dd1d=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x184)),_0x45ed8b=document[_0x34ebd9(0x1f5)]('select-x');populateMetricOptions(_0x33dd1d,header['slice'](0x3),function(_0x96cf44,_0x276749){var _0x14afb9=_0x34ebd9;_0x353c78[_0x14afb9(0x11d)](_0x14afb9(0x177))[_0x14afb9(0x1c3)]===_0x276749&&_0x96cf44[_0x14afb9(0x1d4)][_0x14afb9(0x12d)](_0x14afb9(0x18d));if(_0x276749===header[0x3]){_0x96cf44[_0x14afb9(0x1d4)]['add'](_0x14afb9(0x18d)),_0x353c78[_0x14afb9(0x11d)](_0x14afb9(0x177))[_0x14afb9(0x1c3)]=_0x276749;const _0x15e80a=_0x276749[_0x14afb9(0x19c)]()['replace'](/ /g,'-')[_0x14afb9(0x19e)](/%/g,_0x14afb9(0x1a2));_0x353c78[_0x14afb9(0x11d)]('span')['setAttribute']('data-i18n','metrics.'+_0x15e80a);}}),setupCustomSelect(_0x353c78,_0x33dd1d,_0x45ed8b);const _0xd1ef24=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x160)),_0x1172ed=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x1eb)),_0x39665e=document[_0x34ebd9(0x1f5)](_0x34ebd9(0x14f));populateMetricOptions(_0x1172ed,header[_0x34ebd9(0x15d)](0x3),function(_0x3a8f15,_0x20793a){var _0x2e058f=_0x34ebd9;_0xd1ef24[_0x2e058f(0x11d)]('span')['textContent']===_0x20793a&&_0x3a8f15[_0x2e058f(0x1d4)][_0x2e058f(0x12d)]('selected');if(_0x20793a===header[0x4]){_0x3a8f15[_0x2e058f(0x1d4)][_0x2e058f(0x12d)]('selected'),_0xd1ef24[_0x2e058f(0x11d)]('span')['textContent']=_0x20793a;const _0x2c99b9=_0x20793a[_0x2e058f(0x19c)]()[_0x2e058f(0x19e)](/ /g,'-')['replace'](/%/g,'pct');_0xd1ef24[_0x2e058f(0x11d)](_0x2e058f(0x177))['setAttribute'](_0x2e058f(0x1a0),_0x2e058f(0x136)+_0x2c99b9);}}),setupCustomSelect(_0xd1ef24,_0x1172ed,_0x39665e);};function populateMetricOptions(_0xa69c66,_0x392442,_0x5d2074){var _0x2b5ad4=_0x5717;_0xa69c66[_0x2b5ad4(0x107)]='',_0x392442[_0x2b5ad4(0x163)](function(_0x579fa6){var _0x28fde2=_0x2b5ad4;const _0x46ea26=document[_0x28fde2(0x150)](_0x28fde2(0x139));_0x46ea26[_0x28fde2(0x152)]=_0x28fde2(0x1c2),_0x46ea26[_0x28fde2(0x164)](_0x28fde2(0x196),_0x579fa6);const _0x1030cd=document[_0x28fde2(0x150)](_0x28fde2(0x177));_0x1030cd[_0x28fde2(0x1c3)]=_0x579fa6;const _0x35bd60=_0x579fa6[_0x28fde2(0x19c)]()[_0x28fde2(0x19e)](/ /g,'-')[_0x28fde2(0x19e)](/%/g,_0x28fde2(0x1a2));_0x1030cd['setAttribute'](_0x28fde2(0x1a0),_0x28fde2(0x136)+_0x35bd60),_0x46ea26['appendChild'](_0x1030cd);if(_0x5d2074)_0x5d2074(_0x46ea26,_0x579fa6);_0xa69c66[_0x28fde2(0x11b)](_0x46ea26);});}function setupCustomSelect(_0x5e491d,_0x2b01b4,_0x2d9e67){var _0x352a28=_0x5717;_0x5e491d[_0x352a28(0x11e)](_0x352a28(0x10d),function(){var _0x39a8a6=_0x352a28;document[_0x39a8a6(0x15b)](_0x39a8a6(0x1b2))[_0x39a8a6(0x163)](function(_0x95d72e){var _0x3a6e01=_0x39a8a6;if(_0x95d72e!==_0x5e491d){_0x95d72e['classList']['remove'](_0x3a6e01(0x1d6));const _0x3c1405=_0x95d72e[_0x3a6e01(0x121)];if(_0x3c1405)_0x3c1405[_0x3a6e01(0x132)][_0x3a6e01(0x180)]=_0x3a6e01(0x194);}}),_0x5e491d[_0x39a8a6(0x1d4)][_0x39a8a6(0x110)](_0x39a8a6(0x1d6));const _0x204492=_0x5e491d[_0x39a8a6(0x1d4)][_0x39a8a6(0x1a4)](_0x39a8a6(0x1d6));_0x2b01b4[_0x39a8a6(0x132)][_0x39a8a6(0x180)]=_0x204492?'block':_0x39a8a6(0x194);});const _0x203762=_0x2b01b4[_0x352a28(0x15b)](_0x352a28(0x1df));_0x203762[_0x352a28(0x163)](_0x1e3c68=>{_0x1e3c68['addEventListener']('click',function(){var _0x3ddfbb=_0x5717;_0x203762[_0x3ddfbb(0x163)](_0x47a661=>_0x47a661[_0x3ddfbb(0x1d4)][_0x3ddfbb(0x1cb)](_0x3ddfbb(0x18d))),this[_0x3ddfbb(0x1d4)][_0x3ddfbb(0x12d)](_0x3ddfbb(0x18d));const _0x14a16b=this['querySelector'](_0x3ddfbb(0x177))['textContent'],_0x3bdf94=this[_0x3ddfbb(0x11d)](_0x3ddfbb(0x177))['getAttribute'](_0x3ddfbb(0x1a0)),_0x26a1df=this['querySelector'](_0x3ddfbb(0x1f7));_0x5e491d[_0x3ddfbb(0x107)]='';if(_0x26a1df){const _0x22e4fd=_0x26a1df[_0x3ddfbb(0x108)](!![]);_0x22e4fd[_0x3ddfbb(0x132)]['marginRight']=_0x3ddfbb(0x1e0),_0x5e491d[_0x3ddfbb(0x11b)](_0x22e4fd);}const _0x4ebc2b=document[_0x3ddfbb(0x150)](_0x3ddfbb(0x177));_0x4ebc2b[_0x3ddfbb(0x1c3)]=_0x14a16b;_0x3bdf94&&_0x4ebc2b['setAttribute'](_0x3ddfbb(0x1a0),_0x3bdf94);_0x5e491d[_0x3ddfbb(0x11b)](_0x4ebc2b);const _0x4ac9f0=this['getAttribute'](_0x3ddfbb(0x196));_0x2d9e67['value']=_0x4ac9f0||_0x14a16b;const _0x35318d=new Event(_0x3ddfbb(0x1e1));_0x2d9e67[_0x3ddfbb(0x1cd)](_0x35318d),_0x5e491d[_0x3ddfbb(0x1d4)]['remove'](_0x3ddfbb(0x1d6)),_0x2b01b4['style'][_0x3ddfbb(0x180)]=_0x3ddfbb(0x194);});});let _0x1a544d='',_0x421368;document[_0x352a28(0x11e)](_0x352a28(0x130),function(_0x57e9da){var _0x5a9627=_0x352a28;if(!_0x5e491d['classList'][_0x5a9627(0x1a4)](_0x5a9627(0x1d6)))return;if(_0x57e9da['key']===_0x5a9627(0x171)||_0x57e9da[_0x5a9627(0x131)]===_0x5a9627(0x1bd)){_0x57e9da['preventDefault']();const _0xdaf85a=Array['from'](_0x203762),_0x2afd2b=_0xdaf85a[_0x5a9627(0x181)](_0x4fa99a=>_0x4fa99a[_0x5a9627(0x1d4)][_0x5a9627(0x1a4)](_0x5a9627(0x18d)));let _0x119406;_0x57e9da[_0x5a9627(0x131)]===_0x5a9627(0x171)?_0x119406=_0x2afd2b<_0xdaf85a[_0x5a9627(0x1b5)]-0x1?_0x2afd2b+0x1:0x0:_0x119406=_0x2afd2b>0x0?_0x2afd2b-0x1:_0xdaf85a['length']-0x1;_0x203762[_0x5a9627(0x163)](_0x19188d=>_0x19188d[_0x5a9627(0x1d4)][_0x5a9627(0x1cb)](_0x5a9627(0x18d))),_0xdaf85a[_0x119406][_0x5a9627(0x1d4)][_0x5a9627(0x12d)](_0x5a9627(0x18d)),_0xdaf85a[_0x119406][_0x5a9627(0x183)]({'block':_0x5a9627(0x1b9)});return;}if(_0x57e9da[_0x5a9627(0x131)]===_0x5a9627(0x1f9)){_0x57e9da['preventDefault']();const _0x221023=_0x2b01b4[_0x5a9627(0x11d)](_0x5a9627(0x118));_0x221023&&_0x221023[_0x5a9627(0x10d)]();return;}if(_0x57e9da['key']===_0x5a9627(0x114)){_0x57e9da['preventDefault'](),_0x5e491d[_0x5a9627(0x1d4)]['remove']('open'),_0x2b01b4[_0x5a9627(0x132)][_0x5a9627(0x180)]=_0x5a9627(0x194);return;}if(_0x57e9da[_0x5a9627(0x131)][_0x5a9627(0x1b5)]===0x1&&_0x57e9da[_0x5a9627(0x131)][_0x5a9627(0x1c5)](/[a-zA-Z0-9%]/)){clearTimeout(_0x421368),_0x1a544d+=_0x57e9da['key'][_0x5a9627(0x19c)]();const _0x1c6215=Array[_0x5a9627(0x198)](_0x203762)[_0x5a9627(0x199)](_0x1bf140=>{var _0x41552e=_0x5a9627;const _0xf2ec42=_0x1bf140['querySelector'](_0x41552e(0x177))[_0x41552e(0x1c3)][_0x41552e(0x19c)]();return _0xf2ec42[_0x41552e(0x197)](_0x1a544d);});_0x1c6215&&(_0x203762['forEach'](_0x560575=>_0x560575[_0x5a9627(0x1d4)][_0x5a9627(0x1cb)]('selected')),_0x1c6215['classList'][_0x5a9627(0x12d)](_0x5a9627(0x18d)),_0x1c6215[_0x5a9627(0x183)]({'block':'nearest'})),_0x421368=setTimeout(()=>{_0x1a544d='';},0x3e8);}});}document[_0xa0cae6(0x11e)]('click',function(_0x22c3a6){var _0x1167b9=_0xa0cae6;const _0x129114=document[_0x1167b9(0x15b)]('.custom-select-trigger,\x20.metric-select-trigger'),_0x436f37=document[_0x1167b9(0x15b)](_0x1167b9(0x1e6));let _0x30115f=![];_0x129114[_0x1167b9(0x163)](function(_0x446fdb,_0x4b6586){var _0x1dcb16=_0x1167b9;const _0x33c602=_0x436f37[_0x4b6586];_0x446fdb&&_0x33c602&&(_0x446fdb[_0x1dcb16(0x1a4)](_0x22c3a6['target'])||_0x33c602[_0x1dcb16(0x1a4)](_0x22c3a6[_0x1dcb16(0x14c)]))&&(_0x30115f=!![]);}),!_0x30115f&&_0x129114[_0x1167b9(0x163)](function(_0x376ea6,_0x1517b1){var _0x1f9b8f=_0x1167b9;_0x376ea6&&_0x436f37[_0x1517b1]&&(_0x376ea6[_0x1f9b8f(0x1d4)][_0x1f9b8f(0x1cb)](_0x1f9b8f(0x1d6)),_0x436f37[_0x1517b1][_0x1f9b8f(0x132)]['display']=_0x1f9b8f(0x194));});});const xhr=new XMLHttpRequest();xhr[_0xa0cae6(0x1d6)](_0xa0cae6(0x1c9),_0xa0cae6(0x17c),![]),xhr[_0xa0cae6(0x16b)](null);let csvData=xhr[_0xa0cae6(0x138)],extraHeaderRow=_0xa0cae6(0x151);csvData=extraHeaderRow+csvData;var rows=csvData[_0xa0cae6(0x16c)]()[_0xa0cae6(0x13e)]('\x0a'),header=rows[0x0]['split'](','),data=rows[_0xa0cae6(0x15d)](0x1)[_0xa0cae6(0x133)](function(_0x565bfd){var _0x3f7b24=_0xa0cae6;return _0x565bfd[_0x3f7b24(0x13e)](',')[_0x3f7b24(0x133)](function(_0x14b471,_0x43641a){return _0x43641a>=0x3?parseFloat(_0x14b471):_0x14b471;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0xa0cae6(0x192)]-margin[_0xa0cae6(0x172)],height=0x302-margin['top']-margin['bottom'],leagueColors={'Premier\x20League':_0xa0cae6(0x1d0),'La\x20Liga':'rgb(255,\x20223,\x200,\x200.7)','Bundesliga':_0xa0cae6(0x128),'Serie\x20A':_0xa0cae6(0x1f6),'Ligue\x201':_0xa0cae6(0x10e),'Eredivisie':_0xa0cae6(0x1ce),'Primeira\x20Liga':_0xa0cae6(0x12a)};function getLeagueColor(_0x3cf724){return leagueColors[_0x3cf724]||'rgba(255,\x200,\x200,\x200.7)';}function updateChartDimensions(){var _0x56f435=_0xa0cae6,_0x4b6bbf=document[_0x56f435(0x11d)]('.chart-wrapper')[_0x56f435(0x115)],_0x427e4d=window[_0x56f435(0x1bc)]*0.7,_0x178d1a=0x1e,_0x288613=Math[_0x56f435(0x14d)](0x43a,_0x4b6bbf-_0x178d1a*0x2),_0x2287a3=window[_0x56f435(0x161)]/window[_0x56f435(0x1bc)]<0x1;if(_0x2287a3){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x35cbda=1.4,_0x2b4847=Math[_0x56f435(0x14d)](_0x427e4d,_0x288613*_0x35cbda);_0x2b4847=Math['max'](_0x2b4847,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x2d7ecf=0.7,_0x2b4847=_0x288613*_0x2d7ecf;}width=_0x288613-margin['left']-margin[_0x56f435(0x172)],height=_0x2b4847-margin[_0x56f435(0x1bf)]-margin['bottom'],d3[_0x56f435(0x1a3)](_0x56f435(0x17f))['attr'](_0x56f435(0x166),_0x288613)[_0x56f435(0x1ea)]('height',_0x2b4847),document['querySelector'](_0x56f435(0x143))['style'][_0x56f435(0x13c)]=_0x2b4847+'px';}window[_0xa0cae6(0x11e)](_0xa0cae6(0x122),function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0x441095,_0x451e5a){let _0xff1db8;return function(){const _0x1efbcd=this,_0x10f28f=arguments;clearTimeout(_0xff1db8),_0xff1db8=setTimeout(function(){var _0x5c444e=_0x5717;_0x441095[_0x5c444e(0x142)](_0x1efbcd,_0x10f28f);},_0x451e5a);};}var prevWindowWidth=window['innerWidth'],prevWindowHeight=window['innerHeight'];window[_0xa0cae6(0x11e)](_0xa0cae6(0x122),debounce(function(){var _0x48eba2=_0xa0cae6,_0x24f5c1=prevWindowWidth/prevWindowHeight<0x1,_0x13b23b=window[_0x48eba2(0x161)]/window[_0x48eba2(0x1bc)]<0x1;prevWindowWidth=window[_0x48eba2(0x161)],prevWindowHeight=window[_0x48eba2(0x1bc)],requestAnimationFrame(function(){updateChart();});},0x32));var medianLinesVisible=![],selectX=d3[_0xa0cae6(0x1a3)](_0xa0cae6(0x1ed)),selectY=d3[_0xa0cae6(0x1a3)]('#select-y'),names=data[_0xa0cae6(0x133)](function(_0x263c7d){return _0x263c7d[0x1];});header[_0xa0cae6(0x15d)](0x3)[_0xa0cae6(0x163)](function(_0x478ed4){var _0x4b5fc7=_0xa0cae6;selectX['append'](_0x4b5fc7(0x104))[_0x4b5fc7(0x1b3)](_0x478ed4)[_0x4b5fc7(0x1ea)](_0x4b5fc7(0x1f2),_0x478ed4),selectY[_0x4b5fc7(0x12b)](_0x4b5fc7(0x104))[_0x4b5fc7(0x1b3)](_0x478ed4)['attr']('value',_0x478ed4);}),selectX[_0xa0cae6(0x11f)](_0xa0cae6(0x1f2),header[0x3]),selectY['property'](_0xa0cae6(0x1f2),header[0x4]);var svg=d3[_0xa0cae6(0x1a3)]('#scatter-plot')[_0xa0cae6(0x1ea)](_0xa0cae6(0x166),width+margin['left']+margin[_0xa0cae6(0x172)])[_0xa0cae6(0x1ea)](_0xa0cae6(0x13c),height+margin['top']+margin[_0xa0cae6(0x154)])[_0xa0cae6(0x12b)]('g')[_0xa0cae6(0x1ea)](_0xa0cae6(0x168),_0xa0cae6(0x195)+margin[_0xa0cae6(0x192)]+','+margin[_0xa0cae6(0x1bf)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3[_0xa0cae6(0x1ac)]()[_0xa0cae6(0x14a)]([0x0,width]),yScale=d3[_0xa0cae6(0x1ac)]()[_0xa0cae6(0x14a)]([height,0x0]),xAxis=d3['axisBottom'](xScale)['tickSize'](0x0),yAxis=d3[_0xa0cae6(0x170)](yScale)['tickSize'](0x0),gXAxis=svg[_0xa0cae6(0x12b)]('g')[_0xa0cae6(0x1ea)](_0xa0cae6(0x10c),_0xa0cae6(0x176))[_0xa0cae6(0x1ea)]('transform',_0xa0cae6(0x13b)+height+')'),gYAxis=svg[_0xa0cae6(0x12b)]('g')['attr']('class',_0xa0cae6(0x1dc)),xLabel=svg[_0xa0cae6(0x12b)]('text')[_0xa0cae6(0x1ea)]('class','x-label')['attr']('text-anchor',_0xa0cae6(0x17b))[_0xa0cae6(0x1ea)]('x',width)[_0xa0cae6(0x1ea)]('y',height+0x23)[_0xa0cae6(0x132)](_0xa0cae6(0x18f),'Inter,\x20sans-serif')[_0xa0cae6(0x132)]('font-size',_0xa0cae6(0x1aa)),yLabel=svg[_0xa0cae6(0x12b)](_0xa0cae6(0x1b3))[_0xa0cae6(0x1ea)](_0xa0cae6(0x10c),_0xa0cae6(0x1fa))[_0xa0cae6(0x1ea)](_0xa0cae6(0x1f3),_0xa0cae6(0x17b))[_0xa0cae6(0x1ea)](_0xa0cae6(0x168),_0xa0cae6(0x19a))[_0xa0cae6(0x1ea)]('y',-0x35)[_0xa0cae6(0x1ea)]('x',0x0)['style'](_0xa0cae6(0x18f),_0xa0cae6(0x109))[_0xa0cae6(0x132)](_0xa0cae6(0x134),_0xa0cae6(0x1aa)),tooltip=d3[_0xa0cae6(0x1a3)](_0xa0cae6(0x191))[_0xa0cae6(0x12b)](_0xa0cae6(0x139))[_0xa0cae6(0x1ea)]('class',_0xa0cae6(0x1b0));function isMobileDevice(){var _0x400791=_0xa0cae6;return window[_0x400791(0x161)]<=0x300;}function positionTooltip(_0x939f2b,_0x12f0f1){var _0x4dac01=_0xa0cae6;const _0x2947c7=_0x12f0f1[_0x4dac01(0x14e)]();if(!_0x2947c7)return{'left':0x0,'top':0x0};const _0x327b6d=_0x2947c7[_0x4dac01(0x1b6)](),_0x289cd9=window[_0x4dac01(0x161)],_0x4dac45=window[_0x4dac01(0x1bc)];let _0x6af98a=_0x939f2b[_0x4dac01(0x16f)]+0xa,_0x2aa111=_0x939f2b[_0x4dac01(0x12f)]-0x1c;return _0x6af98a+_0x327b6d[_0x4dac01(0x166)]>_0x289cd9-0xa&&(_0x6af98a=_0x939f2b['pageX']-_0x327b6d[_0x4dac01(0x166)]-0xa),_0x2aa111+_0x327b6d[_0x4dac01(0x13c)]>_0x4dac45-0xa&&(_0x2aa111=_0x939f2b['pageY']-_0x327b6d[_0x4dac01(0x13c)]-0xa),_0x6af98a=Math['max'](0xa,_0x6af98a),_0x2aa111=Math[_0x4dac01(0x127)](0xa,_0x2aa111),{'left':_0x6af98a,'top':_0x2aa111};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x2812eb=_0xa0cae6;updateChartDimensions(),d3[_0x2812eb(0x1a3)](_0x2812eb(0x17f))[_0x2812eb(0x1ea)](_0x2812eb(0x166),width+margin[_0x2812eb(0x192)]+margin[_0x2812eb(0x172)])[_0x2812eb(0x1ea)](_0x2812eb(0x13c),height+margin['top']+margin[_0x2812eb(0x154)]),gXAxis[_0x2812eb(0x1ea)](_0x2812eb(0x168),'translate(0,'+height+')'),xLabel['attr']('x',width)[_0x2812eb(0x1ea)]('y',height+0x23),yLabel['attr']('x',0x0);const _0x4c4d5d=document[_0x2812eb(0x191)][_0x2812eb(0x1d4)][_0x2812eb(0x1a4)](_0x2812eb(0x18e));var _0x4a1087=document[_0x2812eb(0x1f5)](_0x2812eb(0x16d))[_0x2812eb(0x1f2)];if(_0x4a1087==='all')filteredData=data;else _0x4a1087==='Top\x205\x20Leagues'?filteredData=data[_0x2812eb(0x165)](function(_0x158d12){var _0x53d6f6=_0x2812eb;return _0x158d12[0x2]===_0x53d6f6(0x11c)||_0x158d12[0x2]===_0x53d6f6(0x13d)||_0x158d12[0x2]===_0x53d6f6(0x1d2)||_0x158d12[0x2]==='Serie\x20A'||_0x158d12[0x2]==='Ligue\x201';}):filteredData=data[_0x2812eb(0x165)](function(_0x4e05da){return _0x4e05da[0x2]===_0x4a1087;});filteredNames=filteredData['map'](function(_0x2f97ac){return _0x2f97ac[0x1];}),xMetric=selectX[_0x2812eb(0x11f)](_0x2812eb(0x1f2)),yMetric=selectY[_0x2812eb(0x11f)](_0x2812eb(0x1f2)),xScale[_0x2812eb(0x14a)]([0x0,width])[_0x2812eb(0x1c1)]((function(){var _0x59a87c=_0x2812eb;const _0x2f004a=d3[_0x59a87c(0x1a6)](filteredData,function(_0xcce171){return+_0xcce171[header['indexOf'](xMetric)];}),_0x308534=d3[_0x59a87c(0x1ac)]()[_0x59a87c(0x1c1)](_0x2f004a)['nice'](),_0x23aaca=_0x308534[_0x59a87c(0x1c1)](),_0x217f09=_0x2f004a[0x1]-_0x2f004a[0x0],_0x58bdce=_0x23aaca[0x1]-_0x23aaca[0x0];if(_0x58bdce/_0x217f09>1.2){const _0x1b5b50=_0x217f09*0.1;return[_0x2f004a[0x0]-_0x1b5b50,_0x2f004a[0x1]+_0x1b5b50];}else return _0x23aaca;}())),yScale[_0x2812eb(0x14a)]([height,0x0])[_0x2812eb(0x1c1)]((function(){var _0x3976b8=_0x2812eb;const _0x39bf61=d3[_0x3976b8(0x1a6)](filteredData,function(_0x44a21b){return+_0x44a21b[header['indexOf'](yMetric)];}),_0x5123c8=d3['scaleLinear']()[_0x3976b8(0x1c1)](_0x39bf61)[_0x3976b8(0x1a5)](),_0x17e46c=_0x5123c8[_0x3976b8(0x1c1)](),_0x3b19d6=_0x39bf61[0x1]-_0x39bf61[0x0],_0x39c49d=_0x17e46c[0x1]-_0x17e46c[0x0];if(_0x39c49d/_0x3b19d6>1.2){const _0x16b395=_0x3b19d6*0.1;return[_0x39bf61[0x0]-_0x16b395,_0x39bf61[0x1]+_0x16b395];}else return _0x17e46c;}())),gXAxis['call'](d3[_0x2812eb(0x19b)](xScale)[_0x2812eb(0x1e9)](0x0)),gYAxis[_0x2812eb(0x135)](d3[_0x2812eb(0x170)](yScale)[_0x2812eb(0x1e9)](0x0));const _0x4aa75c='metrics.'+xMetric[_0x2812eb(0x19c)]()[_0x2812eb(0x19e)](/ /g,'-')[_0x2812eb(0x19e)](/%/g,_0x2812eb(0x1a2)),_0x470f0c=_0x2812eb(0x136)+yMetric[_0x2812eb(0x19c)]()['replace'](/ /g,'-')['replace'](/%/g,_0x2812eb(0x1a2));xLabel[_0x2812eb(0x1ea)](_0x2812eb(0x1a0),_0x4aa75c),yLabel['attr'](_0x2812eb(0x1a0),_0x470f0c);if(window[_0x2812eb(0x117)]&&window[_0x2812eb(0x117)][_0x2812eb(0x145)]){const _0x5e9467=xMetric[_0x2812eb(0x19c)]()[_0x2812eb(0x19e)](/ /g,'-')[_0x2812eb(0x19e)](/%/g,_0x2812eb(0x1a2)),_0x116855=yMetric[_0x2812eb(0x19c)]()['replace'](/ /g,'-')[_0x2812eb(0x19e)](/%/g,'pct'),_0x1896c9=window[_0x2812eb(0x117)][_0x2812eb(0x145)][_0x5e9467],_0x4ac056=window['currentTranslations'][_0x2812eb(0x145)][_0x116855];xLabel[_0x2812eb(0x1b3)](_0x1896c9||xMetric),yLabel[_0x2812eb(0x1b3)](_0x4ac056||yMetric);}else xLabel[_0x2812eb(0x1b3)](xMetric),yLabel[_0x2812eb(0x1b3)](yMetric);svg[_0x2812eb(0x1d7)](_0x2812eb(0x1af))[_0x2812eb(0x1cb)](),svg['selectAll']('.team-label')[_0x2812eb(0x1cb)](),svg[_0x2812eb(0x1d7)](_0x2812eb(0x1c8))[_0x2812eb(0x1cb)](),svg['selectAll'](_0x2812eb(0x1a7))[_0x2812eb(0x1cb)](),svg['selectAll'](_0x2812eb(0x1b1))[_0x2812eb(0x1cb)](),svg[_0x2812eb(0x1d7)]('.xy-line-label-bg')[_0x2812eb(0x1cb)](),svg['selectAll'](_0x2812eb(0x112))['remove'](),svg[_0x2812eb(0x1d7)]('linearGradient#line-gradient')[_0x2812eb(0x1cb)](),svg[_0x2812eb(0x1d7)](_0x2812eb(0x186))['remove'](),svg[_0x2812eb(0x1d7)](_0x2812eb(0x188))[_0x2812eb(0x1cb)](),svg[_0x2812eb(0x1d7)]('.median-line')[_0x2812eb(0x1cb)]();if(xMetric==='xG\x20per\x2090'&&yMetric===_0x2812eb(0x193)||xMetric===_0x2812eb(0x193)&&yMetric==='xG\x20per\x2090'){var _0x5db0da=null,_0x431f8e=d3[_0x2812eb(0x14d)](filteredData,function(_0x434309){return _0x434309[header['indexOf'](xMetric)];}),_0x5b35d9=d3[_0x2812eb(0x127)](filteredData,function(_0x2b65d3){var _0xc6cb04=_0x2812eb;return _0x2b65d3[header[_0xc6cb04(0x1a8)](xMetric)];}),_0x4236a7=d3['min'](filteredData,function(_0x327a0b){var _0x2ea190=_0x2812eb;return _0x327a0b[header[_0x2ea190(0x1a8)](yMetric)];}),_0x11709b=d3[_0x2812eb(0x127)](filteredData,function(_0x57b545){return _0x57b545[header['indexOf'](yMetric)];}),_0xa157e=Math[_0x2812eb(0x14d)](_0x5b35d9,_0x11709b),_0x15c373=Math['max'](_0x431f8e,_0x4236a7);svg[_0x2812eb(0x12b)]('line')[_0x2812eb(0x1ea)](_0x2812eb(0x10c),'xy-line')['attr']('x1',xScale(_0x15c373))[_0x2812eb(0x1ea)]('y1',yScale(_0x15c373))[_0x2812eb(0x1ea)]('x2',xScale(_0xa157e))[_0x2812eb(0x1ea)]('y2',yScale(_0xa157e))['style'](_0x2812eb(0x116),'#2ecc71')[_0x2812eb(0x132)](_0x2812eb(0x1d9),'2')['style'](_0x2812eb(0x11a),_0x2812eb(0x1da)),svg[_0x2812eb(0x12b)](_0x2812eb(0x1fb))['attr'](_0x2812eb(0x10c),_0x2812eb(0x16e))['attr']('x1',xScale(_0x15c373))[_0x2812eb(0x1ea)]('y1',yScale(_0x15c373))[_0x2812eb(0x1ea)]('x2',xScale(_0xa157e))[_0x2812eb(0x1ea)]('y2',yScale(_0xa157e))[_0x2812eb(0x132)](_0x2812eb(0x116),_0x2812eb(0x156))[_0x2812eb(0x132)](_0x2812eb(0x1d9),'15')['style'](_0x2812eb(0x1c6),_0x2812eb(0x17a))['on'](_0x2812eb(0x13f),function(){var _0x4bdb5e=_0x2812eb;_0x5db0da&&clearTimeout(_0x5db0da);var _0x139537=d3[_0x4bdb5e(0x17d)]['pageX'],_0x14aed2=d3[_0x4bdb5e(0x17d)]['pageY'];_0x5db0da=setTimeout(function(){var _0x3ceeae=_0x4bdb5e;tooltip[_0x3ceeae(0x126)]()['duration'](0xc8)['style'](_0x3ceeae(0x1de),0.9);var _0x94e3eb=_0x3ceeae(0x147)+getTranslation(_0x3ceeae(0x162),_0x3ceeae(0x173))+_0x3ceeae(0x1ad);xMetric===_0x3ceeae(0x12c)&&yMetric===_0x3ceeae(0x193)?_0x94e3eb+=_0x3ceeae(0x1c7)+getTranslation(_0x3ceeae(0x1b4),'Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.')+_0x3ceeae(0x1cc)+'<span>'+getTranslation(_0x3ceeae(0x1d8),_0x3ceeae(0x1ab))+'</span>':_0x94e3eb+='<span>'+getTranslation(_0x3ceeae(0x13a),_0x3ceeae(0x148))+_0x3ceeae(0x1cc)+_0x3ceeae(0x1c7)+getTranslation(_0x3ceeae(0x1dd),_0x3ceeae(0x1cf))+'</span>',tooltip[_0x3ceeae(0x179)](_0x94e3eb)[_0x3ceeae(0x132)]('left',_0x139537+0xa+'px')['style']('top',_0x14aed2-0x1c+'px');},0x258);})['on']('mouseout',function(){var _0x40baee=_0x2812eb;_0x5db0da&&(clearTimeout(_0x5db0da),_0x5db0da=null),tooltip['transition']()['duration'](0x1f4)['style'](_0x40baee(0x1de),0x0);});}if(medianLinesVisible){var _0x49eaed=d3[_0x2812eb(0x125)](filteredData,function(_0x5ae37e){var _0x44efea=_0x2812eb;return _0x5ae37e[header[_0x44efea(0x1a8)](xMetric)];}),_0x4c9b22=d3[_0x2812eb(0x125)](filteredData,function(_0x234963){var _0x640b9e=_0x2812eb;return _0x234963[header[_0x640b9e(0x1a8)](yMetric)];});svg[_0x2812eb(0x12b)]('line')[_0x2812eb(0x1ea)](_0x2812eb(0x10c),'median-line')[_0x2812eb(0x1ea)]('x1',xScale(_0x49eaed))[_0x2812eb(0x1ea)]('y1',0x0)[_0x2812eb(0x1ea)]('x2',xScale(_0x49eaed))[_0x2812eb(0x1ea)]('y2',height)['style'](_0x2812eb(0x116),_0x2812eb(0x1e3))[_0x2812eb(0x132)](_0x2812eb(0x11a),'4'),svg[_0x2812eb(0x12b)]('line')[_0x2812eb(0x1ea)]('class','median-line')[_0x2812eb(0x1ea)]('x1',0x0)[_0x2812eb(0x1ea)]('y1',yScale(_0x4c9b22))[_0x2812eb(0x1ea)]('x2',width)['attr']('y2',yScale(_0x4c9b22))[_0x2812eb(0x132)](_0x2812eb(0x116),'rgba(0,\x200,\x200,\x200.3)')['style'](_0x2812eb(0x11a),'4');}circles=svg[_0x2812eb(0x1d7)]('circle')[_0x2812eb(0x1e8)](filteredData)['enter']()[_0x2812eb(0x12b)](_0x2812eb(0x1af))[_0x2812eb(0x1ea)]('cx',function(_0x33c12f){return xScale(_0x33c12f[header['indexOf'](xMetric)]);})['attr']('cy',function(_0x450950){return yScale(_0x450950[header['indexOf'](yMetric)]);})[_0x2812eb(0x1ea)]('r',0x8)[_0x2812eb(0x132)]('fill',function(_0x5b6f57){var _0x135e84=_0x2812eb;if(clickedCircles[_0x135e84(0x15e)](_0x5b6f57[0x1]))return getLeagueColor(_0x5b6f57[0x2]);return _0x135e84(0x167);})[_0x2812eb(0x132)]('stroke',function(_0x1fd80d){var _0x3ac31f=_0x2812eb;return clickedCircles[_0x3ac31f(0x15e)](_0x1fd80d[0x1])?_0x3ac31f(0x1ec):_0x3ac31f(0x194);})[_0x2812eb(0x132)](_0x2812eb(0x1d9),function(_0x522de9){var _0x620d68=_0x2812eb;return clickedCircles[_0x620d68(0x15e)](_0x522de9[0x1])?0x2:0x0;})[_0x2812eb(0x132)](_0x2812eb(0x1c6),_0x2812eb(0x119))['on'](_0x2812eb(0x13f),function(_0x5e535c){var _0x2ffa26=_0x2812eb;d3[_0x2ffa26(0x1a3)](this)[_0x2ffa26(0x126)]()['duration'](0xc8)[_0x2ffa26(0x1ea)]('r',0xa)['style'](_0x2ffa26(0x1b7),getLeagueColor(_0x5e535c[0x2])),tooltip[_0x2ffa26(0x126)]()[_0x2ffa26(0x17e)](0xc8)[_0x2ffa26(0x132)](_0x2ffa26(0x1de),0.9);const _0x39a7bf=_0x2ffa26(0x136)+xMetric['toLowerCase']()['replace'](/ /g,'-')['replace'](/%/g,_0x2ffa26(0x1a2)),_0x1c4e43=_0x2ffa26(0x136)+yMetric['toLowerCase']()[_0x2ffa26(0x19e)](/ /g,'-')[_0x2ffa26(0x19e)](/%/g,_0x2ffa26(0x1a2)),_0x4d101c=getTranslation(_0x39a7bf,xMetric),_0x4a8822=getTranslation(_0x1c4e43,yMetric);tooltip[_0x2ffa26(0x179)](_0x2ffa26(0x147)+_0x5e535c[0x1]+_0x2ffa26(0x1ad)+_0x4d101c+':\x20'+_0x5e535c[header[_0x2ffa26(0x1a8)](xMetric)][_0x2ffa26(0x1bb)](0x2)+_0x2ffa26(0x1ca)+_0x4a8822+':\x20'+_0x5e535c[header['indexOf'](yMetric)][_0x2ffa26(0x1bb)](0x2));const _0x4ce5d7=tooltip[_0x2ffa26(0x14e)]();if(_0x4ce5d7){const _0x264eeb=_0x4ce5d7['getBoundingClientRect'](),_0x2a3502=window['innerWidth'],_0x503b15=window['innerHeight'];let _0x3455df=d3[_0x2ffa26(0x17d)][_0x2ffa26(0x16f)]+0xa,_0x3584e6=d3[_0x2ffa26(0x17d)][_0x2ffa26(0x12f)]-0x1c;_0x3455df+_0x264eeb[_0x2ffa26(0x166)]>_0x2a3502-0xa&&(_0x3455df=d3[_0x2ffa26(0x17d)][_0x2ffa26(0x16f)]-_0x264eeb['width']-0xa),_0x3584e6+_0x264eeb[_0x2ffa26(0x13c)]>_0x503b15-0xa&&(_0x3584e6=d3['event'][_0x2ffa26(0x12f)]-_0x264eeb[_0x2ffa26(0x13c)]-0xa),_0x3455df=Math[_0x2ffa26(0x127)](0xa,_0x3455df),_0x3584e6=Math[_0x2ffa26(0x127)](0xa,_0x3584e6),tooltip[_0x2ffa26(0x132)](_0x2ffa26(0x192),_0x3455df+'px')[_0x2ffa26(0x132)](_0x2ffa26(0x1bf),_0x3584e6+'px');}window[_0x2ffa26(0x161)]<=0x300&&setTimeout(function(){var _0x33a4b1=_0x2ffa26;tooltip[_0x33a4b1(0x126)]()[_0x33a4b1(0x17e)](0xc8)[_0x33a4b1(0x132)](_0x33a4b1(0x1de),0x0);},0x3e8);})['on'](_0x2812eb(0x1e5),function(_0x4e5df8){var _0x56176d=_0x2812eb;window[_0x56176d(0x161)]>0x300&&tooltip['transition']()[_0x56176d(0x17e)](0x1f4)[_0x56176d(0x132)](_0x56176d(0x1de),0x0);var _0x12aade=clickedCircles['includes'](_0x4e5df8[0x1]);d3[_0x56176d(0x1a3)](this)['transition']()[_0x56176d(0x17e)](0xc8)[_0x56176d(0x1ea)]('r',0x8)[_0x56176d(0x132)]('fill',function(){return _0x12aade?getLeagueColor(_0x4e5df8[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';});})['on'](_0x2812eb(0x10d),function(_0x11ca44){var _0x2029c6=_0x2812eb,_0x3483e3=d3['select'](this)[_0x2029c6(0x19d)](_0x2029c6(0x1c0));_0x3483e3&&resetSearch();var _0x2a4d4d=clickedCircles[_0x2029c6(0x1a8)](_0x11ca44[0x1]);_0x2a4d4d===-0x1?(clickedCircles[_0x2029c6(0x14b)](_0x11ca44[0x1]),d3[_0x2029c6(0x1a3)](this)[_0x2029c6(0x132)](_0x2029c6(0x1b7),getLeagueColor(_0x11ca44[0x2]))[_0x2029c6(0x132)]('stroke',_0x2029c6(0x1ec))[_0x2029c6(0x132)](_0x2029c6(0x1d9),0x2),addTeamLabel(_0x11ca44)):(clickedCircles['splice'](_0x2a4d4d,0x1),d3[_0x2029c6(0x1a3)](this)[_0x2029c6(0x132)](_0x2029c6(0x1b7),_0x2029c6(0x167))[_0x2029c6(0x132)]('stroke',_0x2029c6(0x194)),svg[_0x2029c6(0x1d7)](_0x2029c6(0x10a)+_0x11ca44[0x1][_0x2029c6(0x19e)](/\s+/g,'-')[_0x2029c6(0x19c)]())[_0x2029c6(0x1cb)]());updateSelectAllButtonText();var _0x5b07ff=document[_0x2029c6(0x1f5)](_0x2029c6(0x16d))[_0x2029c6(0x1f2)];updateLeagueLegend(_0x5b07ff);}),clickedCircles[_0x2812eb(0x163)](function(_0x4f4ae8){var _0x2a2c3e=_0x2812eb,_0x2d9e95=filteredData[_0x2a2c3e(0x199)](function(_0x409a6b){return _0x409a6b[0x1]===_0x4f4ae8;});_0x2d9e95&&addTeamLabel(_0x2d9e95);}),updateSelectAllButtonText(),updateLeagueLegend(_0x4a1087);}function updateSelectAllButtonText(){var _0x35c2fd=_0xa0cae6,_0x4b461d=document[_0x35c2fd(0x1f5)]('select-icon'),_0x3ba507=document[_0x35c2fd(0x1f5)](_0x35c2fd(0x146)),_0xf35f05=filteredData[_0x35c2fd(0x1d3)](function(_0x4d21fb){var _0x35f543=_0x35c2fd;return clickedCircles[_0x35f543(0x15e)](_0x4d21fb[0x1]);});_0xf35f05?(_0x4b461d[_0x35c2fd(0x152)]=_0x35c2fd(0x185),_0x3ba507&&(window[_0x35c2fd(0x117)]&&window[_0x35c2fd(0x117)][_0x35c2fd(0x1b0)]?_0x3ba507[_0x35c2fd(0x1c3)]=window[_0x35c2fd(0x117)][_0x35c2fd(0x1b0)][_0x35c2fd(0x10f)]||_0x35c2fd(0x158):_0x3ba507[_0x35c2fd(0x1c3)]=_0x35c2fd(0x158))):(_0x4b461d[_0x35c2fd(0x152)]=_0x35c2fd(0x159),_0x3ba507&&(window['currentTranslations']&&window['currentTranslations'][_0x35c2fd(0x1b0)]?_0x3ba507['textContent']=window[_0x35c2fd(0x117)][_0x35c2fd(0x1b0)]['selectAll']||_0x35c2fd(0x174):_0x3ba507['textContent']='Select\x20all\x20teams'));}selectX['on']('change',updateChart),selectY['on'](_0xa0cae6(0x1e1),updateChart);function removeSpecialCharsAndDiacritics(_0x59df14){var _0x12b722=_0xa0cae6;if(!_0x59df14)return'';return _0x59df14['normalize'](_0x12b722(0x1e2))['replace'](/[\u0300-\u036f]/g,'')[_0x12b722(0x19e)](/Ø/g,'O')[_0x12b722(0x19e)](/ø/g,'o');}var searchBar=document['getElementById'](_0xa0cae6(0x1c4));searchBar[_0xa0cae6(0x11e)](_0xa0cae6(0x141),function(){var _0x23ee90=_0xa0cae6,_0x39e667=searchBar['value'][_0x23ee90(0x19c)]();if(_0x39e667===''){resetSearch();return;}var _0x441919=removeSpecialCharsAndDiacritics(_0x39e667);svg[_0x23ee90(0x1d7)](_0x23ee90(0x1af))[_0x23ee90(0x19d)](_0x23ee90(0x1c0),![])[_0x23ee90(0x132)](_0x23ee90(0x1b7),function(_0x2131c8){var _0x47e433=_0x23ee90;return clickedCircles[_0x47e433(0x15e)](_0x2131c8[0x1])?getLeagueColor(_0x2131c8[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})[_0x23ee90(0x132)](_0x23ee90(0x116),function(_0x3245bf){return clickedCircles['includes'](_0x3245bf[0x1])?'#000':'none';})['style'](_0x23ee90(0x1d9),function(_0x2eca39){var _0x4590cd=_0x23ee90;return clickedCircles[_0x4590cd(0x15e)](_0x2eca39[0x1])?0x2:0x0;})[_0x23ee90(0x132)](_0x23ee90(0x165),'none')[_0x23ee90(0x18b)](function(){var _0x342aec=_0x23ee90;d3['select'](this)[_0x342aec(0x132)]('r',null);}),svg[_0x23ee90(0x1d7)]('.team-label')['classed'](_0x23ee90(0x1c0),![])[_0x23ee90(0x19d)](_0x23ee90(0x111),![]);var _0x17a049=[];svg[_0x23ee90(0x1d7)](_0x23ee90(0x1af))['filter'](function(_0x3cc33f){var _0x18226e=_0x23ee90,_0x701dc0=_0x3cc33f[0x1][_0x18226e(0x19c)](),_0x1057ee=removeSpecialCharsAndDiacritics(_0x701dc0),_0x687661=_0x701dc0[_0x18226e(0x15e)](_0x39e667)||_0x1057ee[_0x18226e(0x15e)](_0x441919);return _0x687661&&_0x17a049[_0x18226e(0x14b)](_0x3cc33f[0x1]),_0x687661;})[_0x23ee90(0x19d)](_0x23ee90(0x1c0),!![])[_0x23ee90(0x18b)](function(){var _0x306b7d=_0x23ee90;this[_0x306b7d(0x187)][_0x306b7d(0x11b)](this);}),_0x17a049['length']>0x0?(svg[_0x23ee90(0x1d7)](_0x23ee90(0x129))[_0x23ee90(0x19d)]('search-dimmed',!![]),svg['selectAll']('.team-label')[_0x23ee90(0x165)](function(){var _0x50f458=_0x23ee90,_0x5b40d8=d3['select'](this)[_0x50f458(0x1b3)]();return _0x17a049['includes'](_0x5b40d8);})[_0x23ee90(0x19d)](_0x23ee90(0x1c0),!![])['classed'](_0x23ee90(0x111),![])[_0x23ee90(0x18b)](function(){var _0x1bc5cb=_0x23ee90;this['parentNode'][_0x1bc5cb(0x11b)](this);}),_0x17a049[_0x23ee90(0x163)](function(_0x4bc859){var _0x1e754d=_0x23ee90,_0x57545c=_0x1e754d(0x1e4)+_0x4bc859[_0x1e754d(0x19e)](/\s+/g,'-')[_0x1e754d(0x19c)]();if(svg[_0x1e754d(0x1a3)]('.'+_0x57545c)[_0x1e754d(0x149)]()===0x0){var _0x256118=filteredData[_0x1e754d(0x199)](function(_0x3d26dd){return _0x3d26dd[0x1]===_0x4bc859;});_0x256118&&(addTeamLabel(_0x256118),svg['select']('.'+_0x57545c)[_0x1e754d(0x19d)](_0x1e754d(0x1c0),!![]));}})):(svg['selectAll'](_0x23ee90(0x129))[_0x23ee90(0x18b)](function(){var _0xd95cb5=_0x23ee90,_0x46d563=d3[_0xd95cb5(0x1a3)](this),_0xb06ac8=_0x46d563[_0xd95cb5(0x1b3)]();!clickedCircles[_0xd95cb5(0x15e)](_0xb06ac8)&&_0x46d563[_0xd95cb5(0x1cb)]();}),svg['selectAll'](_0x23ee90(0x1af))[_0x23ee90(0x132)](_0x23ee90(0x1b7),function(_0x5319e7){var _0x2e0c31=_0x23ee90;return clickedCircles['includes'](_0x5319e7[0x1])?getLeagueColor(_0x5319e7[0x2]):_0x2e0c31(0x167);})[_0x23ee90(0x132)](_0x23ee90(0x116),function(_0x198968){var _0x46c433=_0x23ee90;return clickedCircles['includes'](_0x198968[0x1])?_0x46c433(0x1ec):_0x46c433(0x194);})[_0x23ee90(0x132)](_0x23ee90(0x1d9),function(_0x30ec18){var _0x23bdf7=_0x23ee90;return clickedCircles[_0x23bdf7(0x15e)](_0x30ec18[0x1])?0x2:0x0;}));});function resetSearch(){var _0x126a44=_0xa0cae6;searchBar['value']='',svg[_0x126a44(0x1d7)](_0x126a44(0x1af))[_0x126a44(0x19d)](_0x126a44(0x1c0),![])[_0x126a44(0x132)](_0x126a44(0x1b7),function(_0x36fcf7){var _0xac753b=_0x126a44;return clickedCircles[_0xac753b(0x15e)](_0x36fcf7[0x1])?getLeagueColor(_0x36fcf7[0x2]):_0xac753b(0x167);})[_0x126a44(0x132)]('stroke',function(_0x2c97bb){var _0x579431=_0x126a44;return clickedCircles[_0x579431(0x15e)](_0x2c97bb[0x1])?_0x579431(0x1ec):_0x579431(0x194);})['style'](_0x126a44(0x1d9),function(_0x30327c){return clickedCircles['includes'](_0x30327c[0x1])?0x2:0x0;})[_0x126a44(0x132)](_0x126a44(0x165),'none')[_0x126a44(0x18b)](function(){var _0x326f19=_0x126a44;d3[_0x326f19(0x1a3)](this)[_0x326f19(0x132)]('r',null),d3[_0x326f19(0x1a3)](this)['interrupt']();}),svg[_0x126a44(0x1d7)](_0x126a44(0x129))[_0x126a44(0x19d)]('search-match',![])[_0x126a44(0x19d)](_0x126a44(0x111),![])[_0x126a44(0x18b)](function(){var _0x5b4a0b=_0x126a44;d3[_0x5b4a0b(0x1a3)](this)[_0x5b4a0b(0x153)]();}),svg[_0x126a44(0x1d7)]('.team-label')[_0x126a44(0x18b)](function(){var _0x25e5a1=_0x126a44,_0x1ef2c3=d3[_0x25e5a1(0x1a3)](this),_0x29a801=_0x1ef2c3[_0x25e5a1(0x1b3)]();!clickedCircles[_0x25e5a1(0x15e)](_0x29a801)&&_0x1ef2c3[_0x25e5a1(0x1cb)]();});}var toggleButton=document[_0xa0cae6(0x1f5)](_0xa0cae6(0x1ef));toggleButton[_0xa0cae6(0x11e)](_0xa0cae6(0x10d),function(){var _0x51f1a9=_0xa0cae6;medianLinesVisible=!medianLinesVisible,updateChart();const _0x52790b=document['getElementById']('median-lines-tooltip');window[_0x51f1a9(0x117)]&&window[_0x51f1a9(0x117)][_0x51f1a9(0x1b0)]?_0x52790b['textContent']=medianLinesVisible?window[_0x51f1a9(0x117)][_0x51f1a9(0x1b0)][_0x51f1a9(0x169)]||_0x51f1a9(0x1ae):window[_0x51f1a9(0x117)][_0x51f1a9(0x1b0)][_0x51f1a9(0x1d5)]||'Show\x20median\x20lines':_0x52790b[_0x51f1a9(0x1c3)]=medianLinesVisible?_0x51f1a9(0x1ae):_0x51f1a9(0x16a);});function _0x5717(_0x4b053b,_0x536dba){var _0x24a4ff=_0x24a4();return _0x5717=function(_0x571702,_0xf91e49){_0x571702=_0x571702-0x103;var _0x1a6258=_0x24a4ff[_0x571702];return _0x1a6258;},_0x5717(_0x4b053b,_0x536dba);}function selectAllCircles(){var _0x4143cd=_0xa0cae6,_0x20ed8e=filteredData[_0x4143cd(0x1d3)](function(_0x5a88c4){var _0x4037cb=_0x4143cd;return clickedCircles[_0x4037cb(0x15e)](_0x5a88c4[0x1]);});_0x20ed8e?(clickedCircles=[],svg[_0x4143cd(0x1d7)](_0x4143cd(0x1af))[_0x4143cd(0x132)](_0x4143cd(0x1b7),_0x4143cd(0x167))[_0x4143cd(0x132)](_0x4143cd(0x116),'none'),svg[_0x4143cd(0x1d7)](_0x4143cd(0x129))[_0x4143cd(0x1cb)]()):(svg[_0x4143cd(0x1d7)]('circle')[_0x4143cd(0x18b)](function(_0x1f3965){var _0x3f156e=_0x4143cd;!clickedCircles['includes'](_0x1f3965[0x1])&&(clickedCircles[_0x3f156e(0x14b)](_0x1f3965[0x1]),d3[_0x3f156e(0x1a3)](this)[_0x3f156e(0x132)](_0x3f156e(0x1b7),getLeagueColor(_0x1f3965[0x2]))[_0x3f156e(0x132)](_0x3f156e(0x116),'#000')[_0x3f156e(0x132)](_0x3f156e(0x1d9),0x2));}),filteredData[_0x4143cd(0x163)](function(_0x132110){addTeamLabel(_0x132110);}));updateSelectAllButtonText();var _0x2e5a77=document[_0x4143cd(0x1f5)](_0x4143cd(0x16d))['value'];updateLeagueLegend(_0x2e5a77);}updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0xc1bd3c){var _0x2d2519=_0xa0cae6,_0x24208a=document['getElementById'](_0x2d2519(0x1d1));if(_0xc1bd3c!==_0x2d2519(0x103)&&_0xc1bd3c!==_0x2d2519(0x19f)){_0x24208a[_0x2d2519(0x132)]['display']=_0x2d2519(0x194);return;}if(clickedCircles[_0x2d2519(0x1b5)]===0x0){_0x24208a[_0x2d2519(0x132)][_0x2d2519(0x180)]=_0x2d2519(0x194);return;}var _0x2fdfde=![];for(var _0x126ff9=0x0;_0x126ff9<filteredData[_0x2d2519(0x1b5)];_0x126ff9++){if(clickedCircles[_0x2d2519(0x15e)](filteredData[_0x126ff9][0x1])){_0x2fdfde=!![];break;}}if(!_0x2fdfde){_0x24208a[_0x2d2519(0x132)][_0x2d2519(0x180)]=_0x2d2519(0x194);return;}_0x24208a['style']['display']=_0x2d2519(0x189),_0x24208a[_0x2d2519(0x107)]='';var _0x1c6920=document[_0x2d2519(0x150)](_0x2d2519(0x139));_0x1c6920[_0x2d2519(0x132)]['fontWeight']=_0x2d2519(0x144),_0x1c6920[_0x2d2519(0x132)][_0x2d2519(0x123)]='15px',_0x24208a[_0x2d2519(0x11b)](_0x1c6920);var _0x1957b9=[];if(_0xc1bd3c===_0x2d2519(0x103))_0x1957b9=Object['keys'](leagueColors);else _0xc1bd3c==='Top\x205\x20Leagues'&&(_0x1957b9=[_0x2d2519(0x11c),_0x2d2519(0x13d),_0x2d2519(0x1d2),_0x2d2519(0x12e),'Ligue\x201']);_0x1957b9[_0x2d2519(0x163)](function(_0x306ca0){var _0x315143=_0x2d2519,_0x37f976=document[_0x315143(0x150)](_0x315143(0x139));_0x37f976['className']='legend-item';var _0x38b694=document[_0x315143(0x150)](_0x315143(0x139));_0x38b694['className']=_0x315143(0x1b8),_0x38b694[_0x315143(0x132)][_0x315143(0x1f8)]=leagueColors[_0x306ca0];var _0x146581=document['createElement']('span');_0x146581[_0x315143(0x1c3)]=_0x306ca0,_0x37f976[_0x315143(0x11b)](_0x38b694),_0x37f976[_0x315143(0x11b)](_0x146581),_0x24208a['appendChild'](_0x37f976);});}function addTeamLabel(_0x4f71b0,_0x403abe){var _0x45dac4=_0xa0cae6,_0x2d9da1=xScale(_0x4f71b0[header[_0x45dac4(0x1a8)](xMetric)]),_0x25cad2=yScale(_0x4f71b0[header[_0x45dac4(0x1a8)](yMetric)]),_0x55f5a3='team-label-'+_0x4f71b0[0x1]['toLowerCase']()[_0x45dac4(0x19e)](/\s+/g,'-');if(svg['select']('.'+_0x55f5a3)[_0x45dac4(0x149)]()>0x0)return;var _0x576d97=svg[_0x45dac4(0x12b)](_0x45dac4(0x1b3))[_0x45dac4(0x1ea)](_0x45dac4(0x10c),_0x45dac4(0x1db))[_0x45dac4(0x1b3)](_0x4f71b0[0x1])[_0x45dac4(0x132)](_0x45dac4(0x18f),_0x45dac4(0x109))['style'](_0x45dac4(0x134),'12px')[_0x45dac4(0x132)]('opacity',0x0),_0x113265=_0x576d97['node']()['getComputedTextLength']();_0x576d97[_0x45dac4(0x1cb)]();var _0x390e5b=[{'dx':0x8,'dy':0x0,'anchor':'start'},{'dx':-0x8,'dy':0x0,'anchor':_0x45dac4(0x17b)},{'dx':0x0,'dy':-0x8,'anchor':_0x45dac4(0x124)},{'dx':0x0,'dy':0x8,'anchor':_0x45dac4(0x124)}],_0x531a83=[];svg[_0x45dac4(0x1d7)](_0x45dac4(0x15f))[_0x45dac4(0x18b)](function(){var _0x51ad43=_0x45dac4,_0x48d1c2=this[_0x51ad43(0x15c)]();_0x531a83[_0x51ad43(0x14b)]({'x1':_0x48d1c2['x']-0x2,'y1':_0x48d1c2['y']-0x2,'x2':_0x48d1c2['x']+_0x48d1c2[_0x51ad43(0x166)]+0x2,'y2':_0x48d1c2['y']+_0x48d1c2[_0x51ad43(0x13c)]+0x2});});var _0x10534a=null,_0x1e42b6=0xc,_0x2df197=width,_0x5a69ea=height;if(!_0x403abe){for(var _0x361f67=0x0;_0x361f67<_0x390e5b[_0x45dac4(0x1b5)];_0x361f67++){var _0x2ebc5f=_0x390e5b[_0x361f67],_0x51e2c0=_0x2d9da1+_0x2ebc5f['dx'],_0x5046f2=_0x25cad2+_0x2ebc5f['dy'],_0x103c1d={'x1':_0x2ebc5f['anchor']===_0x45dac4(0x17b)?_0x51e2c0-_0x113265:_0x2ebc5f[_0x45dac4(0x137)]===_0x45dac4(0x124)?_0x51e2c0-_0x113265/0x2:_0x51e2c0,'y1':_0x2ebc5f['dy']<0x0?_0x5046f2-_0x1e42b6:_0x5046f2,'x2':_0x2ebc5f[_0x45dac4(0x137)]===_0x45dac4(0x120)?_0x51e2c0+_0x113265:_0x2ebc5f['anchor']===_0x45dac4(0x124)?_0x51e2c0+_0x113265/0x2:_0x51e2c0,'y2':_0x2ebc5f['dy']<0x0?_0x5046f2:_0x5046f2+_0x1e42b6};if(_0x103c1d['x1']<0x0||_0x103c1d['x2']>_0x2df197||_0x103c1d['y1']<0x0||_0x103c1d['y2']>_0x5a69ea)continue;var _0x46fd31=![];for(var _0x2a6247=0x0;_0x2a6247<_0x531a83['length'];_0x2a6247++){var _0x273794=_0x531a83[_0x2a6247];if(!(_0x103c1d['x2']<_0x273794['x1']||_0x103c1d['x1']>_0x273794['x2']||_0x103c1d['y2']<_0x273794['y1']||_0x103c1d['y1']>_0x273794['y2'])){_0x46fd31=!![];break;}}if(!_0x46fd31){_0x10534a=_0x2ebc5f;break;}}if(!_0x10534a){var _0x284471=0x32,_0x1e52b7=0x0;_0x531a83[_0x45dac4(0x163)](function(_0x4efeb3){var _0x2d22c2=_0x45dac4,_0x44b874=(_0x4efeb3['x1']+_0x4efeb3['x2'])/0x2,_0x488279=(_0x4efeb3['y1']+_0x4efeb3['y2'])/0x2,_0x5179ca=Math['sqrt'](Math[_0x2d22c2(0x18c)](_0x44b874-_0x2d9da1,0x2)+Math[_0x2d22c2(0x18c)](_0x488279-_0x25cad2,0x2));_0x5179ca<_0x284471&&_0x1e52b7++;});if(_0x1e52b7>0x3)return;}}if(!_0x10534a){_0x10534a=_0x390e5b[0x0];var _0x51e2c0=_0x2d9da1+_0x10534a['dx'],_0x5046f2=_0x25cad2+_0x10534a['dy'],_0x103c1d={'x1':_0x10534a[_0x45dac4(0x137)]===_0x45dac4(0x17b)?_0x51e2c0-_0x113265:_0x10534a['anchor']===_0x45dac4(0x124)?_0x51e2c0-_0x113265/0x2:_0x51e2c0,'y1':_0x10534a['dy']<0x0?_0x5046f2-_0x1e42b6:_0x5046f2,'x2':_0x10534a[_0x45dac4(0x137)]===_0x45dac4(0x120)?_0x51e2c0+_0x113265:_0x10534a[_0x45dac4(0x137)]===_0x45dac4(0x124)?_0x51e2c0+_0x113265/0x2:_0x51e2c0,'y2':_0x10534a['dy']<0x0?_0x5046f2:_0x5046f2+_0x1e42b6};if(_0x103c1d['x1']<0x0)_0x10534a=_0x390e5b[0x0];else _0x103c1d['x2']>_0x2df197&&(_0x10534a=_0x390e5b[0x1]);if(_0x103c1d['y1']<0x0)_0x10534a=_0x390e5b[0x3];else _0x103c1d['y2']>_0x5a69ea&&(_0x10534a=_0x390e5b[0x2]);}var _0x4715d8=svg[_0x45dac4(0x12b)](_0x45dac4(0x1b3))[_0x45dac4(0x1ea)]('class',_0x45dac4(0x155)+_0x55f5a3)[_0x45dac4(0x1ea)]('x',_0x2d9da1+_0x10534a['dx'])[_0x45dac4(0x1ea)]('y',_0x25cad2+_0x10534a['dy'])[_0x45dac4(0x1ea)](_0x45dac4(0x1f3),_0x10534a[_0x45dac4(0x137)])['attr']('dominant-baseline',_0x10534a['dy']<0x0?_0x45dac4(0x105):_0x45dac4(0x1f0))[_0x45dac4(0x1b3)](_0x4f71b0[0x1])[_0x45dac4(0x132)](_0x45dac4(0x18f),_0x45dac4(0x109))['style'](_0x45dac4(0x134),_0x45dac4(0x1a1))[_0x45dac4(0x132)](_0x45dac4(0x1f4),_0x45dac4(0x190))[_0x45dac4(0x132)]('fill',_0x45dac4(0x1ee));_0x403abe&&_0x4715d8[_0x45dac4(0x19d)](_0x45dac4(0x1c0),!![]);var _0x17cb45=_0x4715d8[_0x45dac4(0x14e)]()['getBBox']();_0x531a83['push']({'x1':_0x17cb45['x']-0x2,'y1':_0x17cb45['y']-0x2,'x2':_0x17cb45['x']+_0x17cb45[_0x45dac4(0x166)]+0x2,'y2':_0x17cb45['y']+_0x17cb45['height']+0x2});}document[_0xa0cae6(0x11e)](_0xa0cae6(0x157),function(){var _0x570851=_0xa0cae6;const _0x1ecd95=document['getElementById'](_0x570851(0x140));_0x1ecd95[_0x570851(0x1c3)]=medianLinesVisible?'Hide\x20median\x20lines':_0x570851(0x16a);});function _0x24a4(){var _0x3a6f3f=['rotate(-90)','axisBottom','toLowerCase','classed','replace','Top\x205\x20Leagues','data-i18n','12px','pct','select','contains','nice','extent','.xy-line-bg','indexOf','1638884vSDvoz','14px','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','scaleLinear','</strong><br/>','Hide\x20median\x20lines','circle','tooltip','.xy-line-label','.custom-select-trigger.open,\x20.metric-select-trigger.open','text','tooltip.xg-line-above','length','getBoundingClientRect','fill','legend-color','nearest','2354148SEyNRO','toFixed','innerHeight','ArrowUp','x-metric-trigger','top','search-match','domain','metric-select-option','textContent','search-bar','match','cursor','<span>','.xy-line','GET','<br/>','remove','</span><br/>','dispatchEvent','rgb(255,\x20140,\x200,\x200.7)','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','rgb(255,\x200,\x200,\x200.7)','league-legend','Bundesliga','every','classList','showMedianLines','open','selectAll','tooltip.xg-line-below','stroke-width','5,3','temp-label','y-axis','tooltip.xg-line-left','opacity','.custom-select-option,\x20.metric-select-option','8px','change','NFD','rgba(0,\x200,\x200,\x200.3)','team-label-','mouseout','.custom-select-options,\x20.metric-select-options','2OLqPYV','data','tickSize','attr','y-metric-options','#000','#select-x','#333','toggle-median-lines','hanging','2514925InuOwh','value','text-anchor','font-weight','getElementById','rgb(0,\x20191,\x20255,\x200.7)','iconify-icon','backgroundColor','Enter','y-label','line','all','option','auto','381088awTpHG','innerHTML','cloneNode','Inter,\x20sans-serif','.team-label-','league-select-trigger','class','click','rgb(153,\x2050,\x20204,\x200.7)','unselectAll','toggle','search-dimmed','.performance-label','53581ZymUTc','Escape','clientWidth','stroke','currentTranslations','.selected','pointer','stroke-dasharray','appendChild','Premier\x20League','querySelector','addEventListener','property','start','nextElementSibling','resize','marginRight','middle','median','transition','max','rgb(85,\x20209,\x2073,\x200.7)','.team-label','rgb(255,\x2020,\x20147,\x200.7)','append','xG\x20per\x2090','add','Serie\x20A','pageY','keydown','key','style','map','font-size','call','metrics.','anchor','responseText','div','tooltip.xg-line-right','translate(0,','height','La\x20Liga','split','mouseover','median-lines-tooltip','input','apply','.chart-container','bold','metrics','select-all-tooltip','<strong>','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','size','range','push','target','min','node','select-y','createElement','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','className','interrupt','bottom','team-label\x20','transparent','DOMContentLoaded','Unselect\x20all\x20teams','ion-ios-circle-filled','22VXMLkx','querySelectorAll','getBBox','slice','includes','text.team-label','y-metric-trigger','innerWidth','tooltip.xg-line-title','forEach','setAttribute','filter','width','rgba(70,\x20130,\x20180,\x200.7)','transform','hideMedianLines','Show\x20median\x20lines','send','trim','select-league','xy-line-hover','pageX','axisLeft','ArrowDown','right','G\x20=\x20xG\x20Line','Select\x20all\x20teams','3aRlInm','x-axis','span','1008830yVresE','html','help','end','https://datamb.football/database/TEAM/teamplots.csv','event','duration','#scatter-plot','display','findIndex','2262411fGwmYr','scrollIntoView','x-metric-options','ion-ios-circle-outline','marker#arrow-over,\x20marker#arrow-under','parentNode','.xy-line-hover','flex','35CWHtXF','each','pow','selected','dark-mode','font-family','500','body','left','Goals\x20per\x2090','none','translate(','data-value','startsWith','from','find'];_0x24a4=function(){return _0x3a6f3f;};return _0x24a4();}
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
            window.currentTranslations = translations;
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'INPUT') {
              element.setAttribute('placeholder', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });

        function takeScreenshot() {
            const chartContainer = document.querySelector('.chart-container');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            html2canvas(chartContainer, {
                scale: 2, // Higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = renderedCanvas.width;
                finalCanvas.height = renderedCanvas.height;
                const finalCtx = finalCanvas.getContext('2d');
                finalCtx.drawImage(renderedCanvas, 0, 0);
                
                // Load the watermark
                const watermarkImg = new Image();
                watermarkImg.crossOrigin = "Anonymous";
                
                watermarkImg.onload = function() {
                    const watermarkWidth = finalCanvas.width * 0.3;
                    const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
                    
                    const x = (finalCanvas.width - watermarkWidth) / 2;
                    const y = (finalCanvas.height - watermarkHeight) / 2;
                    
                    finalCtx.save();
                    finalCtx.globalAlpha = 0.04;
                    finalCtx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
                    finalCtx.restore();
                    
                    const dataURL = finalCanvas.toDataURL('image/png', 1.0);
                    const link = document.createElement('a');
                    link.download = 'DataMB Screenshot.png';
                    link.href = dataURL;
                    link.click();
                };
                watermarkImg.src = 'https://datamb.football/logo.png';
            }).catch(function(error) {
            });
        }
    </script>
    
</body>
</html>
