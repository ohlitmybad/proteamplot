<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            background-color: var(--header-bg);
            display: flex;
            padding: 20px;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: relative;
            font-family: system-ui;
            top: 0;
            z-index: 100;
        }


        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .position-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .position-btn:hover, .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }
        
        .watermark-logo {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 100px;
            opacity: 0;
            z-index: 1;
            pointer-events: none; /* Ensure it doesn't interfere with chart interactions */
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }

        circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }


  
  .search-input-modal {
      display: none;
      position: fixed; 
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7); 
      z-index: 999; 
  }
  
  .search-input-container {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border-radius: 4px;
      z-index: 1000; 
  }
  
  #searchInput {
              width: 370px;
              padding: 12px;
              border: 3px solid #ccc;
              border-radius: 4px;
              font-size: 18.3px;
              outline: none;
              height: 50px;
              color: #000000;
              background-color: #fff;
              ;          }
  
          #autocompleteBox {
              width: 370px;
              max-height: 150px;
              overflow-y: auto;
              background-color: #fff;
          }
  
  
          #autocompleteBox ul {
              list-style: none;
              padding: 0;
              margin: 0;
          }
  
          #autocompleteBox li {
              margin: 0;
              padding: 5px;
          }
  
          #autocompleteBox {
              line-height: 2; 
              text-align: center !important;
  
          }
  
          #autocompleteBox a {
              text-decoration: none;
              font-family: Arial, sans-serif;
              text-align: center !important;
              color: #333 !important;
              cursor: pointer; 
          }
  
          #autocompleteBox li:hover {
              background-color: #f0f0f0;
          }
          #searchButton3 {
            padding: 8.5px;  /* Reduced from 10px */
  background-color: #0074d9;
  color: #fff;
  border: none;
  width: 34px;  /* Reduced from 40px */
  height: 34px;  /* Reduced from 40px */
  border-radius: 50%;
  cursor: pointer;
  font-size: 17px;  /* Reduced from 20px */
  }


  body.dark-mode .header .button10 {
      color: #aeaeae;
}
body.dark-mode .header .button10:hover {
  color: #2563eb;
background-color: #ffffff;
}

    body.dark-mode header a {
      color: #aeaeae;
}

body.dark-mode .header .logo img {
  opacity: 0.88;
}


body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

.header .logo {
  display: flex;
  align-items: center;
  margin-right: auto; /* Push logo to the left */
}

.header .logo img {
  height: 34px;
  width: auto;
  opacity: 0.84;
}
.header .logo-text {
  margin-left: 10px;
  font-size: 23px;
  font-weight: 600;
  transform: translateY(-1.1px); /* Move logo text slightly higher */
}

.header .navigation {
  display: flex;
  align-items: center;
  gap: 25px; /* Reduced gap between buttons */
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px); /* Center the navigation and move it higher */
}



.header .button10 {
  padding: 0.5rem 1rem;
  text-decoration: none;
  color: #333;
  line-height: 1.6;
  border-radius: 4px;
  transition: background-color 0.2s;
  font-size: 1.1rem;  /* Added larger font size */
}


.header .button10:hover {
  background-color: #f0f0f0;
  color: #2563eb;

}



/* Group search and language buttons */
.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto; /* Push buttons to the right */
  transform: translateY(-1.25px); /* Move search and language buttons higher */
}

header a {
      color: black;
      text-decoration: none;
    }

    .language-switcher-container {
  position: relative;
  display: none;
}

.language-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  color: #444444;
  display: flex;
  align-items: center;
  font-size: 17px;
}

.language-button iconify-icon {
  font-size: 24px;
  opacity: 0.7;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 10px;
  width: 200px;
  z-index: 1000;
}

.language-option {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  color: #444444;
  text-decoration: none;
}



.language-option iconify-icon {
  margin-right: 10px;
  font-size: 20px;
}

.language-dropdown.show {
  display: block;
}

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
@media screen and (max-width: 550px) { .header .navigation { display: none; } }

        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }

        .dark-mode .position-btn {
            background-color: #1a1a1a;
            color: var(--text-color);
            border: 1px solid #333;
        }

        .dark-mode .position-btn:hover, 
        .dark-mode .position-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 



        .dark-mode #searchButton3 {
            background-color: #0074d9;
            color: #fff;
        }


        .dark-mode .header .button10 {
            color: #aaa;
        }

        .dark-mode .header .button10:hover {
            color: #2563eb;
            background-color: #1a1a1a;
        }

        .dark-mode header a {
            color: #aaa;
        }

        .dark-mode .header .logo img {
            opacity: 0.9;
            filter: brightness(0.9);
        }

        .dark-mode .language-button {
            background-color: #0e0f0f;
            color: #aaa;
        }

        .dark-mode .language-button:hover {
            background-color: #1a1a1a;
        }

        .dark-mode .language-dropdown {
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .language-option {
            color: #e0e0e0;
        }

        .dark-mode .language-option:hover {
            background-color: #252525;
        }

        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }

        .dark-mode circle.highlighted {
            stroke: #ff00ff;
            stroke-width: 3px;
        }

        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }

        .dark-mode .watermark-logo {
            opacity: 0 !important;
            filter: brightness(0.7) invert(0.8);
        }
        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    
    .control-group {
        width: 100%;
        margin-bottom: 10px;
    }
    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n-placeholder="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        // ... existing scripts ...
        
        // Function to toggle dark mode
        function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            // Store the user's preference in local storage
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
            // Update chart to apply dark mode styles to SVG elements
            updateChart();
        }
        
        // Check if user has a stored preference for dark mode
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
            // Add transition for smoother dark mode toggle
            setTimeout(() => {
                document.body.style.transition = "background-color 0.3s, color 0.3s";
                document.querySelectorAll('.chart-wrapper, .header, .btn, input, select, .tooltip, .dark-mode-toggle')
                    .forEach(el => {
                        el.style.transition = "background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s";
                    });
            }, 100);
        });
        
        // We'll initialize the custom selectors after the data is loaded
        let initializeCustomSelectors = function() {
            // League selector functionality
            const leagueTrigger = document.getElementById('league-select-trigger');
            const leagueOptions = document.getElementById('league-select-options');
            const leagueSelect = document.getElementById('select-league');
            
            setupCustomSelect(leagueTrigger, leagueOptions, leagueSelect);
            
            // X metric selector functionality
            const xTrigger = document.getElementById('x-metric-trigger');
            const xOptions = document.getElementById('x-metric-options');
            const xSelect = document.getElementById('select-x');
            
            // Populate X metric options
            populateMetricOptions(xOptions, header.slice(3), function(option, value) {
                if (xTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[3]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    xTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    xTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(xTrigger, xOptions, xSelect);
            
            // Y metric selector functionality
            const yTrigger = document.getElementById('y-metric-trigger');
            const yOptions = document.getElementById('y-metric-options');
            const ySelect = document.getElementById('select-y');
            
            // Populate Y metric options
            populateMetricOptions(yOptions, header.slice(3), function(option, value) {
                if (yTrigger.querySelector('span').textContent === value) {
                    option.classList.add('selected');
                }
                if (value === header[4]) { // Default value
                    option.classList.add('selected');
                    // Update trigger text
                    yTrigger.querySelector('span').textContent = value;
                    const metricKey = value.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                    yTrigger.querySelector('span').setAttribute('data-i18n', 'metrics.' + metricKey);
                }
            });
            
            setupCustomSelect(yTrigger, yOptions, ySelect);
        };
        
        // Function to populate metric options
        function populateMetricOptions(optionsContainer, metrics, callback) {
            // Clear existing options
            optionsContainer.innerHTML = '';
            
            // Create a custom option for each metric
            metrics.forEach(function(metric) {
                const customOption = document.createElement('div');
                customOption.className = 'metric-select-option';
                customOption.setAttribute('data-value', metric);
                
                const span = document.createElement('span');
                span.textContent = metric;
                
                // Add data-i18n attribute for translation
                const metricKey = metric.toLowerCase().replace(/ /g, '-').replace(/%/g, 'pct');
                span.setAttribute('data-i18n', 'metrics.' + metricKey);
                
                customOption.appendChild(span);
                
                // Call the callback to potentially add selected class
                if (callback) callback(customOption, metric);
                
                optionsContainer.appendChild(customOption);
            });
        }
        
        // Function to set up a custom select
        function setupCustomSelect(trigger, options, selectElement) {
            // Toggle dropdown when clicking the trigger
            trigger.addEventListener('click', function() {
                // Close all other open dropdowns first
                document.querySelectorAll('.custom-select-trigger.open, .metric-select-trigger.open').forEach(function(openTrigger) {
                    if (openTrigger !== trigger) {
                        openTrigger.classList.remove('open');
                        const openOptions = openTrigger.nextElementSibling;
                        if (openOptions) openOptions.style.display = 'none';
                    }
                });
                
                // Toggle this dropdown
                trigger.classList.toggle('open');
                const isOpen = trigger.classList.contains('open');
                options.style.display = isOpen ? 'block' : 'none';
            });
            
            // Handle option selection
            const optionElements = options.querySelectorAll('.custom-select-option, .metric-select-option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    // Update selected option
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Update trigger content
                    const text = this.querySelector('span').textContent;
                    const dataI18n = this.querySelector('span').getAttribute('data-i18n');
                    const icon = this.querySelector('iconify-icon');
                    
                    trigger.innerHTML = '';
                    
                    if (icon) {
                        const clonedIcon = icon.cloneNode(true);
                        clonedIcon.style.marginRight = '8px';
                        trigger.appendChild(clonedIcon);
                    }
                    
                    const span = document.createElement('span');
                    span.textContent = text;
                    if (dataI18n) {
                        span.setAttribute('data-i18n', dataI18n);
                    }
                    trigger.appendChild(span);
                    
                    // Update hidden select and trigger change event
                    const value = this.getAttribute('data-value');
                    selectElement.value = value || text;
                    
                    // Trigger the change event on the hidden select
                    const event = new Event('change');
                    selectElement.dispatchEvent(event);
                    
                    // Close dropdown
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                });
            });
            
            // Add keyboard navigation
            let searchTerm = '';
            let searchTimeout;
            
            // Add keydown event listener to the document
            document.addEventListener('keydown', function(e) {
                // Only process keyboard input when dropdown is open
                if (!trigger.classList.contains('open')) return;
                
                // Handle arrow keys for navigation
                if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
                    e.preventDefault();
                    
                    const visibleOptions = Array.from(optionElements);
                    const currentIndex = visibleOptions.findIndex(opt => opt.classList.contains('selected'));
                    let newIndex;
                    
                    if (e.key === 'ArrowDown') {
                        newIndex = currentIndex < visibleOptions.length - 1 ? currentIndex + 1 : 0;
                    } else {
                        newIndex = currentIndex > 0 ? currentIndex - 1 : visibleOptions.length - 1;
                    }
                    
                    // Update selection
                    optionElements.forEach(opt => opt.classList.remove('selected'));
                    visibleOptions[newIndex].classList.add('selected');
                    
                    // Ensure the selected option is visible in the dropdown
                    visibleOptions[newIndex].scrollIntoView({ block: 'nearest' });
                    
                    return;
                }
                
                // Handle Enter key to select the currently highlighted option
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const selectedOption = options.querySelector('.selected');
                    if (selectedOption) {
                        selectedOption.click();
                    }
                    return;
                }
                
                // Handle Escape key to close the dropdown
                if (e.key === 'Escape') {
                    e.preventDefault();
                    trigger.classList.remove('open');
                    options.style.display = 'none';
                    return;
                }
                
                // Handle typing to search
                if (e.key.length === 1 && e.key.match(/[a-zA-Z0-9%]/)) {
                    // Clear the previous timeout
                    clearTimeout(searchTimeout);
                    
                    // Add the key to the search term
                    searchTerm += e.key.toLowerCase();
                    
                    // Find the first option that starts with the search term
                    const matchingOption = Array.from(optionElements).find(option => {
                        const optionText = option.querySelector('span').textContent.toLowerCase();
                        return optionText.startsWith(searchTerm);
                    });
                    
                    // If a matching option is found, select it
                    if (matchingOption) {
                        optionElements.forEach(opt => opt.classList.remove('selected'));
                        matchingOption.classList.add('selected');
                        matchingOption.scrollIntoView({ block: 'nearest' });
                    }
                    
                    // Clear the search term after a delay
                    searchTimeout = setTimeout(() => {
                        searchTerm = '';
                    }, 1000);
                }
            });
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            const triggers = document.querySelectorAll('.custom-select-trigger, .metric-select-trigger');
            const optionsContainers = document.querySelectorAll('.custom-select-options, .metric-select-options');
            
            let clickedInsideDropdown = false;
            
            triggers.forEach(function(trigger, index) {
                const options = optionsContainers[index];
                
                if (trigger && options && (trigger.contains(e.target) || options.contains(e.target))) {
                    clickedInsideDropdown = true;
                }
            });
            
            if (!clickedInsideDropdown) {
                triggers.forEach(function(trigger, index) {
                    if (trigger && optionsContainers[index]) {
                        trigger.classList.remove('open');
                        optionsContainers[index].style.display = 'none';
                    }
                });
            }
        });
        
        // Function to capture and download the chart area
        function takeScreenshot() {
            // Get the chart container element (includes SVG and watermark)
            const chartContainer = document.querySelector('.chart-container');
            
            // Check if we're in dark mode
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            // Use html2canvas to capture the entire chart container with watermark
            html2canvas(chartContainer, {
                scale: 2, // 2x resolution for higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                // Convert canvas to image and trigger download
                const dataURL = renderedCanvas.toDataURL('image/png', 1.0); // Use maximum quality
                const link = document.createElement('a');
                link.download = 'DataMB Screenshot.png';
                link.href = dataURL;
                link.click();
            }).catch(function(error) {
                console.error('Screenshot failed:', error);
                
                // Fallback method if html2canvas fails
                fallbackScreenshot(isDarkMode);
            });
        }
        
        // Fallback screenshot method that captures just the SVG but with higher quality
        function fallbackScreenshot(isDarkMode) {
            // Get the SVG element
            const svg = document.getElementById('scatter-plot');
            const watermark = document.querySelector('.watermark-logo');
            
            // Get dimensions
            const svgRect = svg.getBoundingClientRect();
            
            // Create a canvas with 2x resolution for higher quality
            const canvas = document.createElement('canvas');
            const scale = 2; // Increase resolution by 2x
            canvas.width = svgRect.width * scale;
            canvas.height = svgRect.height * scale;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(scale, scale); // Scale the context to match our increased canvas size
            
            // Set high quality rendering
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            
            // Fill canvas with appropriate background color
            ctx.fillStyle = isDarkMode ? '#2c2c2c' : '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // First draw the watermark
            const watermarkImg = new Image();
            watermarkImg.crossOrigin = "Anonymous";
            watermarkImg.src = watermark.src;
            
            // Create an image from the SVG
            const svgImg = new Image();
            
            // Get SVG data with proper XML serialization
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            // First load the watermark
            watermarkImg.onload = function() {
                // Calculate watermark position (centered)
                const wmX = (svgRect.width - watermark.width) / 2;
                const wmY = (svgRect.height - watermark.height) / 2;
                
                // Draw watermark with proper opacity
                ctx.globalAlpha = 0.04; // Match the CSS opacity
                ctx.drawImage(watermarkImg, wmX, wmY, watermark.width, watermark.height);
                ctx.globalAlpha = 1.0;
                
                // Then load and draw the SVG
                svgImg.onload = function() {
                    // Draw the SVG on top
                    ctx.drawImage(svgImg, 0, 0, svgRect.width, svgRect.height);
                    
                    // Convert canvas to image and trigger download
                    const dataURL = canvas.toDataURL('image/png', 1.0); // Use maximum quality
                    const link = document.createElement('a');
                    link.download = 'team-performance-chart.png';
                    link.href = dataURL;
                    link.click();
                    
                    // Clean up
                    URL.revokeObjectURL(url);
                };
                
                svgImg.src = url;
            };
        }
        
        // Add event listeners for position buttons
        document.querySelectorAll('.position-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // Add position filtering logic here
            });
        });
        
   
    </script>
    
    <script>

var _0xbd169e=_0x478a;function _0x5208(){var _0x9d3f82=['append','getBoundingClientRect','select-league','name','display','enter','#scatter-plot','Premier\x20League','find','style','font-family','tooltip.xg-line-title','toLowerCase','y-axis','rgba(0,\x20128,\x200,\x200.7)','metrics.','transparent','select-icon','attr','split','dark-mode','remove','event','.chart-container','stroke-width','tickSize','transform','<span>','78qiAFyy','data','legend-item','pct','3958820ylxLId','bottom','transition','.position-btn','responseText','87832GNtOdL','clientWidth','call','unselectAll','data-i18n','property','toggle-median-lines','push','rgba(255,\x20165,\x200,\x200.7)','axisLeft','currentTranslations','range','splice','min','circle','innerWidth','left','innerHTML','12px','bold','mouseover','xG\x20per\x2090','search-bar','translate(0,','add','input','fontWeight','Inter,\x20sans-serif','.xy-line-hover','ion-ios-circle-filled','select','rgba(0,\x200,\x20255,\x200.7)','appendChild','opacity','trim','length','classed','keys','.team-label-','#2ecc71','La\x20Liga','median-lines-tooltip','.team-label','block','Top\x205\x20Leagues','Select\x20all\x20teams','DOMContentLoaded','interrupt','change','map','rgba(75,\x200,\x20130,\x200.7)','88YPcfvt','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','14vlxKas','stroke-dasharray','81590XmCtvu','Goals\x20per\x2090','axisBottom','html','league-legend','rgba(238,\x20130,\x20238,\x200.7)','height','querySelector','34308FevgXA','stroke','4XJXnLK','link','.xy-line-label-bg','translate(','top','filter','fill','width','all','#select-x','search-match','duration','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','node','marginRight','font-weight','search-dimmed','y-label','Hide\x20median\x20lines','500','marker#arrow-over,\x20marker#arrow-under','classList','Unselect\x20all\x20teams','forEach','right','rgba(255,\x200,\x200,\x200.7)','Serie\x20A','Show\x20median\x20lines','944781AZTzWY','.xy-line-bg','click','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','team-label-','contains','querySelectorAll','</span><br/>','#select-y','toFixed','cursor','div','getElementById','#000','xy-line','addEventListener','selectAll','median','.performance-label','class','innerHeight','parentNode','none','x-label','Bundesliga','size','pageY','resizeTimer','36ImOpih','metrics','.xy-line-label','flex','https://datamb.football/database/TEAM/teamplots.csv','end','rgba(70,\x20130,\x20180,\x200.7)','getBBox','body','.xy-line','indexOf','slice','Ligue\x201','open','hideMedianLines','rgba(255,\x20255,\x200,\x200.7)','line','option','GET','tooltip','send','2087327qVDsqO','replace','max','xy-line-hover','5,3','includes','</strong><br/>','createElement','each','rotate(-90)','textContent','font-size','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','value','median-line','<strong>','className','2961588OatJhu','<br/>','text','x-axis','pageX','backgroundColor','rgba(0,\x200,\x200,\x200.3)','text-anchor','resize','scaleLinear','</span>'];_0x5208=function(){return _0x9d3f82;};return _0x5208();}(function(_0x5c920b,_0x761699){var _0x5dcdc8=_0x478a,_0x34bbd0=_0x5c920b();while(!![]){try{var _0x2cdc76=-parseInt(_0x5dcdc8(0x22a))/0x1*(-parseInt(_0x5dcdc8(0x25f))/0x2)+parseInt(_0x5dcdc8(0x287))/0x3*(-parseInt(_0x5dcdc8(0x26b))/0x4)+parseInt(_0x5dcdc8(0x261))/0x5*(parseInt(_0x5dcdc8(0x221))/0x6)+parseInt(_0x5dcdc8(0x1fa))/0x7+parseInt(_0x5dcdc8(0x25d))/0x8*(-parseInt(_0x5dcdc8(0x269))/0x9)+parseInt(_0x5dcdc8(0x225))/0xa+parseInt(_0x5dcdc8(0x1e9))/0xb*(-parseInt(_0x5dcdc8(0x1d4))/0xc);if(_0x2cdc76===_0x761699)break;else _0x34bbd0['push'](_0x34bbd0['shift']());}catch(_0x4d8157){_0x34bbd0['push'](_0x34bbd0['shift']());}}}(_0x5208,0xafbb2));function getTranslation(_0x573352,_0x4b5d95){var _0x4e92a7=_0x478a;const _0x5a2800=_0x573352[_0x4e92a7(0x218)]('.');try{let _0x521b3e=window['currentTranslations']||{};for(const _0x23f397 of _0x5a2800){if(_0x521b3e&&_0x521b3e[_0x23f397])_0x521b3e=_0x521b3e[_0x23f397];else return _0x4b5d95;}return _0x521b3e;}catch(_0x5a18bc){return _0x4b5d95;}}const xhr=new XMLHttpRequest();xhr[_0xbd169e(0x1e1)](_0xbd169e(0x1e6),_0xbd169e(0x1d8),![]),xhr[_0xbd169e(0x1e8)](null);let csvData=xhr[_0xbd169e(0x229)],extraHeaderRow=_0xbd169e(0x25e);csvData=extraHeaderRow+csvData;var rows=csvData[_0xbd169e(0x24c)]()[_0xbd169e(0x218)]('\x0a'),header=rows[0x0][_0xbd169e(0x218)](','),data=rows[_0xbd169e(0x1df)](0x1)['map'](function(_0x36c9c3){var _0x241f69=_0xbd169e;return _0x36c9c3['split'](',')[_0x241f69(0x25b)](function(_0x11a2f3,_0x4067be){return _0x4067be>=0x3?parseFloat(_0x11a2f3):_0x11a2f3;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0xbd169e(0x23a)]-margin[_0xbd169e(0x283)],height=0x302-margin[_0xbd169e(0x26f)]-margin['bottom'],leagueColors={'Premier\x20League':_0xbd169e(0x284),'La\x20Liga':_0xbd169e(0x232),'Bundesliga':_0xbd169e(0x1e3),'Serie\x20A':_0xbd169e(0x213),'Ligue\x201':_0xbd169e(0x249),'Eredivisie':_0xbd169e(0x25c),'Primeira\x20Liga':_0xbd169e(0x266)};function getLeagueColor(_0x374007){var _0x2e240e=_0xbd169e;return leagueColors[_0x374007]||_0x2e240e(0x284);}function updateChartDimensions(){var _0x3a815d=_0xbd169e,_0x431c8f=document[_0x3a815d(0x268)]('.chart-wrapper')[_0x3a815d(0x22b)],_0x18fbee=window[_0x3a815d(0x1cc)]*0.7,_0x4775fd=0x1e,_0x1580e3=Math['min'](0x43a,_0x431c8f-_0x4775fd*0x2),_0x3327cf=window[_0x3a815d(0x239)]/window['innerHeight']<0x1;if(_0x3327cf){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x5700ca=1.4,_0x252552=Math[_0x3a815d(0x237)](_0x18fbee,_0x1580e3*_0x5700ca);_0x252552=Math[_0x3a815d(0x1eb)](_0x252552,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x3545e9=0.7,_0x252552=_0x1580e3*_0x3545e9;}width=_0x1580e3-margin[_0x3a815d(0x23a)]-margin[_0x3a815d(0x283)],height=_0x252552-margin[_0x3a815d(0x26f)]-margin[_0x3a815d(0x226)],d3[_0x3a815d(0x248)]('#scatter-plot')[_0x3a815d(0x217)]('width',_0x1580e3)['attr'](_0x3a815d(0x267),_0x252552),document[_0x3a815d(0x268)](_0x3a815d(0x21c))[_0x3a815d(0x20e)][_0x3a815d(0x267)]=_0x252552+'px';}window[_0xbd169e(0x1c7)]('resize',function(){var _0x1bc930=_0xbd169e;clearTimeout(window['resizeTimer']),window[_0x1bc930(0x1d3)]=setTimeout(function(){updateChartDimensions(),updateChart();},0xfa);}),updateChartDimensions();function debounce(_0x2914a7,_0x1f099b){let _0x3626b6;return function(){const _0x160259=this,_0xecb723=arguments;clearTimeout(_0x3626b6),_0x3626b6=setTimeout(function(){_0x2914a7['apply'](_0x160259,_0xecb723);},_0x1f099b);};}var prevWindowWidth=window['innerWidth'],prevWindowHeight=window['innerHeight'];window['addEventListener'](_0xbd169e(0x202),debounce(function(){var _0x1426ef=_0xbd169e,_0x50c66a=prevWindowWidth/prevWindowHeight<0x1,_0x13cd7c=window[_0x1426ef(0x239)]/window[_0x1426ef(0x1cc)]<0x1;prevWindowWidth=window[_0x1426ef(0x239)],prevWindowHeight=window[_0x1426ef(0x1cc)],updateChart();},0xfa));var medianLinesVisible=![],selectX=d3[_0xbd169e(0x248)](_0xbd169e(0x274)),selectY=d3['select'](_0xbd169e(0x1c0)),names=data[_0xbd169e(0x25b)](function(_0x31f547){return _0x31f547[0x1];});header[_0xbd169e(0x1df)](0x3)['forEach'](function(_0x566da6){var _0xe90f5e=_0xbd169e;selectX[_0xe90f5e(0x205)](_0xe90f5e(0x1e5))[_0xe90f5e(0x1fc)](_0x566da6)[_0xe90f5e(0x217)](_0xe90f5e(0x1f6),_0x566da6),selectY[_0xe90f5e(0x205)](_0xe90f5e(0x1e5))[_0xe90f5e(0x1fc)](_0x566da6)[_0xe90f5e(0x217)](_0xe90f5e(0x1f6),_0x566da6);}),selectX[_0xbd169e(0x22f)](_0xbd169e(0x1f6),header[0x3]),selectY['property'](_0xbd169e(0x1f6),header[0x4]);var svg=d3[_0xbd169e(0x248)](_0xbd169e(0x20b))[_0xbd169e(0x217)](_0xbd169e(0x272),width+margin[_0xbd169e(0x23a)]+margin['right'])[_0xbd169e(0x217)](_0xbd169e(0x267),height+margin[_0xbd169e(0x26f)]+margin[_0xbd169e(0x226)])[_0xbd169e(0x205)]('g')[_0xbd169e(0x217)](_0xbd169e(0x21f),_0xbd169e(0x26e)+margin['left']+','+margin['top']+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3[_0xbd169e(0x203)]()[_0xbd169e(0x235)]([0x0,width]),yScale=d3['scaleLinear']()[_0xbd169e(0x235)]([height,0x0]),xAxis=d3[_0xbd169e(0x263)](xScale)[_0xbd169e(0x21e)](0x0),yAxis=d3[_0xbd169e(0x233)](yScale)[_0xbd169e(0x21e)](0x0),gXAxis=svg[_0xbd169e(0x205)]('g')['attr']('class',_0xbd169e(0x1fd))['attr']('transform','translate(0,'+height+')'),gYAxis=svg[_0xbd169e(0x205)]('g')[_0xbd169e(0x217)](_0xbd169e(0x1cb),_0xbd169e(0x212)),xLabel=svg[_0xbd169e(0x205)](_0xbd169e(0x1fc))[_0xbd169e(0x217)](_0xbd169e(0x1cb),_0xbd169e(0x1cf))[_0xbd169e(0x217)](_0xbd169e(0x201),_0xbd169e(0x1d9))[_0xbd169e(0x217)]('x',width)['attr']('y',height+0x23)[_0xbd169e(0x20e)](_0xbd169e(0x20f),_0xbd169e(0x245))[_0xbd169e(0x20e)](_0xbd169e(0x1f4),'14px'),yLabel=svg['append'](_0xbd169e(0x1fc))[_0xbd169e(0x217)](_0xbd169e(0x1cb),_0xbd169e(0x27c))[_0xbd169e(0x217)](_0xbd169e(0x201),_0xbd169e(0x1d9))[_0xbd169e(0x217)](_0xbd169e(0x21f),_0xbd169e(0x1f2))[_0xbd169e(0x217)]('y',-0x35)[_0xbd169e(0x217)]('x',0x0)[_0xbd169e(0x20e)](_0xbd169e(0x20f),_0xbd169e(0x245))['style']('font-size','14px'),tooltip=d3[_0xbd169e(0x248)](_0xbd169e(0x1dc))[_0xbd169e(0x205)]('div')[_0xbd169e(0x217)](_0xbd169e(0x1cb),_0xbd169e(0x1e7));function isMobileDevice(){var _0x48d55e=_0xbd169e;return window[_0x48d55e(0x239)]<=0x300;}function positionTooltip(_0x2e15c4,_0x470f1f){var _0x7530ad=_0xbd169e;const _0x4e2125=_0x470f1f[_0x7530ad(0x278)]();if(!_0x4e2125)return{'left':0x0,'top':0x0};const _0x4826f4=_0x4e2125[_0x7530ad(0x206)](),_0x1b3966=window[_0x7530ad(0x239)],_0x5e3a88=window['innerHeight'];let _0xd84aa6=_0x2e15c4[_0x7530ad(0x1fe)]+0xa,_0x35d401=_0x2e15c4['pageY']-0x1c;return _0xd84aa6+_0x4826f4['width']>_0x1b3966-0xa&&(_0xd84aa6=_0x2e15c4[_0x7530ad(0x1fe)]-_0x4826f4['width']-0xa),_0x35d401+_0x4826f4[_0x7530ad(0x267)]>_0x5e3a88-0xa&&(_0x35d401=_0x2e15c4[_0x7530ad(0x1d2)]-_0x4826f4['height']-0xa),_0xd84aa6=Math[_0x7530ad(0x1eb)](0xa,_0xd84aa6),_0x35d401=Math['max'](0xa,_0x35d401),{'left':_0xd84aa6,'top':_0x35d401};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x434103=_0xbd169e;updateChartDimensions(),d3[_0x434103(0x248)](_0x434103(0x20b))[_0x434103(0x217)](_0x434103(0x272),width+margin['left']+margin[_0x434103(0x283)])[_0x434103(0x217)]('height',height+margin[_0x434103(0x26f)]+margin[_0x434103(0x226)]),gXAxis[_0x434103(0x217)]('transform',_0x434103(0x241)+height+')'),xLabel[_0x434103(0x217)]('x',width)[_0x434103(0x217)]('y',height+0x23),yLabel[_0x434103(0x217)]('x',0x0);const _0x566660=document[_0x434103(0x1dc)][_0x434103(0x280)][_0x434103(0x1bd)](_0x434103(0x219));var _0x375010=document[_0x434103(0x1c4)]('select-league')[_0x434103(0x1f6)];if(_0x375010===_0x434103(0x273))filteredData=data;else _0x375010===_0x434103(0x256)?filteredData=data['filter'](function(_0x31bae3){var _0x5b06be=_0x434103;return _0x31bae3[0x2]==='Premier\x20League'||_0x31bae3[0x2]===_0x5b06be(0x252)||_0x31bae3[0x2]===_0x5b06be(0x1d0)||_0x31bae3[0x2]===_0x5b06be(0x285)||_0x31bae3[0x2]===_0x5b06be(0x1e0);}):filteredData=data['filter'](function(_0x368f2d){return _0x368f2d[0x2]===_0x375010;});filteredNames=filteredData[_0x434103(0x25b)](function(_0x25e1c4){return _0x25e1c4[0x1];}),xMetric=selectX[_0x434103(0x22f)](_0x434103(0x1f6)),yMetric=selectY['property'](_0x434103(0x1f6)),xScale[_0x434103(0x235)]([0x0,width])['domain']([d3[_0x434103(0x237)](filteredData,function(_0x550f3a){var _0x1c1a00=_0x434103;return _0x550f3a[header[_0x1c1a00(0x1de)](xMetric)]*0.9;}),d3[_0x434103(0x1eb)](filteredData,function(_0x40463e){var _0x33608f=_0x434103;return _0x40463e[header[_0x33608f(0x1de)](xMetric)]*1.1;})]),yScale[_0x434103(0x235)]([height,0x0])['domain']([d3['min'](filteredData,function(_0x5a2de2){var _0x4a67af=_0x434103;return _0x5a2de2[header[_0x4a67af(0x1de)](yMetric)]*0.9;}),d3['max'](filteredData,function(_0x5b5d9e){return _0x5b5d9e[header['indexOf'](yMetric)]*1.1;})]),gXAxis['call'](d3[_0x434103(0x263)](xScale)[_0x434103(0x21e)](0x0)),gYAxis[_0x434103(0x22c)](d3[_0x434103(0x233)](yScale)['tickSize'](0x0));const _0x360bac='metrics.'+xMetric[_0x434103(0x211)]()[_0x434103(0x1ea)](/ /g,'-')[_0x434103(0x1ea)](/%/g,_0x434103(0x224)),_0x1d7cb8=_0x434103(0x214)+yMetric[_0x434103(0x211)]()[_0x434103(0x1ea)](/ /g,'-')[_0x434103(0x1ea)](/%/g,'pct');xLabel['attr']('data-i18n',_0x360bac),yLabel[_0x434103(0x217)](_0x434103(0x22e),_0x1d7cb8);if(window['currentTranslations']&&window['currentTranslations']['metrics']){const _0x4394dc=xMetric[_0x434103(0x211)]()[_0x434103(0x1ea)](/ /g,'-')['replace'](/%/g,'pct'),_0xcb4cb7=yMetric['toLowerCase']()[_0x434103(0x1ea)](/ /g,'-')['replace'](/%/g,_0x434103(0x224)),_0x34d26f=window[_0x434103(0x234)][_0x434103(0x1d5)][_0x4394dc],_0x360e37=window[_0x434103(0x234)][_0x434103(0x1d5)][_0xcb4cb7];xLabel['text'](_0x34d26f||xMetric),yLabel[_0x434103(0x1fc)](_0x360e37||yMetric);}else xLabel[_0x434103(0x1fc)](xMetric),yLabel['text'](yMetric);svg['selectAll']('circle')[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x254))['remove'](),svg['selectAll'](_0x434103(0x1dd))[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x288))[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x1d6))[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x26d))[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x1ca))['remove'](),svg['selectAll']('linearGradient#line-gradient')[_0x434103(0x21a)](),svg[_0x434103(0x1c8)](_0x434103(0x27f))['remove'](),svg[_0x434103(0x1c8)](_0x434103(0x246))[_0x434103(0x21a)](),svg[_0x434103(0x1c8)]('.median-line')[_0x434103(0x21a)]();if(xMetric===_0x434103(0x23f)&&yMetric===_0x434103(0x262)||xMetric===_0x434103(0x262)&&yMetric===_0x434103(0x23f)){var _0x5acdb2=null,_0x406ed5=d3['min'](filteredData,function(_0x51a215){var _0xfa7c2d=_0x434103;return _0x51a215[header[_0xfa7c2d(0x1de)](xMetric)];}),_0x2f47b8=d3[_0x434103(0x1eb)](filteredData,function(_0x5bd028){var _0x1ed75b=_0x434103;return _0x5bd028[header[_0x1ed75b(0x1de)](xMetric)];}),_0x2de0d0=d3[_0x434103(0x237)](filteredData,function(_0x40c8ca){var _0x145a53=_0x434103;return _0x40c8ca[header[_0x145a53(0x1de)](yMetric)];}),_0x44d134=d3[_0x434103(0x1eb)](filteredData,function(_0x405a17){var _0x515035=_0x434103;return _0x405a17[header[_0x515035(0x1de)](yMetric)];}),_0xbd371c=Math['min'](_0x2f47b8,_0x44d134),_0x19f670=Math[_0x434103(0x1eb)](_0x406ed5,_0x2de0d0);svg[_0x434103(0x205)](_0x434103(0x1e4))['attr'](_0x434103(0x1cb),_0x434103(0x1c6))['attr']('x1',xScale(_0x19f670))[_0x434103(0x217)]('y1',yScale(_0x19f670))[_0x434103(0x217)]('x2',xScale(_0xbd371c))[_0x434103(0x217)]('y2',yScale(_0xbd371c))[_0x434103(0x20e)]('stroke',_0x434103(0x251))[_0x434103(0x20e)](_0x434103(0x21d),'2')[_0x434103(0x20e)](_0x434103(0x260),_0x434103(0x1ed)),svg[_0x434103(0x205)]('line')[_0x434103(0x217)]('class',_0x434103(0x1ec))[_0x434103(0x217)]('x1',xScale(_0x19f670))[_0x434103(0x217)]('y1',yScale(_0x19f670))[_0x434103(0x217)]('x2',xScale(_0xbd371c))['attr']('y2',yScale(_0xbd371c))['style'](_0x434103(0x26a),_0x434103(0x215))[_0x434103(0x20e)](_0x434103(0x21d),'15')[_0x434103(0x20e)](_0x434103(0x1c2),'help')['on'](_0x434103(0x23e),function(){var _0x1bca10=_0x434103;_0x5acdb2&&clearTimeout(_0x5acdb2);var _0x22b5e8=d3[_0x1bca10(0x21b)][_0x1bca10(0x1fe)],_0x5c79ba=d3[_0x1bca10(0x21b)][_0x1bca10(0x1d2)];_0x5acdb2=setTimeout(function(){var _0xcd5015=_0x1bca10;tooltip[_0xcd5015(0x227)]()['duration'](0xc8)[_0xcd5015(0x20e)](_0xcd5015(0x24b),0.9);var _0x50a4e8='<strong>'+getTranslation(_0xcd5015(0x210),'G\x20=\x20xG\x20Line')+'</strong><br/>';xMetric==='xG\x20per\x2090'&&yMetric==='Goals\x20per\x2090'?_0x50a4e8+=_0xcd5015(0x220)+getTranslation('tooltip.xg-line-above',_0xcd5015(0x277))+_0xcd5015(0x1bf)+_0xcd5015(0x220)+getTranslation('tooltip.xg-line-below','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.')+_0xcd5015(0x204):_0x50a4e8+=_0xcd5015(0x220)+getTranslation('tooltip.xg-line-right',_0xcd5015(0x1f5))+_0xcd5015(0x1bf)+_0xcd5015(0x220)+getTranslation('tooltip.xg-line-left',_0xcd5015(0x28a))+_0xcd5015(0x204),tooltip['html'](_0x50a4e8)[_0xcd5015(0x20e)](_0xcd5015(0x23a),_0x22b5e8+0xa+'px')[_0xcd5015(0x20e)]('top',_0x5c79ba-0x1c+'px');},0x258);})['on']('mouseout',function(){var _0x5155c8=_0x434103;_0x5acdb2&&(clearTimeout(_0x5acdb2),_0x5acdb2=null),tooltip['transition']()[_0x5155c8(0x276)](0x1f4)[_0x5155c8(0x20e)](_0x5155c8(0x24b),0x0);});}if(medianLinesVisible){var _0x28a194=d3[_0x434103(0x1c9)](filteredData,function(_0x59d22b){return _0x59d22b[header['indexOf'](xMetric)];}),_0x2d399b=d3[_0x434103(0x1c9)](filteredData,function(_0x22247d){var _0x324414=_0x434103;return _0x22247d[header[_0x324414(0x1de)](yMetric)];});svg[_0x434103(0x205)](_0x434103(0x1e4))[_0x434103(0x217)](_0x434103(0x1cb),_0x434103(0x1f7))[_0x434103(0x217)]('x1',xScale(_0x28a194))[_0x434103(0x217)]('y1',0x0)[_0x434103(0x217)]('x2',xScale(_0x28a194))[_0x434103(0x217)]('y2',height)['style'](_0x434103(0x26a),_0x434103(0x200))['style'](_0x434103(0x260),'4'),svg[_0x434103(0x205)](_0x434103(0x1e4))[_0x434103(0x217)](_0x434103(0x1cb),_0x434103(0x1f7))[_0x434103(0x217)]('x1',0x0)[_0x434103(0x217)]('y1',yScale(_0x2d399b))[_0x434103(0x217)]('x2',width)[_0x434103(0x217)]('y2',yScale(_0x2d399b))[_0x434103(0x20e)](_0x434103(0x26a),'rgba(0,\x200,\x200,\x200.3)')[_0x434103(0x20e)](_0x434103(0x260),'4');}circles=svg[_0x434103(0x1c8)](_0x434103(0x238))[_0x434103(0x222)](filteredData)[_0x434103(0x20a)]()['append'](_0x434103(0x238))[_0x434103(0x217)]('cx',function(_0x119041){var _0x4a19cf=_0x434103;return xScale(_0x119041[header[_0x4a19cf(0x1de)](xMetric)]);})['attr']('cy',function(_0xfdbde6){var _0x484ada=_0x434103;return yScale(_0xfdbde6[header[_0x484ada(0x1de)](yMetric)]);})[_0x434103(0x217)]('r',0x8)[_0x434103(0x20e)](_0x434103(0x271),function(_0x36ee6f){var _0x18b16b=_0x434103;if(clickedCircles[_0x18b16b(0x1ee)](_0x36ee6f[0x1]))return getLeagueColor(_0x36ee6f[0x2]);return _0x18b16b(0x1da);})[_0x434103(0x20e)]('stroke',function(_0x4487dd){var _0x464645=_0x434103;return clickedCircles[_0x464645(0x1ee)](_0x4487dd[0x1])?'#000':_0x464645(0x1ce);})[_0x434103(0x20e)](_0x434103(0x21d),function(_0x4121de){var _0x49f14c=_0x434103;return clickedCircles[_0x49f14c(0x1ee)](_0x4121de[0x1])?0x2:0x0;})[_0x434103(0x20e)](_0x434103(0x1c2),'pointer')['on'](_0x434103(0x23e),function(_0x1a3c25){var _0x10a6ee=_0x434103;d3[_0x10a6ee(0x248)](this)[_0x10a6ee(0x227)]()[_0x10a6ee(0x276)](0xc8)['attr']('r',0xa)[_0x10a6ee(0x20e)](_0x10a6ee(0x271),getLeagueColor(_0x1a3c25[0x2])),tooltip[_0x10a6ee(0x227)]()[_0x10a6ee(0x276)](0xc8)[_0x10a6ee(0x20e)](_0x10a6ee(0x24b),0.9);const _0x1f719e=_0x10a6ee(0x214)+xMetric[_0x10a6ee(0x211)]()['replace'](/ /g,'-')[_0x10a6ee(0x1ea)](/%/g,'pct'),_0xe363fa=_0x10a6ee(0x214)+yMetric[_0x10a6ee(0x211)]()[_0x10a6ee(0x1ea)](/ /g,'-')[_0x10a6ee(0x1ea)](/%/g,_0x10a6ee(0x224)),_0x52893b=getTranslation(_0x1f719e,xMetric),_0x547d50=getTranslation(_0xe363fa,yMetric);tooltip[_0x10a6ee(0x264)](_0x10a6ee(0x1f8)+_0x1a3c25[0x1]+_0x10a6ee(0x1ef)+_0x52893b+':\x20'+_0x1a3c25[header[_0x10a6ee(0x1de)](xMetric)][_0x10a6ee(0x1c1)](0x2)+_0x10a6ee(0x1fb)+_0x547d50+':\x20'+_0x1a3c25[header['indexOf'](yMetric)]['toFixed'](0x2));const _0x48b50f=tooltip[_0x10a6ee(0x278)]();if(_0x48b50f){const _0x28db49=_0x48b50f[_0x10a6ee(0x206)](),_0x340954=window[_0x10a6ee(0x239)],_0x5ced95=window[_0x10a6ee(0x1cc)];let _0xcc84cb=d3[_0x10a6ee(0x21b)][_0x10a6ee(0x1fe)]+0xa,_0x5a55b5=d3[_0x10a6ee(0x21b)][_0x10a6ee(0x1d2)]-0x1c;_0xcc84cb+_0x28db49['width']>_0x340954-0xa&&(_0xcc84cb=d3['event'][_0x10a6ee(0x1fe)]-_0x28db49[_0x10a6ee(0x272)]-0xa),_0x5a55b5+_0x28db49[_0x10a6ee(0x267)]>_0x5ced95-0xa&&(_0x5a55b5=d3[_0x10a6ee(0x21b)][_0x10a6ee(0x1d2)]-_0x28db49[_0x10a6ee(0x267)]-0xa),_0xcc84cb=Math[_0x10a6ee(0x1eb)](0xa,_0xcc84cb),_0x5a55b5=Math[_0x10a6ee(0x1eb)](0xa,_0x5a55b5),tooltip[_0x10a6ee(0x20e)](_0x10a6ee(0x23a),_0xcc84cb+'px')[_0x10a6ee(0x20e)](_0x10a6ee(0x26f),_0x5a55b5+'px');}else tooltip['style'](_0x10a6ee(0x23a),d3[_0x10a6ee(0x21b)]['pageX']+0xa+'px')[_0x10a6ee(0x20e)](_0x10a6ee(0x26f),d3[_0x10a6ee(0x21b)][_0x10a6ee(0x1d2)]-0x1c+'px');window[_0x10a6ee(0x239)]<=0x300&&setTimeout(function(){var _0x9630d7=_0x10a6ee;tooltip['transition']()[_0x9630d7(0x276)](0xc8)[_0x9630d7(0x20e)](_0x9630d7(0x24b),0x0);},0x3e8);})['on']('mouseout',function(_0x3870b1){var _0xf57d02=_0x434103;window['innerWidth']>0x300&&tooltip[_0xf57d02(0x227)]()[_0xf57d02(0x276)](0x1f4)['style']('opacity',0x0);var _0xea885d=clickedCircles[_0xf57d02(0x1ee)](_0x3870b1[0x1]);d3[_0xf57d02(0x248)](this)[_0xf57d02(0x227)]()[_0xf57d02(0x276)](0xc8)[_0xf57d02(0x217)]('r',0x8)[_0xf57d02(0x20e)](_0xf57d02(0x271),function(){var _0x50e73f=_0xf57d02;return _0xea885d?getLeagueColor(_0x3870b1[0x2]):_0x50e73f(0x1da);});})['on'](_0x434103(0x289),function(_0xe4e226){var _0x223397=_0x434103,_0x1eaed2=d3[_0x223397(0x248)](this)['classed']('search-match');_0x1eaed2&&resetSearch();var _0x264609=clickedCircles['indexOf'](_0xe4e226[0x1]);_0x264609===-0x1?(clickedCircles[_0x223397(0x231)](_0xe4e226[0x1]),d3['select'](this)[_0x223397(0x20e)]('fill',getLeagueColor(_0xe4e226[0x2]))['style'](_0x223397(0x26a),_0x223397(0x1c5))[_0x223397(0x20e)](_0x223397(0x21d),0x2),addTeamLabel(_0xe4e226)):(clickedCircles[_0x223397(0x236)](_0x264609,0x1),d3[_0x223397(0x248)](this)['style'](_0x223397(0x271),_0x223397(0x1da))['style'](_0x223397(0x26a),_0x223397(0x1ce)),svg[_0x223397(0x1c8)](_0x223397(0x250)+_0xe4e226[0x1][_0x223397(0x1ea)](/\s+/g,'-')[_0x223397(0x211)]())['remove']());updateSelectAllButtonText();var _0x43d698=document[_0x223397(0x1c4)](_0x223397(0x207))[_0x223397(0x1f6)];updateLeagueLegend(_0x43d698);}),clickedCircles[_0x434103(0x282)](function(_0x45b533){var _0x15d25a=_0x434103,_0x569b19=filteredData[_0x15d25a(0x20d)](function(_0x53a7a0){return _0x53a7a0[0x1]===_0x45b533;});_0x569b19&&addTeamLabel(_0x569b19);}),updateSelectAllButtonText(),updateLeagueLegend(_0x375010);}function _0x478a(_0x5c9967,_0x367fa9){var _0x5208ab=_0x5208();return _0x478a=function(_0x478a15,_0x49083b){_0x478a15=_0x478a15-0x1bc;var _0x4111a8=_0x5208ab[_0x478a15];return _0x4111a8;},_0x478a(_0x5c9967,_0x367fa9);}function updateSelectAllButtonText(){var _0x221bf0=_0xbd169e,_0x1d9055=document[_0x221bf0(0x1c4)](_0x221bf0(0x216)),_0x26384f=document[_0x221bf0(0x1c4)]('select-all-tooltip'),_0x29ed0d=filteredData['every'](function(_0x26b535){var _0x2ff736=_0x221bf0;return clickedCircles[_0x2ff736(0x1ee)](_0x26b535[0x1]);});_0x29ed0d?(_0x1d9055[_0x221bf0(0x1f9)]='ion-ios-circle-outline',_0x26384f&&(window['currentTranslations']&&window[_0x221bf0(0x234)]['tooltip']?_0x26384f['textContent']=window[_0x221bf0(0x234)][_0x221bf0(0x1e7)][_0x221bf0(0x22d)]||'Unselect\x20all\x20teams':_0x26384f['textContent']=_0x221bf0(0x281))):(_0x1d9055[_0x221bf0(0x1f9)]=_0x221bf0(0x247),_0x26384f&&(window[_0x221bf0(0x234)]&&window[_0x221bf0(0x234)]['tooltip']?_0x26384f[_0x221bf0(0x1f3)]=window[_0x221bf0(0x234)][_0x221bf0(0x1e7)][_0x221bf0(0x1c8)]||_0x221bf0(0x257):_0x26384f[_0x221bf0(0x1f3)]=_0x221bf0(0x257)));}selectX['on'](_0xbd169e(0x25a),updateChart),selectY['on']('change',updateChart);function removeSpecialCharsAndDiacritics(_0x42924e){var _0x4e123d=_0xbd169e;if(!_0x42924e)return'';return _0x42924e['normalize']('NFD')['replace'](/[\u0300-\u036f]/g,'')[_0x4e123d(0x1ea)](//g,'O')[_0x4e123d(0x1ea)](//g,'o');}var searchBar=document['getElementById'](_0xbd169e(0x240));searchBar[_0xbd169e(0x1c7)]('input',function(){var _0x573d66=_0xbd169e,_0x256aff=searchBar[_0x573d66(0x1f6)][_0x573d66(0x211)]();if(_0x256aff===''){resetSearch();return;}var _0x124ee9=removeSpecialCharsAndDiacritics(_0x256aff);svg['selectAll'](_0x573d66(0x238))[_0x573d66(0x24e)](_0x573d66(0x275),![])[_0x573d66(0x20e)](_0x573d66(0x271),function(_0x11b721){var _0x1550ec=_0x573d66;return clickedCircles[_0x1550ec(0x1ee)](_0x11b721[0x1])?getLeagueColor(_0x11b721[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})[_0x573d66(0x20e)](_0x573d66(0x26a),function(_0x551e42){var _0x2f405f=_0x573d66;return clickedCircles[_0x2f405f(0x1ee)](_0x551e42[0x1])?_0x2f405f(0x1c5):_0x2f405f(0x1ce);})['style'](_0x573d66(0x21d),function(_0x3f3a8b){var _0x49664d=_0x573d66;return clickedCircles[_0x49664d(0x1ee)](_0x3f3a8b[0x1])?0x2:0x0;})[_0x573d66(0x20e)]('filter','none')[_0x573d66(0x1f1)](function(){var _0x59f9f9=_0x573d66;d3[_0x59f9f9(0x248)](this)[_0x59f9f9(0x20e)]('r',null);}),svg[_0x573d66(0x1c8)](_0x573d66(0x254))[_0x573d66(0x24e)](_0x573d66(0x275),![])[_0x573d66(0x24e)](_0x573d66(0x27b),![]);var _0x272b1a=[];svg[_0x573d66(0x1c8)]('circle')[_0x573d66(0x270)](function(_0x332f89){var _0x155933=_0x573d66,_0x38b57a=_0x332f89[0x1][_0x155933(0x211)](),_0xc5d329=removeSpecialCharsAndDiacritics(_0x38b57a),_0x4e4494=_0x38b57a[_0x155933(0x1ee)](_0x256aff)||_0xc5d329[_0x155933(0x1ee)](_0x124ee9);return _0x4e4494&&_0x272b1a[_0x155933(0x231)](_0x332f89[0x1]),_0x4e4494;})[_0x573d66(0x24e)](_0x573d66(0x275),!![])[_0x573d66(0x1f1)](function(){var _0x40abed=_0x573d66;this[_0x40abed(0x1cd)][_0x40abed(0x24a)](this);}),_0x272b1a[_0x573d66(0x24d)]>0x0?(svg[_0x573d66(0x1c8)](_0x573d66(0x254))[_0x573d66(0x24e)](_0x573d66(0x27b),!![]),svg['selectAll']('.team-label')['filter'](function(){var _0x383a6b=_0x573d66,_0x2a5d6f=d3['select'](this)[_0x383a6b(0x1fc)]();return _0x272b1a[_0x383a6b(0x1ee)](_0x2a5d6f);})[_0x573d66(0x24e)](_0x573d66(0x275),!![])[_0x573d66(0x24e)](_0x573d66(0x27b),![])[_0x573d66(0x1f1)](function(){var _0x2571ac=_0x573d66;this[_0x2571ac(0x1cd)][_0x2571ac(0x24a)](this);}),_0x272b1a['forEach'](function(_0x3fa03e){var _0x385ad1=_0x573d66,_0x536176='team-label-'+_0x3fa03e['replace'](/\s+/g,'-')[_0x385ad1(0x211)]();if(svg[_0x385ad1(0x248)]('.'+_0x536176)[_0x385ad1(0x1d1)]()===0x0){var _0xbf391a=filteredData[_0x385ad1(0x20d)](function(_0x4c49b6){return _0x4c49b6[0x1]===_0x3fa03e;});_0xbf391a&&(addTeamLabel(_0xbf391a),svg['select']('.'+_0x536176)['classed'](_0x385ad1(0x275),!![]));}})):(svg[_0x573d66(0x1c8)](_0x573d66(0x254))[_0x573d66(0x1f1)](function(){var _0xd86cfd=_0x573d66,_0x232c4f=d3['select'](this),_0x157968=_0x232c4f['text']();!clickedCircles[_0xd86cfd(0x1ee)](_0x157968)&&_0x232c4f['remove']();}),svg['selectAll'](_0x573d66(0x238))['style'](_0x573d66(0x271),function(_0x276170){var _0x36b119=_0x573d66;return clickedCircles[_0x36b119(0x1ee)](_0x276170[0x1])?getLeagueColor(_0x276170[0x2]):_0x36b119(0x1da);})['style'](_0x573d66(0x26a),function(_0x23a2d6){var _0x280185=_0x573d66;return clickedCircles[_0x280185(0x1ee)](_0x23a2d6[0x1])?_0x280185(0x1c5):'none';})[_0x573d66(0x20e)]('stroke-width',function(_0x3ab214){var _0x1b3e26=_0x573d66;return clickedCircles[_0x1b3e26(0x1ee)](_0x3ab214[0x1])?0x2:0x0;}));});function resetSearch(){var _0x406802=_0xbd169e;searchBar[_0x406802(0x1f6)]='',svg[_0x406802(0x1c8)]('circle')[_0x406802(0x24e)]('search-match',![])[_0x406802(0x20e)]('fill',function(_0x5c3721){var _0x1a3571=_0x406802;return clickedCircles[_0x1a3571(0x1ee)](_0x5c3721[0x1])?getLeagueColor(_0x5c3721[0x2]):_0x1a3571(0x1da);})[_0x406802(0x20e)](_0x406802(0x26a),function(_0x3f9aaf){var _0x4a9f93=_0x406802;return clickedCircles['includes'](_0x3f9aaf[0x1])?_0x4a9f93(0x1c5):_0x4a9f93(0x1ce);})[_0x406802(0x20e)](_0x406802(0x21d),function(_0x21c284){var _0x52fa27=_0x406802;return clickedCircles[_0x52fa27(0x1ee)](_0x21c284[0x1])?0x2:0x0;})[_0x406802(0x20e)](_0x406802(0x270),_0x406802(0x1ce))[_0x406802(0x1f1)](function(){var _0xc12f01=_0x406802;d3[_0xc12f01(0x248)](this)[_0xc12f01(0x20e)]('r',null),d3[_0xc12f01(0x248)](this)['interrupt']();}),svg[_0x406802(0x1c8)](_0x406802(0x254))[_0x406802(0x24e)]('search-match',![])[_0x406802(0x24e)](_0x406802(0x27b),![])[_0x406802(0x1f1)](function(){var _0x53282d=_0x406802;d3[_0x53282d(0x248)](this)[_0x53282d(0x259)]();}),svg['selectAll'](_0x406802(0x254))[_0x406802(0x1f1)](function(){var _0x571ef7=_0x406802,_0x2100f7=d3[_0x571ef7(0x248)](this),_0xb1553b=_0x2100f7[_0x571ef7(0x1fc)]();!clickedCircles[_0x571ef7(0x1ee)](_0xb1553b)&&_0x2100f7[_0x571ef7(0x21a)]();});}var toggleButton=document[_0xbd169e(0x1c4)](_0xbd169e(0x230));toggleButton['addEventListener'](_0xbd169e(0x289),function(){var _0x44712f=_0xbd169e;medianLinesVisible=!medianLinesVisible,updateChart();const _0x32e0f4=document[_0x44712f(0x1c4)](_0x44712f(0x253));window[_0x44712f(0x234)]&&window[_0x44712f(0x234)][_0x44712f(0x1e7)]?_0x32e0f4[_0x44712f(0x1f3)]=medianLinesVisible?window[_0x44712f(0x234)][_0x44712f(0x1e7)][_0x44712f(0x1e2)]||_0x44712f(0x27d):window[_0x44712f(0x234)][_0x44712f(0x1e7)]['showMedianLines']||'Show\x20median\x20lines':_0x32e0f4[_0x44712f(0x1f3)]=medianLinesVisible?_0x44712f(0x27d):_0x44712f(0x286);});function selectAllCircles(){var _0x4f1e4a=_0xbd169e,_0x4d356c=filteredData['every'](function(_0x55fea9){var _0x56da42=_0x478a;return clickedCircles[_0x56da42(0x1ee)](_0x55fea9[0x1]);});_0x4d356c?(clickedCircles=[],svg[_0x4f1e4a(0x1c8)](_0x4f1e4a(0x238))[_0x4f1e4a(0x20e)](_0x4f1e4a(0x271),_0x4f1e4a(0x1da))[_0x4f1e4a(0x20e)](_0x4f1e4a(0x26a),_0x4f1e4a(0x1ce)),svg[_0x4f1e4a(0x1c8)]('.team-label')['remove']()):(svg[_0x4f1e4a(0x1c8)](_0x4f1e4a(0x238))['each'](function(_0x25175c){var _0x48928c=_0x4f1e4a;!clickedCircles[_0x48928c(0x1ee)](_0x25175c[0x1])&&(clickedCircles['push'](_0x25175c[0x1]),d3[_0x48928c(0x248)](this)[_0x48928c(0x20e)]('fill',getLeagueColor(_0x25175c[0x2]))[_0x48928c(0x20e)](_0x48928c(0x26a),'#000')[_0x48928c(0x20e)](_0x48928c(0x21d),0x2));}),filteredData[_0x4f1e4a(0x282)](function(_0x5d5dfc){addTeamLabel(_0x5d5dfc);}));updateSelectAllButtonText();var _0x16065d=document['getElementById']('select-league')[_0x4f1e4a(0x1f6)];updateLeagueLegend(_0x16065d);}document[_0xbd169e(0x1be)](_0xbd169e(0x228))[_0xbd169e(0x282)](_0x3d3998=>{var _0x594b68=_0xbd169e;_0x3d3998[_0x594b68(0x1c7)](_0x594b68(0x289),function(){var _0x31c307=_0x594b68;document['querySelectorAll'](_0x31c307(0x228))[_0x31c307(0x282)](_0x5df273=>_0x5df273['classList'][_0x31c307(0x21a)]('active')),this[_0x31c307(0x280)][_0x31c307(0x242)]('active'),updateChart();});}),updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x2cb36b){var _0x38c74d=_0xbd169e,_0x20e648=document[_0x38c74d(0x1c4)](_0x38c74d(0x265));if(_0x2cb36b!==_0x38c74d(0x273)&&_0x2cb36b!=='Top\x205\x20Leagues'){_0x20e648['style'][_0x38c74d(0x209)]=_0x38c74d(0x1ce);return;}if(clickedCircles['length']===0x0){_0x20e648[_0x38c74d(0x20e)][_0x38c74d(0x209)]=_0x38c74d(0x1ce);return;}_0x20e648[_0x38c74d(0x20e)][_0x38c74d(0x209)]=_0x38c74d(0x1d7),_0x20e648[_0x38c74d(0x23b)]='';var _0x5b9818=document['createElement'](_0x38c74d(0x1c3));_0x5b9818['style'][_0x38c74d(0x244)]=_0x38c74d(0x23d),_0x5b9818[_0x38c74d(0x20e)][_0x38c74d(0x279)]='15px',_0x20e648['appendChild'](_0x5b9818);var _0x4ae45b=[];if(_0x2cb36b===_0x38c74d(0x273))_0x4ae45b=Object[_0x38c74d(0x24f)](leagueColors);else _0x2cb36b==='Top\x205\x20Leagues'&&(_0x4ae45b=[_0x38c74d(0x20c),_0x38c74d(0x252),_0x38c74d(0x1d0),_0x38c74d(0x285),'Ligue\x201']);_0x4ae45b[_0x38c74d(0x282)](function(_0x50095b){var _0x12f0ce=_0x38c74d,_0x1fbdf4=document[_0x12f0ce(0x1f0)](_0x12f0ce(0x1c3));_0x1fbdf4['className']=_0x12f0ce(0x223);var _0x14ae05=document['createElement'](_0x12f0ce(0x1c3));_0x14ae05[_0x12f0ce(0x1f9)]='legend-color',_0x14ae05[_0x12f0ce(0x20e)][_0x12f0ce(0x1ff)]=leagueColors[_0x50095b];var _0x4b558d=document['createElement']('span');_0x4b558d[_0x12f0ce(0x1f3)]=_0x50095b,_0x1fbdf4[_0x12f0ce(0x24a)](_0x14ae05),_0x1fbdf4[_0x12f0ce(0x24a)](_0x4b558d),_0x20e648[_0x12f0ce(0x24a)](_0x1fbdf4);});}const data1=dataLines[_0xbd169e(0x25b)](_0x596006=>{var _0x2c2aaf=_0xbd169e;const [_0x422840,_0x58284b]=_0x596006[_0x2c2aaf(0x218)](',');return{'name':_0x422840,'link':_0x58284b};});function search2(_0x1abc1b){var _0x2f637e=_0xbd169e;autocompleteBox[_0x2f637e(0x23b)]='';const _0x2fe859=_0x1abc1b[_0x2f637e(0x211)](),_0x3e6d6d=data1[_0x2f637e(0x270)](_0x2a01d8=>{var _0x456242=_0x2f637e;const _0x2b2521=_0x2a01d8[_0x456242(0x208)]?_0x2a01d8[_0x456242(0x208)]['toLowerCase']():'';return _0x2b2521['includes'](_0x2fe859);});if(_0x3e6d6d['length']===0x0){autocompleteBox[_0x2f637e(0x20e)][_0x2f637e(0x209)]=_0x2f637e(0x1ce);return;}_0x3e6d6d[_0x2f637e(0x282)](_0xb3a67d=>{var _0x557823=_0x2f637e;if(_0xb3a67d[_0x557823(0x208)]&&_0xb3a67d[_0x557823(0x26c)]){const _0x510b15=document[_0x557823(0x1f0)](_0x557823(0x1c3)),_0x441fb6=document[_0x557823(0x1f0)]('a');_0x441fb6['href']=_0xb3a67d[_0x557823(0x26c)],_0x441fb6[_0x557823(0x1f3)]=_0xb3a67d['name'],_0x510b15[_0x557823(0x24a)](_0x441fb6),autocompleteBox[_0x557823(0x24a)](_0x510b15);}}),autocompleteBox['style'][_0x2f637e(0x209)]=_0x2f637e(0x255);}searchInput[_0xbd169e(0x1c7)](_0xbd169e(0x243),()=>{var _0x5fd212=_0xbd169e;const _0x10649f=searchInput[_0x5fd212(0x1f6)];_0x10649f[_0x5fd212(0x24c)]()===''?autocompleteBox[_0x5fd212(0x20e)][_0x5fd212(0x209)]='none':search2(_0x10649f);});function addTeamLabel(_0x3e08ee){var _0x18ff4d=_0xbd169e,_0x52b43d=xScale(_0x3e08ee[header[_0x18ff4d(0x1de)](xMetric)]),_0x225758=yScale(_0x3e08ee[header[_0x18ff4d(0x1de)](yMetric)]),_0x496e82=_0x18ff4d(0x1bc)+_0x3e08ee[0x1]['replace'](/\s+/g,'-')[_0x18ff4d(0x211)]();if(svg[_0x18ff4d(0x248)]('.'+_0x496e82)[_0x18ff4d(0x1d1)]()>0x0)return;var _0x13d0e6=svg[_0x18ff4d(0x205)](_0x18ff4d(0x1fc))[_0x18ff4d(0x217)](_0x18ff4d(0x1cb),'team-label\x20'+_0x496e82)[_0x18ff4d(0x217)]('x',_0x52b43d+0xc)[_0x18ff4d(0x217)]('y',_0x225758+0x4)[_0x18ff4d(0x1fc)](_0x3e08ee[0x1])[_0x18ff4d(0x20e)](_0x18ff4d(0x20f),_0x18ff4d(0x245))[_0x18ff4d(0x20e)](_0x18ff4d(0x1f4),_0x18ff4d(0x23c))[_0x18ff4d(0x20e)](_0x18ff4d(0x27a),_0x18ff4d(0x27e))['style']('fill','#333');positionLabelToAvoidOverlap(_0x13d0e6,_0x52b43d,_0x225758);}function positionLabelToAvoidOverlap(_0x872840,_0x140d2d,_0x2743b1){var _0x519875=_0xbd169e,_0x3ab6c4=svg[_0x519875(0x1c8)](_0x519875(0x254))[_0x519875(0x270)](function(){var _0x505543=_0x519875;return this!==_0x872840[_0x505543(0x278)]();}),_0x3f225d=_0x872840[_0x519875(0x278)]()[_0x519875(0x1db)](),_0x142b7=[{'x':_0x140d2d+0xc,'y':_0x2743b1+0x4},{'x':_0x140d2d+0xc,'y':_0x2743b1-0xa},{'x':_0x140d2d+0xc,'y':_0x2743b1+0x12},{'x':_0x140d2d-_0x3f225d[_0x519875(0x272)]-0x5,'y':_0x2743b1+0x4},{'x':_0x140d2d-_0x3f225d[_0x519875(0x272)]-0x5,'y':_0x2743b1-0xa},{'x':_0x140d2d-_0x3f225d[_0x519875(0x272)]-0x5,'y':_0x2743b1+0x12},{'x':_0x140d2d-_0x3f225d['width']/0x2,'y':_0x2743b1-0xf},{'x':_0x140d2d-_0x3f225d[_0x519875(0x272)]/0x2,'y':_0x2743b1+0x19}],_0x3ebe5b=findPositionWithoutOverlap(_0x142b7,_0x3ab6c4,_0x3f225d);_0x872840[_0x519875(0x217)]('x',_0x3ebe5b['x'])[_0x519875(0x217)]('y',_0x3ebe5b['y']);}function findPositionWithoutOverlap(_0x2ef44a,_0x116593,_0x3b2f44){var _0x2835e8=_0xbd169e;for(var _0x3c23e1=0x0;_0x3c23e1<_0x2ef44a[_0x2835e8(0x24d)];_0x3c23e1++){var _0xbb8073=_0x2ef44a[_0x3c23e1],_0x4d2a75=![],_0x2b7604={'x1':_0xbb8073['x'],'y1':_0xbb8073['y']-_0x3b2f44[_0x2835e8(0x267)],'x2':_0xbb8073['x']+_0x3b2f44[_0x2835e8(0x272)],'y2':_0xbb8073['y']+0x5};if(_0x2b7604['x1']<0x0||_0x2b7604['x2']>width||_0x2b7604['y1']<0x0||_0x2b7604['y2']>height)continue;_0x116593[_0x2835e8(0x1f1)](function(){var _0x43cdee=_0x2835e8,_0x5765df=d3['select'](this)[_0x43cdee(0x278)]()['getBBox'](),_0x153179=parseFloat(d3[_0x43cdee(0x248)](this)[_0x43cdee(0x217)]('x')),_0x13928b=parseFloat(d3[_0x43cdee(0x248)](this)['attr']('y')),_0x3aab41={'x1':_0x153179,'y1':_0x13928b-_0x5765df[_0x43cdee(0x267)],'x2':_0x153179+_0x5765df[_0x43cdee(0x272)],'y2':_0x13928b+0x5};!(_0x2b7604['x2']<_0x3aab41['x1']||_0x2b7604['x1']>_0x3aab41['x2']||_0x2b7604['y2']<_0x3aab41['y1']||_0x2b7604['y1']>_0x3aab41['y2'])&&(_0x4d2a75=!![]);});if(!_0x4d2a75)return _0xbb8073;}for(var _0x3c23e1=0x0;_0x3c23e1<_0x2ef44a[_0x2835e8(0x24d)];_0x3c23e1++){var _0xbb8073=_0x2ef44a[_0x3c23e1],_0x2b7604={'x1':_0xbb8073['x'],'y1':_0xbb8073['y']-_0x3b2f44[_0x2835e8(0x267)],'x2':_0xbb8073['x']+_0x3b2f44['width'],'y2':_0xbb8073['y']+0x5};if(_0x2b7604['x1']>=0x0&&_0x2b7604['x2']<=width&&_0x2b7604['y1']>=0x0&&_0x2b7604['y2']<=height)return _0xbb8073;}var _0x29e483={'x':Math[_0x2835e8(0x237)](Math[_0x2835e8(0x1eb)](0x0,_0x2ef44a[0x0]['x']),width-_0x3b2f44[_0x2835e8(0x272)]),'y':Math[_0x2835e8(0x237)](Math[_0x2835e8(0x1eb)](_0x3b2f44[_0x2835e8(0x267)],_0x2ef44a[0x0]['y']),height)};return _0x29e483;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0x1799b2=_0x478a,_0x50efbf=svg[_0x1799b2(0x1c8)](_0x1799b2(0x254));_0x50efbf['each'](function(){var _0x3430c6=_0x1799b2,_0x3f3aba=d3[_0x3430c6(0x248)](this),_0x4b0846=_0x3f3aba['text'](),_0x248904=filteredData['find'](function(_0x1c6831){return _0x1c6831[0x1]===_0x4b0846;});if(_0x248904){var _0xc2c416=xScale(_0x248904[header[_0x3430c6(0x1de)](xMetric)]),_0xce8586=yScale(_0x248904[header[_0x3430c6(0x1de)](yMetric)]);positionLabelToAvoidOverlap(_0x3f3aba,_0xc2c416,_0xce8586);}});},0xa);},document['addEventListener'](_0xbd169e(0x258),function(){var _0x387a22=_0xbd169e;const _0x3c12b2=document[_0x387a22(0x1c4)](_0x387a22(0x253));_0x3c12b2['textContent']=medianLinesVisible?_0x387a22(0x27d):'Show\x20median\x20lines';});
        
    </script>
  <script>
    // Translation functionality
    function setLanguage(language) {
      localStorage.setItem('preferredLanguage', language);
      // Update URL with language parameter
      const url = new URL(window.location.href);
      if (language === 'en') {
        url.searchParams.delete('lang');
      } else {
        url.searchParams.set('lang', language);
      }
      window.history.pushState({}, '', url);
      applyLanguage(language);
    }
    
    function getPreferredLanguage() {
      // Check URL parameter first
      const urlParams = new URLSearchParams(window.location.search);
      const langParam = urlParams.get('lang');
      if (langParam) {
        return langParam;
      }
      return localStorage.getItem('preferredLanguage') || getBrowserLanguage() || 'en';
    }
    
    function getBrowserLanguage() {
      return navigator.language.slice(0, 2);
    }
    
    function applyLanguage(language) {
      fetch(`locales/${language}.json`)
        .then(response => response.json())
        .then(translations => {
          // Store translations globally for dynamic access
          window.currentTranslations = translations;
          
          // Update text content for elements with data-i18n attribute
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.textContent = value;
            }
          });
    
          // Update placeholders for elements with data-i18n-placeholder attribute
          document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const keys = element.getAttribute('data-i18n-placeholder').split('.');
            let value = translations;
            for (const key of keys) {
              value = value[key];
            }
            if (value) {
              element.placeholder = value;
            }
          });
    
          // Update meta tags
          document.title = translations.meta.title;
          document.querySelector('meta[name="description"]').setAttribute('content', translations.meta.description);
          document.querySelector('meta[name="language"]').setAttribute('content', language);
        });
    }
    
    // Initialize translations
    const preferredLanguage = getPreferredLanguage();
    applyLanguage(preferredLanguage);
    
    // Language dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      const languageButton = document.getElementById('languageButton');
      const languageDropdown = document.getElementById('languageDropdown');
    
      // Toggle dropdown on button click
      languageButton.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('show');
      });
    
      // Handle language option clicks
      document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('href').split('=')[1];
          setLanguage(lang);
          languageDropdown.classList.remove('show');
        });
      });
    
      // Close dropdown when clicking outside
      document.addEventListener('click', function(event) {
        if (!event.target.closest('.language-switcher-container')) {
          languageDropdown.classList.remove('show');
        }
      });
    });
    </script>
    
</body>
</html>
