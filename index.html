<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

 
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }


        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 30px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
            font-size: 20px;
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }






  

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    cursor: pointer;
    color: var(--text-color);
    background-color: var(--container-bg);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}


.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

/* Make the league selector span 30px smaller */
#league-select-trigger span {
    max-width: calc(100% - 45px); /* 20px + 30px reduction */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 4px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}



.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}



.custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

.metric-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}


.dark-mode .custom-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

@media (max-width: 768px) {
    .custom-select-option {
        padding: 6px 12px;
    }
}


/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}


/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 




        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        

        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}


/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}




.custom-select-option {
    -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            
}
        /* Disable text selection for SVG text elements */
        svg text, .legend,
        .x-label,
        .y-label,
        .team-label,
        .player-name,
        .x-axis text,
        .y-axis text {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
        }


        body.dark-mode #SFctr {
color: #ffffff
}
  #SFctr {
	font-family: Arial, Helvetica, sans-serif !important;
  margin-left: 21.4px;
}

#SFusrlogpst strong:first-child {
  font-size: 0px;
}

#SFusrlogpst input[type="checkbox"],
#SFusrlogpwd input[type="checkbox"],
#SFusrlogpst i,
#SFusrlogpwd i {
  display: none !important;
}

#SFctr .SFfrm input[type="text"],
#SFctr .SFfrm input[type="password"],
#SFctr .SFfrm button {
  border-radius: 6px;
}

#SFusrlogpwd strong {
  visibility: hidden; /* Hide the original text */
  position: relative;
}

#SFusrlogpwd strong::after {
  content: "Forgot Password?"; /* Add the new text */
  visibility: visible;
  position: absolute;
  font-size: 12px;
  font-weight: 400;
  left: 80px;
  white-space: nowrap; /* Prevent text from wrapping */
  top: -15px;
}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        var _0x318285=_0x1f38;(function(_0x5f45ea,_0x36fb95){var _0x4021a8=_0x1f38,_0x47a1ca=_0x5f45ea();while(!![]){try{var _0x318a97=-parseInt(_0x4021a8(0x1c8))/0x1+-parseInt(_0x4021a8(0x1e5))/0x2*(-parseInt(_0x4021a8(0x19c))/0x3)+-parseInt(_0x4021a8(0x21a))/0x4+-parseInt(_0x4021a8(0x1a3))/0x5+-parseInt(_0x4021a8(0x1d8))/0x6*(parseInt(_0x4021a8(0x217))/0x7)+parseInt(_0x4021a8(0x16c))/0x8*(parseInt(_0x4021a8(0x1f7))/0x9)+parseInt(_0x4021a8(0x1e2))/0xa;if(_0x318a97===_0x36fb95)break;else _0x47a1ca['push'](_0x47a1ca['shift']());}catch(_0xb3e377){_0x47a1ca['push'](_0x47a1ca['shift']());}}}(_0x5408,0xb8b8a));let initializeCustomSelectors=function(){var _0x5c53ee=_0x1f38;const _0x4d90d1=document[_0x5c53ee(0x201)](_0x5c53ee(0x243)),_0x64d38f=document[_0x5c53ee(0x201)](_0x5c53ee(0x1df)),_0xbe9e2f=document['getElementById'](_0x5c53ee(0x1e8));setupCustomSelect(_0x4d90d1,_0x64d38f,_0xbe9e2f);const _0x2303eb=document[_0x5c53ee(0x201)]('x-metric-trigger'),_0x207d6e=document[_0x5c53ee(0x201)]('x-metric-options'),_0x7c8c71=document['getElementById'](_0x5c53ee(0x1cc));populateMetricOptions(_0x207d6e,header[_0x5c53ee(0x15a)](0x3),function(_0xd44cf6,_0x3893c6){var _0x3b9bcf=_0x5c53ee;_0x2303eb[_0x3b9bcf(0x188)](_0x3b9bcf(0x227))[_0x3b9bcf(0x16d)]===_0x3893c6&&_0xd44cf6[_0x3b9bcf(0x184)][_0x3b9bcf(0x1db)](_0x3b9bcf(0x190));if(_0x3893c6===header[0x3]){_0xd44cf6[_0x3b9bcf(0x184)][_0x3b9bcf(0x1db)]('selected'),_0x2303eb[_0x3b9bcf(0x188)](_0x3b9bcf(0x227))[_0x3b9bcf(0x16d)]=_0x3893c6;const _0x19faf1=_0x3893c6[_0x3b9bcf(0x1c4)]()['replace'](/ /g,'-')[_0x3b9bcf(0x1e6)](/%/g,_0x3b9bcf(0x1a5));_0x2303eb[_0x3b9bcf(0x188)]('span')[_0x3b9bcf(0x19b)](_0x3b9bcf(0x1ab),_0x3b9bcf(0x1e3)+_0x19faf1);}}),setupCustomSelect(_0x2303eb,_0x207d6e,_0x7c8c71);const _0x423762=document[_0x5c53ee(0x201)]('y-metric-trigger'),_0x561184=document[_0x5c53ee(0x201)]('y-metric-options'),_0x45a834=document[_0x5c53ee(0x201)]('select-y');populateMetricOptions(_0x561184,header[_0x5c53ee(0x15a)](0x3),function(_0x2c967a,_0x372e26){var _0x4c69dd=_0x5c53ee;_0x423762[_0x4c69dd(0x188)]('span')[_0x4c69dd(0x16d)]===_0x372e26&&_0x2c967a['classList'][_0x4c69dd(0x1db)](_0x4c69dd(0x190));if(_0x372e26===header[0x4]){_0x2c967a[_0x4c69dd(0x184)]['add']('selected'),_0x423762[_0x4c69dd(0x188)](_0x4c69dd(0x227))['textContent']=_0x372e26;const _0x4c83e5=_0x372e26[_0x4c69dd(0x1c4)]()['replace'](/ /g,'-')[_0x4c69dd(0x1e6)](/%/g,_0x4c69dd(0x1a5));_0x423762[_0x4c69dd(0x188)](_0x4c69dd(0x227))[_0x4c69dd(0x19b)](_0x4c69dd(0x1ab),'metrics.'+_0x4c83e5);}}),setupCustomSelect(_0x423762,_0x561184,_0x45a834);};function populateMetricOptions(_0x4ca140,_0x1879ba,_0x2337f9){var _0x924698=_0x1f38;_0x4ca140[_0x924698(0x178)]='',_0x1879ba['forEach'](function(_0xf1af8a){var _0x4ed2a4=_0x924698;const _0x29a759=document['createElement'](_0x4ed2a4(0x1eb));_0x29a759[_0x4ed2a4(0x20f)]=_0x4ed2a4(0x21c),_0x29a759['setAttribute'](_0x4ed2a4(0x212),_0xf1af8a);const _0x3d73c2=document['createElement']('span');_0x3d73c2['textContent']=_0xf1af8a;const _0x3fe371=_0xf1af8a[_0x4ed2a4(0x1c4)]()[_0x4ed2a4(0x1e6)](/ /g,'-')[_0x4ed2a4(0x1e6)](/%/g,_0x4ed2a4(0x1a5));_0x3d73c2[_0x4ed2a4(0x19b)](_0x4ed2a4(0x1ab),_0x4ed2a4(0x1e3)+_0x3fe371),_0x29a759['appendChild'](_0x3d73c2);if(_0x2337f9)_0x2337f9(_0x29a759,_0xf1af8a);_0x4ca140[_0x4ed2a4(0x1d6)](_0x29a759);});}function setupCustomSelect(_0x86a964,_0x1f203a,_0x1351e5){var _0x4151ee=_0x1f38;_0x86a964[_0x4151ee(0x246)](_0x4151ee(0x1c6),function(){var _0x2646fb=_0x4151ee;document['querySelectorAll'](_0x2646fb(0x166))[_0x2646fb(0x1f1)](function(_0x407494){var _0x48d0bc=_0x2646fb;if(_0x407494!==_0x86a964){_0x407494[_0x48d0bc(0x184)]['remove'](_0x48d0bc(0x23d));const _0x2320c9=_0x407494['nextElementSibling'];if(_0x2320c9)_0x2320c9[_0x48d0bc(0x1fc)][_0x48d0bc(0x1cf)]=_0x48d0bc(0x200);}}),_0x86a964[_0x2646fb(0x184)][_0x2646fb(0x1f4)](_0x2646fb(0x23d));const _0x303f10=_0x86a964['classList'][_0x2646fb(0x187)](_0x2646fb(0x23d));_0x1f203a['style'][_0x2646fb(0x1cf)]=_0x303f10?_0x2646fb(0x1fd):_0x2646fb(0x200);});const _0x5929e8=_0x1f203a[_0x4151ee(0x21f)](_0x4151ee(0x203));_0x5929e8[_0x4151ee(0x1f1)](_0x108e98=>{var _0x42fa36=_0x4151ee;_0x108e98[_0x42fa36(0x246)](_0x42fa36(0x1c6),function(){var _0x4df1a7=_0x42fa36;_0x5929e8[_0x4df1a7(0x1f1)](_0x490bdf=>_0x490bdf[_0x4df1a7(0x184)][_0x4df1a7(0x21e)](_0x4df1a7(0x190))),this['classList'][_0x4df1a7(0x1db)]('selected');const _0x1c23f9=this[_0x4df1a7(0x188)](_0x4df1a7(0x227))[_0x4df1a7(0x16d)],_0x4cb0d1=this[_0x4df1a7(0x188)](_0x4df1a7(0x227))[_0x4df1a7(0x1f9)](_0x4df1a7(0x1ab)),_0x48d266=this[_0x4df1a7(0x188)](_0x4df1a7(0x1a2));_0x86a964['innerHTML']='';if(_0x48d266){const _0x138f48=_0x48d266[_0x4df1a7(0x1dc)](!![]);_0x138f48[_0x4df1a7(0x1fc)][_0x4df1a7(0x1fa)]=_0x4df1a7(0x1d1),_0x86a964[_0x4df1a7(0x1d6)](_0x138f48);}const _0x26d29c=document[_0x4df1a7(0x219)](_0x4df1a7(0x227));_0x26d29c[_0x4df1a7(0x16d)]=_0x1c23f9;_0x4cb0d1&&_0x26d29c[_0x4df1a7(0x19b)](_0x4df1a7(0x1ab),_0x4cb0d1);_0x86a964[_0x4df1a7(0x1d6)](_0x26d29c);const _0xf989f7=this[_0x4df1a7(0x1f9)](_0x4df1a7(0x212));_0x1351e5[_0x4df1a7(0x16b)]=_0xf989f7||_0x1c23f9;const _0x5d8f68=new Event('change');_0x1351e5[_0x4df1a7(0x18b)](_0x5d8f68),_0x86a964[_0x4df1a7(0x184)][_0x4df1a7(0x21e)](_0x4df1a7(0x23d)),_0x1f203a[_0x4df1a7(0x1fc)][_0x4df1a7(0x1cf)]=_0x4df1a7(0x200);});});let _0x13ea71='',_0x50cb43;document[_0x4151ee(0x246)]('keydown',function(_0x114c9b){var _0xcd4a0=_0x4151ee;if(!_0x86a964[_0xcd4a0(0x184)]['contains'](_0xcd4a0(0x23d)))return;if(_0x114c9b['key']===_0xcd4a0(0x1ae)||_0x114c9b[_0xcd4a0(0x15d)]===_0xcd4a0(0x22a)){_0x114c9b[_0xcd4a0(0x18c)]();const _0x5b1579=Array['from'](_0x5929e8),_0x273322=_0x5b1579[_0xcd4a0(0x238)](_0x50c301=>_0x50c301[_0xcd4a0(0x184)][_0xcd4a0(0x187)]('selected'));let _0x3ffa80;_0x114c9b[_0xcd4a0(0x15d)]==='ArrowDown'?_0x3ffa80=_0x273322<_0x5b1579[_0xcd4a0(0x233)]-0x1?_0x273322+0x1:0x0:_0x3ffa80=_0x273322>0x0?_0x273322-0x1:_0x5b1579[_0xcd4a0(0x233)]-0x1;_0x5929e8[_0xcd4a0(0x1f1)](_0x1494f4=>_0x1494f4[_0xcd4a0(0x184)][_0xcd4a0(0x21e)](_0xcd4a0(0x190))),_0x5b1579[_0x3ffa80][_0xcd4a0(0x184)][_0xcd4a0(0x1db)](_0xcd4a0(0x190)),_0x5b1579[_0x3ffa80][_0xcd4a0(0x221)]({'block':'nearest'});return;}if(_0x114c9b[_0xcd4a0(0x15d)]==='Enter'){_0x114c9b[_0xcd4a0(0x18c)]();const _0x4dc0ca=_0x1f203a[_0xcd4a0(0x188)](_0xcd4a0(0x22c));_0x4dc0ca&&_0x4dc0ca[_0xcd4a0(0x1c6)]();return;}if(_0x114c9b[_0xcd4a0(0x15d)]===_0xcd4a0(0x1ad)){_0x114c9b['preventDefault'](),_0x86a964['classList']['remove']('open'),_0x1f203a[_0xcd4a0(0x1fc)][_0xcd4a0(0x1cf)]='none';return;}if(_0x114c9b['key']['length']===0x1&&_0x114c9b[_0xcd4a0(0x15d)]['match'](/[a-zA-Z0-9%]/)){clearTimeout(_0x50cb43),_0x13ea71+=_0x114c9b['key'][_0xcd4a0(0x1c4)]();const _0x4381da=Array['from'](_0x5929e8)[_0xcd4a0(0x1e1)](_0x252e86=>{var _0x5541d6=_0xcd4a0;const _0x346818=_0x252e86[_0x5541d6(0x188)](_0x5541d6(0x227))[_0x5541d6(0x16d)]['toLowerCase']();return _0x346818[_0x5541d6(0x19a)](_0x13ea71);});_0x4381da&&(_0x5929e8[_0xcd4a0(0x1f1)](_0xc37aee=>_0xc37aee['classList'][_0xcd4a0(0x21e)](_0xcd4a0(0x190))),_0x4381da['classList'][_0xcd4a0(0x1db)]('selected'),_0x4381da[_0xcd4a0(0x221)]({'block':'nearest'})),_0x50cb43=setTimeout(()=>{_0x13ea71='';},0x3e8);}});}document[_0x318285(0x246)]('click',function(_0x36d0b7){var _0x4be0f6=_0x318285;const _0x3fac1a=document[_0x4be0f6(0x21f)](_0x4be0f6(0x209)),_0x29c8ef=document[_0x4be0f6(0x21f)](_0x4be0f6(0x218));let _0x3e3cd0=![];_0x3fac1a[_0x4be0f6(0x1f1)](function(_0x41a232,_0x2d6419){var _0x26f117=_0x4be0f6;const _0x4e0b1b=_0x29c8ef[_0x2d6419];_0x41a232&&_0x4e0b1b&&(_0x41a232['contains'](_0x36d0b7[_0x26f117(0x181)])||_0x4e0b1b[_0x26f117(0x187)](_0x36d0b7['target']))&&(_0x3e3cd0=!![]);}),!_0x3e3cd0&&_0x3fac1a[_0x4be0f6(0x1f1)](function(_0x30360e,_0x1cb029){var _0xcde461=_0x4be0f6;_0x30360e&&_0x29c8ef[_0x1cb029]&&(_0x30360e[_0xcde461(0x184)][_0xcde461(0x21e)](_0xcde461(0x23d)),_0x29c8ef[_0x1cb029][_0xcde461(0x1fc)]['display']=_0xcde461(0x200));});});const xhr=new XMLHttpRequest();xhr['open'](_0x318285(0x247),'https://datamb.football/database/TEAM/teamplots.csv',![]),xhr[_0x318285(0x164)](null);let csvData=xhr[_0x318285(0x1a9)],extraHeaderRow=_0x318285(0x205);csvData=extraHeaderRow+csvData;var rows=csvData['trim']()['split']('\x0a'),header=rows[0x0][_0x318285(0x189)](','),data=rows[_0x318285(0x15a)](0x1)[_0x318285(0x226)](function(_0x252a74){var _0x36ecf6=_0x318285;return _0x252a74[_0x36ecf6(0x189)](',')[_0x36ecf6(0x226)](function(_0x12100f,_0x5a4d39){return _0x5a4d39>=0x3?parseFloat(_0x12100f):_0x12100f;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin['left']-margin[_0x318285(0x1b2)],height=0x302-margin[_0x318285(0x1b3)]-margin['bottom'],leagueColors={'Premier\x20League':_0x318285(0x180),'La\x20Liga':_0x318285(0x224),'Bundesliga':'rgb(85,\x20209,\x2073,\x200.7)','Serie\x20A':'rgb(0,\x20191,\x20255,\x200.7)','Ligue\x201':_0x318285(0x22e),'Eredivisie':_0x318285(0x173),'Primeira\x20Liga':_0x318285(0x23c)};function getLeagueColor(_0x3c8c4){return leagueColors[_0x3c8c4]||'rgba(255,\x200,\x200,\x200.7)';}function updateChartDimensions(){var _0x5de712=_0x318285,_0x1b512b=document['querySelector']('.chart-wrapper')[_0x5de712(0x165)],_0x520833=window[_0x5de712(0x225)]*0.7,_0x506cc7=0x1e,_0x5c1108=Math[_0x5de712(0x20b)](0x43a,_0x1b512b-_0x506cc7*0x2),_0x47bd67=window['innerWidth']/window[_0x5de712(0x225)]<0x1;if(_0x47bd67){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0xd54996=1.4,_0x13ce80=Math[_0x5de712(0x20b)](_0x520833,_0x5c1108*_0xd54996);_0x13ce80=Math[_0x5de712(0x235)](_0x13ce80,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x1b3ace=0.7,_0x13ce80=_0x5c1108*_0x1b3ace;}width=_0x5c1108-margin['left']-margin['right'],height=_0x13ce80-margin[_0x5de712(0x1b3)]-margin['bottom'],d3[_0x5de712(0x1a6)](_0x5de712(0x1be))[_0x5de712(0x15b)](_0x5de712(0x222),_0x5c1108)['attr'](_0x5de712(0x172),_0x13ce80),document[_0x5de712(0x188)](_0x5de712(0x17c))[_0x5de712(0x1fc)][_0x5de712(0x172)]=_0x13ce80+'px';}window['addEventListener']('resize',function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0x415696,_0x26c203){let _0x3b944d;return function(){const _0x55ae85=this,_0xd3841=arguments;clearTimeout(_0x3b944d),_0x3b944d=setTimeout(function(){var _0x6a3386=_0x1f38;_0x415696[_0x6a3386(0x15f)](_0x55ae85,_0xd3841);},_0x26c203);};}var prevWindowWidth=window[_0x318285(0x1fb)],prevWindowHeight=window[_0x318285(0x225)];window['addEventListener']('resize',debounce(function(){var _0xc8c4e9=_0x318285,_0x3914c7=prevWindowWidth/prevWindowHeight<0x1,_0x1a029a=window[_0xc8c4e9(0x1fb)]/window[_0xc8c4e9(0x225)]<0x1;prevWindowWidth=window[_0xc8c4e9(0x1fb)],prevWindowHeight=window[_0xc8c4e9(0x225)],requestAnimationFrame(function(){updateChart();});},0x32));function _0x1f38(_0x51ffd0,_0x49a9d0){var _0x5408a8=_0x5408();return _0x1f38=function(_0x1f38a,_0x305110){_0x1f38a=_0x1f38a-0x15a;var _0x19da08=_0x5408a8[_0x1f38a];return _0x19da08;},_0x1f38(_0x51ffd0,_0x49a9d0);}var medianLinesVisible=![],selectX=d3[_0x318285(0x1a6)]('#select-x'),selectY=d3['select'](_0x318285(0x161)),names=data[_0x318285(0x226)](function(_0xdc5967){return _0xdc5967[0x1];});header[_0x318285(0x15a)](0x3)['forEach'](function(_0x364dd1){var _0x1fc74d=_0x318285;selectX['append'](_0x1fc74d(0x20c))[_0x1fc74d(0x206)](_0x364dd1)['attr'](_0x1fc74d(0x16b),_0x364dd1),selectY[_0x1fc74d(0x182)](_0x1fc74d(0x20c))['text'](_0x364dd1)[_0x1fc74d(0x15b)](_0x1fc74d(0x16b),_0x364dd1);}),selectX[_0x318285(0x1cd)]('value',header[0x3]),selectY[_0x318285(0x1cd)](_0x318285(0x16b),header[0x4]);var svg=d3[_0x318285(0x1a6)](_0x318285(0x1be))['attr']('width',width+margin[_0x318285(0x1d2)]+margin[_0x318285(0x1b2)])[_0x318285(0x15b)]('height',height+margin['top']+margin['bottom'])[_0x318285(0x182)]('g')[_0x318285(0x15b)](_0x318285(0x169),_0x318285(0x18e)+margin[_0x318285(0x1d2)]+','+margin[_0x318285(0x1b3)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3[_0x318285(0x1e9)]()[_0x318285(0x22d)]([0x0,width]),yScale=d3[_0x318285(0x1e9)]()['range']([height,0x0]),xAxis=d3[_0x318285(0x19e)](xScale)[_0x318285(0x1cb)](0x0),yAxis=d3[_0x318285(0x23b)](yScale)['tickSize'](0x0),gXAxis=svg['append']('g')['attr']('class',_0x318285(0x23e))[_0x318285(0x15b)](_0x318285(0x169),_0x318285(0x17f)+height+')'),gYAxis=svg['append']('g')['attr'](_0x318285(0x1af),_0x318285(0x231)),xLabel=svg[_0x318285(0x182)](_0x318285(0x206))[_0x318285(0x15b)](_0x318285(0x1af),_0x318285(0x1b7))['attr'](_0x318285(0x1a4),'end')['attr']('x',width)[_0x318285(0x15b)]('y',height+0x23)[_0x318285(0x1fc)](_0x318285(0x162),_0x318285(0x1fe))[_0x318285(0x1fc)](_0x318285(0x23a),_0x318285(0x1e4)),yLabel=svg[_0x318285(0x182)](_0x318285(0x206))[_0x318285(0x15b)](_0x318285(0x1af),_0x318285(0x1f0))[_0x318285(0x15b)](_0x318285(0x1a4),_0x318285(0x241))['attr'](_0x318285(0x169),_0x318285(0x1ca))[_0x318285(0x15b)]('y',-0x35)[_0x318285(0x15b)]('x',0x0)[_0x318285(0x1fc)](_0x318285(0x162),_0x318285(0x1fe))['style']('font-size',_0x318285(0x1e4)),tooltip=d3[_0x318285(0x1a6)]('body')[_0x318285(0x182)](_0x318285(0x1eb))[_0x318285(0x15b)](_0x318285(0x1af),'tooltip');function isMobileDevice(){var _0x525591=_0x318285;return window[_0x525591(0x1fb)]<=0x300;}function _0x5408(){var _0x59645b=['replace','fontWeight','select-league','scaleLinear','team-label\x20','div','median','<strong>','anchor','league-legend','y-label','forEach','team-label-','median-line','toggle','includes','Serie\x20A','9mHEPOX','</strong><br/>','getAttribute','marginRight','innerWidth','style','block','Inter,\x20sans-serif','opacity','none','getElementById','every','.custom-select-option,\x20.metric-select-option','tooltip.xg-line-right','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','text','pointer','Show\x20median\x20lines','.custom-select-trigger,\x20.metric-select-trigger','flex','min','option','toggle-median-lines','tooltip.xg-line-above','className','rgba(70,\x20130,\x20180,\x200.7)','node','data-value','Premier\x20League','selectAll','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','splice','9842SYzNEH','.custom-select-options,\x20.metric-select-options','createElement','418064UZjvgk','tooltip.xg-line-below','metric-select-option','help','remove','querySelectorAll','ion-ios-circle-outline','scrollIntoView','width','input','rgb(255,\x20223,\x200,\x200.7)','innerHeight','map','span','enter','currentTranslations','ArrowUp','mouseover','.selected','range','rgb(153,\x2050,\x20204,\x200.7)','change','.xy-line-label-bg','y-axis','#2ecc71','length','La\x20Liga','max','toFixed','marker#arrow-over,\x20marker#arrow-under','findIndex','classed','font-size','axisLeft','rgb(255,\x2020,\x20147,\x200.7)','open','x-axis','select-icon','#333','end','text.team-label','league-select-trigger','#000','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','addEventListener','GET','slice','attr','domain','key','transition','apply','fill','#select-y','font-family','Goals\x20per\x2090','send','clientWidth','.custom-select-trigger.open,\x20.metric-select-trigger.open','metrics','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','transform','sqrt','value','11237208eMTccy','textContent','stroke-dasharray','pageY','all','stroke','height','rgb(255,\x20140,\x200,\x200.7)','search-dimmed','.team-label-','5,3','legend-item','innerHTML','cursor','dark-mode','event','.chart-container','12px','.team-label','translate(0,','rgb(255,\x200,\x200,\x200.7)','target','append','temp-label','classList','call','getBBox','contains','querySelector','split','</span>','dispatchEvent','preventDefault','line','translate(','select-all-tooltip','selected','parentNode','ion-ios-circle-filled','500','normalize','.xy-line-hover','Select\x20all\x20teams','circle','interrupt','</span><br/>','startsWith','setAttribute','3DzwMWW','push','axisBottom','pow','backgroundColor','duration','iconify-icon','1086185aKzSED','text-anchor','pct','select','tooltip.xg-line-title','search-match','responseText','legend-color','data-i18n','data','Escape','ArrowDown','class','xy-line-hover','<span>','right','top','each','<br/>','nice','x-label','Top\x205\x20Leagues','.xy-line-label','pageX','transparent','body','indexOf','#scatter-plot','hideMedianLines','Hide\x20median\x20lines','Ligue\x201','getBoundingClientRect','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','toLowerCase','start','click','bottom','1328502JoRiBS','.median-line','rotate(-90)','tickSize','select-x','property','extent','display','filter','8px','left','median-lines-tooltip','tooltip','.performance-label','appendChild','NFD','5028OtfdGD','showMedianLines','xG\x20per\x2090','add','cloneNode','middle','html','league-select-options','stroke-width','find','16181170ErygNg','metrics.','14px','1124666mDvbaf'];_0x5408=function(){return _0x59645b;};return _0x5408();}function positionTooltip(_0x58982b,_0x51d2a4){var _0x484ca=_0x318285;const _0x8a40e7=_0x51d2a4[_0x484ca(0x211)]();if(!_0x8a40e7)return{'left':0x0,'top':0x0};const _0x50dd3f=_0x8a40e7[_0x484ca(0x1c2)](),_0x35f2f6=window[_0x484ca(0x1fb)],_0x42f7e4=window['innerHeight'];let _0xc96e4c=_0x58982b[_0x484ca(0x1ba)]+0xa,_0xe056c5=_0x58982b[_0x484ca(0x16f)]-0x1c;return _0xc96e4c+_0x50dd3f[_0x484ca(0x222)]>_0x35f2f6-0xa&&(_0xc96e4c=_0x58982b[_0x484ca(0x1ba)]-_0x50dd3f[_0x484ca(0x222)]-0xa),_0xe056c5+_0x50dd3f[_0x484ca(0x172)]>_0x42f7e4-0xa&&(_0xe056c5=_0x58982b['pageY']-_0x50dd3f[_0x484ca(0x172)]-0xa),_0xc96e4c=Math[_0x484ca(0x235)](0xa,_0xc96e4c),_0xe056c5=Math[_0x484ca(0x235)](0xa,_0xe056c5),{'left':_0xc96e4c,'top':_0xe056c5};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x1f730d=_0x318285;updateChartDimensions(),d3[_0x1f730d(0x1a6)](_0x1f730d(0x1be))[_0x1f730d(0x15b)](_0x1f730d(0x222),width+margin['left']+margin['right'])[_0x1f730d(0x15b)]('height',height+margin[_0x1f730d(0x1b3)]+margin[_0x1f730d(0x1c7)]),gXAxis[_0x1f730d(0x15b)](_0x1f730d(0x169),_0x1f730d(0x17f)+height+')'),xLabel['attr']('x',width)[_0x1f730d(0x15b)]('y',height+0x23),yLabel['attr']('x',0x0);const _0xfd2387=document[_0x1f730d(0x1bc)]['classList'][_0x1f730d(0x187)](_0x1f730d(0x17a));var _0x3d6500=document['getElementById'](_0x1f730d(0x1e8))['value'];if(_0x3d6500===_0x1f730d(0x170))filteredData=data;else _0x3d6500===_0x1f730d(0x1b8)?filteredData=data[_0x1f730d(0x1d0)](function(_0x198ff2){var _0x364194=_0x1f730d;return _0x198ff2[0x2]===_0x364194(0x213)||_0x198ff2[0x2]===_0x364194(0x234)||_0x198ff2[0x2]==='Bundesliga'||_0x198ff2[0x2]===_0x364194(0x1f6)||_0x198ff2[0x2]==='Ligue\x201';}):filteredData=data[_0x1f730d(0x1d0)](function(_0xae6e85){return _0xae6e85[0x2]===_0x3d6500;});filteredNames=filteredData['map'](function(_0x411a5f){return _0x411a5f[0x1];}),xMetric=selectX[_0x1f730d(0x1cd)]('value'),yMetric=selectY[_0x1f730d(0x1cd)](_0x1f730d(0x16b)),xScale[_0x1f730d(0x22d)]([0x0,width])[_0x1f730d(0x15c)]((function(){var _0xfa83b6=_0x1f730d;const _0x135670=d3[_0xfa83b6(0x1ce)](filteredData,function(_0x548d4b){var _0x425ab7=_0xfa83b6;return+_0x548d4b[header[_0x425ab7(0x1bd)](xMetric)];}),_0x30ac67=d3['scaleLinear']()[_0xfa83b6(0x15c)](_0x135670)[_0xfa83b6(0x1b6)](),_0x435ca9=_0x30ac67[_0xfa83b6(0x15c)](),_0x5be07d=_0x135670[0x1]-_0x135670[0x0],_0x5de2d5=_0x435ca9[0x1]-_0x435ca9[0x0];if(_0x5de2d5/_0x5be07d>1.2){const _0x22f9f7=_0x5be07d*0.1;return[_0x135670[0x0]-_0x22f9f7,_0x135670[0x1]+_0x22f9f7];}else return _0x435ca9;}())),yScale[_0x1f730d(0x22d)]([height,0x0])[_0x1f730d(0x15c)]((function(){var _0x524391=_0x1f730d;const _0x3d7806=d3['extent'](filteredData,function(_0x59160c){var _0x463f3c=_0x1f38;return+_0x59160c[header[_0x463f3c(0x1bd)](yMetric)];}),_0x483e9d=d3[_0x524391(0x1e9)]()[_0x524391(0x15c)](_0x3d7806)[_0x524391(0x1b6)](),_0x5bd234=_0x483e9d[_0x524391(0x15c)](),_0x60d39f=_0x3d7806[0x1]-_0x3d7806[0x0],_0x1af691=_0x5bd234[0x1]-_0x5bd234[0x0];if(_0x1af691/_0x60d39f>1.2){const _0x5d4a52=_0x60d39f*0.1;return[_0x3d7806[0x0]-_0x5d4a52,_0x3d7806[0x1]+_0x5d4a52];}else return _0x5bd234;}())),gXAxis[_0x1f730d(0x185)](d3[_0x1f730d(0x19e)](xScale)['tickSize'](0x0)),gYAxis[_0x1f730d(0x185)](d3[_0x1f730d(0x23b)](yScale)[_0x1f730d(0x1cb)](0x0));const _0x5e9c06='metrics.'+xMetric[_0x1f730d(0x1c4)]()['replace'](/ /g,'-')[_0x1f730d(0x1e6)](/%/g,_0x1f730d(0x1a5)),_0xe9299f=_0x1f730d(0x1e3)+yMetric[_0x1f730d(0x1c4)]()[_0x1f730d(0x1e6)](/ /g,'-')[_0x1f730d(0x1e6)](/%/g,'pct');xLabel[_0x1f730d(0x15b)]('data-i18n',_0x5e9c06),yLabel[_0x1f730d(0x15b)](_0x1f730d(0x1ab),_0xe9299f);if(window[_0x1f730d(0x229)]&&window[_0x1f730d(0x229)]['metrics']){const _0x1d184c=xMetric['toLowerCase']()[_0x1f730d(0x1e6)](/ /g,'-')[_0x1f730d(0x1e6)](/%/g,'pct'),_0x475f8d=yMetric[_0x1f730d(0x1c4)]()[_0x1f730d(0x1e6)](/ /g,'-')[_0x1f730d(0x1e6)](/%/g,_0x1f730d(0x1a5)),_0x24c3ad=window[_0x1f730d(0x229)][_0x1f730d(0x167)][_0x1d184c],_0x18e321=window['currentTranslations'][_0x1f730d(0x167)][_0x475f8d];xLabel[_0x1f730d(0x206)](_0x24c3ad||xMetric),yLabel[_0x1f730d(0x206)](_0x18e321||yMetric);}else xLabel['text'](xMetric),yLabel[_0x1f730d(0x206)](yMetric);svg[_0x1f730d(0x214)]('circle')[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)](_0x1f730d(0x17e))[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)]('.xy-line')['remove'](),svg[_0x1f730d(0x214)]('.xy-line-bg')[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)](_0x1f730d(0x1b9))['remove'](),svg[_0x1f730d(0x214)](_0x1f730d(0x230))['remove'](),svg[_0x1f730d(0x214)](_0x1f730d(0x1d5))[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)]('linearGradient#line-gradient')[_0x1f730d(0x21e)](),svg['selectAll'](_0x1f730d(0x237))[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)](_0x1f730d(0x195))[_0x1f730d(0x21e)](),svg[_0x1f730d(0x214)](_0x1f730d(0x1c9))[_0x1f730d(0x21e)]();if(xMetric===_0x1f730d(0x1da)&&yMetric==='Goals\x20per\x2090'||xMetric===_0x1f730d(0x163)&&yMetric===_0x1f730d(0x1da)){var _0x3066fd=null,_0x27d5a1=d3[_0x1f730d(0x20b)](filteredData,function(_0x72a45f){var _0x32bdd8=_0x1f730d;return _0x72a45f[header[_0x32bdd8(0x1bd)](xMetric)];}),_0x3c32b4=d3['max'](filteredData,function(_0x5c2f3d){var _0x53c41a=_0x1f730d;return _0x5c2f3d[header[_0x53c41a(0x1bd)](xMetric)];}),_0x57f054=d3[_0x1f730d(0x20b)](filteredData,function(_0x13445b){var _0x3fb3b5=_0x1f730d;return _0x13445b[header[_0x3fb3b5(0x1bd)](yMetric)];}),_0x41d1ab=d3[_0x1f730d(0x235)](filteredData,function(_0xfb3134){var _0x34eda9=_0x1f730d;return _0xfb3134[header[_0x34eda9(0x1bd)](yMetric)];}),_0x1a0b83=Math[_0x1f730d(0x20b)](_0x3c32b4,_0x41d1ab),_0x25098c=Math[_0x1f730d(0x235)](_0x27d5a1,_0x57f054);svg[_0x1f730d(0x182)](_0x1f730d(0x18d))[_0x1f730d(0x15b)](_0x1f730d(0x1af),'xy-line')['attr']('x1',xScale(_0x25098c))['attr']('y1',yScale(_0x25098c))[_0x1f730d(0x15b)]('x2',xScale(_0x1a0b83))[_0x1f730d(0x15b)]('y2',yScale(_0x1a0b83))['style'](_0x1f730d(0x171),_0x1f730d(0x232))['style'](_0x1f730d(0x1e0),'2')[_0x1f730d(0x1fc)](_0x1f730d(0x16e),_0x1f730d(0x176)),svg[_0x1f730d(0x182)](_0x1f730d(0x18d))[_0x1f730d(0x15b)](_0x1f730d(0x1af),_0x1f730d(0x1b0))['attr']('x1',xScale(_0x25098c))[_0x1f730d(0x15b)]('y1',yScale(_0x25098c))[_0x1f730d(0x15b)]('x2',xScale(_0x1a0b83))[_0x1f730d(0x15b)]('y2',yScale(_0x1a0b83))[_0x1f730d(0x1fc)](_0x1f730d(0x171),_0x1f730d(0x1bb))[_0x1f730d(0x1fc)](_0x1f730d(0x1e0),'15')['style'](_0x1f730d(0x179),_0x1f730d(0x21d))['on'](_0x1f730d(0x22b),function(){var _0x541714=_0x1f730d;_0x3066fd&&clearTimeout(_0x3066fd);var _0x2cf362=d3['event']['pageX'],_0x35e4bd=d3[_0x541714(0x17b)][_0x541714(0x16f)];_0x3066fd=setTimeout(function(){var _0x162756=_0x541714;tooltip[_0x162756(0x15e)]()['duration'](0xc8)[_0x162756(0x1fc)](_0x162756(0x1ff),0.9);var _0x4d6efe=_0x162756(0x1ed)+getTranslation(_0x162756(0x1a7),'G\x20=\x20xG\x20Line')+_0x162756(0x1f8);xMetric===_0x162756(0x1da)&&yMetric===_0x162756(0x163)?_0x4d6efe+=_0x162756(0x1b1)+getTranslation(_0x162756(0x20e),_0x162756(0x245))+_0x162756(0x199)+_0x162756(0x1b1)+getTranslation(_0x162756(0x21b),_0x162756(0x168))+_0x162756(0x18a):_0x4d6efe+='<span>'+getTranslation(_0x162756(0x204),_0x162756(0x1c3))+'</span><br/>'+_0x162756(0x1b1)+getTranslation('tooltip.xg-line-left',_0x162756(0x215))+_0x162756(0x18a),tooltip[_0x162756(0x1de)](_0x4d6efe)[_0x162756(0x1fc)](_0x162756(0x1d2),_0x2cf362+0xa+'px')[_0x162756(0x1fc)]('top',_0x35e4bd-0x1c+'px');},0x258);})['on']('mouseout',function(){var _0x1c2fef=_0x1f730d;_0x3066fd&&(clearTimeout(_0x3066fd),_0x3066fd=null),tooltip['transition']()[_0x1c2fef(0x1a1)](0x1f4)[_0x1c2fef(0x1fc)](_0x1c2fef(0x1ff),0x0);});}if(medianLinesVisible){var _0x9c9100=d3[_0x1f730d(0x1ec)](filteredData,function(_0x3022ff){var _0x38b6a5=_0x1f730d;return _0x3022ff[header[_0x38b6a5(0x1bd)](xMetric)];}),_0x1e97bf=d3[_0x1f730d(0x1ec)](filteredData,function(_0xf24756){return _0xf24756[header['indexOf'](yMetric)];});svg[_0x1f730d(0x182)]('line')[_0x1f730d(0x15b)](_0x1f730d(0x1af),_0x1f730d(0x1f3))[_0x1f730d(0x15b)]('x1',xScale(_0x9c9100))[_0x1f730d(0x15b)]('y1',0x0)['attr']('x2',xScale(_0x9c9100))[_0x1f730d(0x15b)]('y2',height)[_0x1f730d(0x1fc)]('stroke','rgba(0,\x200,\x200,\x200.3)')['style'](_0x1f730d(0x16e),'4'),svg[_0x1f730d(0x182)](_0x1f730d(0x18d))[_0x1f730d(0x15b)]('class',_0x1f730d(0x1f3))['attr']('x1',0x0)[_0x1f730d(0x15b)]('y1',yScale(_0x1e97bf))[_0x1f730d(0x15b)]('x2',width)[_0x1f730d(0x15b)]('y2',yScale(_0x1e97bf))[_0x1f730d(0x1fc)](_0x1f730d(0x171),'rgba(0,\x200,\x200,\x200.3)')[_0x1f730d(0x1fc)](_0x1f730d(0x16e),'4');}circles=svg[_0x1f730d(0x214)]('circle')[_0x1f730d(0x1ac)](filteredData)[_0x1f730d(0x228)]()[_0x1f730d(0x182)](_0x1f730d(0x197))['attr']('cx',function(_0x10c1a3){var _0x503587=_0x1f730d;return xScale(_0x10c1a3[header[_0x503587(0x1bd)](xMetric)]);})[_0x1f730d(0x15b)]('cy',function(_0x2e81b7){var _0x4d6523=_0x1f730d;return yScale(_0x2e81b7[header[_0x4d6523(0x1bd)](yMetric)]);})[_0x1f730d(0x15b)]('r',0x8)[_0x1f730d(0x1fc)](_0x1f730d(0x160),function(_0x118beb){var _0x316b9a=_0x1f730d;if(clickedCircles[_0x316b9a(0x1f5)](_0x118beb[0x1]))return getLeagueColor(_0x118beb[0x2]);return _0x316b9a(0x210);})[_0x1f730d(0x1fc)](_0x1f730d(0x171),function(_0x238b95){var _0x1d4505=_0x1f730d;return clickedCircles[_0x1d4505(0x1f5)](_0x238b95[0x1])?_0x1d4505(0x244):'none';})[_0x1f730d(0x1fc)]('stroke-width',function(_0x41f5ef){var _0x159d75=_0x1f730d;return clickedCircles[_0x159d75(0x1f5)](_0x41f5ef[0x1])?0x2:0x0;})[_0x1f730d(0x1fc)](_0x1f730d(0x179),_0x1f730d(0x207))['on'](_0x1f730d(0x22b),function(_0x54f46b){var _0x2697bd=_0x1f730d;d3['select'](this)['transition']()[_0x2697bd(0x1a1)](0xc8)['attr']('r',0xa)[_0x2697bd(0x1fc)](_0x2697bd(0x160),getLeagueColor(_0x54f46b[0x2])),tooltip[_0x2697bd(0x15e)]()['duration'](0xc8)[_0x2697bd(0x1fc)]('opacity',0.9);const _0x1e35c7=_0x2697bd(0x1e3)+xMetric[_0x2697bd(0x1c4)]()[_0x2697bd(0x1e6)](/ /g,'-')[_0x2697bd(0x1e6)](/%/g,_0x2697bd(0x1a5)),_0x3f3194='metrics.'+yMetric[_0x2697bd(0x1c4)]()[_0x2697bd(0x1e6)](/ /g,'-')[_0x2697bd(0x1e6)](/%/g,_0x2697bd(0x1a5)),_0x51372a=getTranslation(_0x1e35c7,xMetric),_0x4687ec=getTranslation(_0x3f3194,yMetric);tooltip['html'](_0x2697bd(0x1ed)+_0x54f46b[0x1]+'</strong><br/>'+_0x51372a+':\x20'+_0x54f46b[header['indexOf'](xMetric)][_0x2697bd(0x236)](0x2)+_0x2697bd(0x1b5)+_0x4687ec+':\x20'+_0x54f46b[header[_0x2697bd(0x1bd)](yMetric)][_0x2697bd(0x236)](0x2));const _0x40942c=tooltip['node']();if(_0x40942c){const _0x3ebde9=_0x40942c[_0x2697bd(0x1c2)](),_0x3087e7=window[_0x2697bd(0x1fb)],_0x5bcbad=window[_0x2697bd(0x225)];let _0x4e6b51=d3[_0x2697bd(0x17b)][_0x2697bd(0x1ba)]+0xa,_0x317671=d3[_0x2697bd(0x17b)]['pageY']-0x1c;_0x4e6b51+_0x3ebde9[_0x2697bd(0x222)]>_0x3087e7-0xa&&(_0x4e6b51=d3[_0x2697bd(0x17b)][_0x2697bd(0x1ba)]-_0x3ebde9['width']-0xa),_0x317671+_0x3ebde9[_0x2697bd(0x172)]>_0x5bcbad-0xa&&(_0x317671=d3['event'][_0x2697bd(0x16f)]-_0x3ebde9[_0x2697bd(0x172)]-0xa),_0x4e6b51=Math[_0x2697bd(0x235)](0xa,_0x4e6b51),_0x317671=Math[_0x2697bd(0x235)](0xa,_0x317671),tooltip[_0x2697bd(0x1fc)](_0x2697bd(0x1d2),_0x4e6b51+'px')[_0x2697bd(0x1fc)](_0x2697bd(0x1b3),_0x317671+'px');}window['innerWidth']<=0x300&&setTimeout(function(){var _0x15b4b9=_0x2697bd;tooltip['transition']()['duration'](0xc8)[_0x15b4b9(0x1fc)](_0x15b4b9(0x1ff),0x0);},0x3e8);})['on']('mouseout',function(_0x358d5d){var _0x365efc=_0x1f730d;window['innerWidth']>0x300&&tooltip[_0x365efc(0x15e)]()[_0x365efc(0x1a1)](0x1f4)['style'](_0x365efc(0x1ff),0x0);var _0x109238=clickedCircles['includes'](_0x358d5d[0x1]);d3[_0x365efc(0x1a6)](this)[_0x365efc(0x15e)]()[_0x365efc(0x1a1)](0xc8)[_0x365efc(0x15b)]('r',0x8)[_0x365efc(0x1fc)](_0x365efc(0x160),function(){var _0x4aea59=_0x365efc;return _0x109238?getLeagueColor(_0x358d5d[0x2]):_0x4aea59(0x210);});})['on'](_0x1f730d(0x1c6),function(_0x578811){var _0x119db2=_0x1f730d,_0xaa7619=d3[_0x119db2(0x1a6)](this)['classed'](_0x119db2(0x1a8));_0xaa7619&&resetSearch();var _0x4ae1fc=clickedCircles[_0x119db2(0x1bd)](_0x578811[0x1]);_0x4ae1fc===-0x1?(clickedCircles[_0x119db2(0x19d)](_0x578811[0x1]),d3[_0x119db2(0x1a6)](this)['style']('fill',getLeagueColor(_0x578811[0x2]))[_0x119db2(0x1fc)]('stroke','#000')[_0x119db2(0x1fc)](_0x119db2(0x1e0),0x2),addTeamLabel(_0x578811)):(clickedCircles[_0x119db2(0x216)](_0x4ae1fc,0x1),d3[_0x119db2(0x1a6)](this)[_0x119db2(0x1fc)](_0x119db2(0x160),_0x119db2(0x210))[_0x119db2(0x1fc)](_0x119db2(0x171),_0x119db2(0x200)),svg[_0x119db2(0x214)](_0x119db2(0x175)+_0x578811[0x1][_0x119db2(0x1e6)](/\s+/g,'-')[_0x119db2(0x1c4)]())[_0x119db2(0x21e)]());updateSelectAllButtonText();var _0x55f024=document[_0x119db2(0x201)](_0x119db2(0x1e8))[_0x119db2(0x16b)];updateLeagueLegend(_0x55f024);}),clickedCircles['forEach'](function(_0x10bf4a){var _0x59a3aa=_0x1f730d,_0x3dc86b=filteredData[_0x59a3aa(0x1e1)](function(_0x596fb0){return _0x596fb0[0x1]===_0x10bf4a;});_0x3dc86b&&addTeamLabel(_0x3dc86b);}),updateSelectAllButtonText(),updateLeagueLegend(_0x3d6500);}function updateSelectAllButtonText(){var _0x4f64d0=_0x318285,_0x313b3a=document[_0x4f64d0(0x201)](_0x4f64d0(0x23f)),_0x3c562d=document[_0x4f64d0(0x201)](_0x4f64d0(0x18f)),_0x3f0619=filteredData[_0x4f64d0(0x202)](function(_0x18912f){var _0xd5b8f5=_0x4f64d0;return clickedCircles[_0xd5b8f5(0x1f5)](_0x18912f[0x1]);});_0x3f0619?(_0x313b3a['className']=_0x4f64d0(0x220),_0x3c562d&&(window[_0x4f64d0(0x229)]&&window[_0x4f64d0(0x229)]['tooltip']?_0x3c562d[_0x4f64d0(0x16d)]=window['currentTranslations'][_0x4f64d0(0x1d4)]['unselectAll']||'Unselect\x20all\x20teams':_0x3c562d[_0x4f64d0(0x16d)]='Unselect\x20all\x20teams')):(_0x313b3a['className']=_0x4f64d0(0x192),_0x3c562d&&(window['currentTranslations']&&window['currentTranslations'][_0x4f64d0(0x1d4)]?_0x3c562d[_0x4f64d0(0x16d)]=window[_0x4f64d0(0x229)][_0x4f64d0(0x1d4)]['selectAll']||'Select\x20all\x20teams':_0x3c562d[_0x4f64d0(0x16d)]=_0x4f64d0(0x196)));}selectX['on']('change',updateChart),selectY['on'](_0x318285(0x22f),updateChart);function removeSpecialCharsAndDiacritics(_0x3a41ca){var _0x33734a=_0x318285;if(!_0x3a41ca)return'';return _0x3a41ca[_0x33734a(0x194)](_0x33734a(0x1d7))[_0x33734a(0x1e6)](/[\u0300-\u036f]/g,'')[_0x33734a(0x1e6)](/Ø/g,'O')[_0x33734a(0x1e6)](/ø/g,'o');}var searchBar=document[_0x318285(0x201)]('search-bar');searchBar['addEventListener'](_0x318285(0x223),function(){var _0xb9a349=_0x318285,_0x543b60=searchBar[_0xb9a349(0x16b)][_0xb9a349(0x1c4)]();if(_0x543b60===''){resetSearch();return;}var _0xc8995c=removeSpecialCharsAndDiacritics(_0x543b60);svg['selectAll'](_0xb9a349(0x197))[_0xb9a349(0x239)](_0xb9a349(0x1a8),![])[_0xb9a349(0x1fc)](_0xb9a349(0x160),function(_0x55b70b){var _0x580bd8=_0xb9a349;return clickedCircles[_0x580bd8(0x1f5)](_0x55b70b[0x1])?getLeagueColor(_0x55b70b[0x2]):_0x580bd8(0x210);})[_0xb9a349(0x1fc)](_0xb9a349(0x171),function(_0x3077f6){var _0x348b79=_0xb9a349;return clickedCircles[_0x348b79(0x1f5)](_0x3077f6[0x1])?'#000':_0x348b79(0x200);})[_0xb9a349(0x1fc)](_0xb9a349(0x1e0),function(_0xcf7ae9){var _0x397053=_0xb9a349;return clickedCircles[_0x397053(0x1f5)](_0xcf7ae9[0x1])?0x2:0x0;})[_0xb9a349(0x1fc)](_0xb9a349(0x1d0),'none')[_0xb9a349(0x1b4)](function(){var _0x338884=_0xb9a349;d3['select'](this)[_0x338884(0x1fc)]('r',null);}),svg[_0xb9a349(0x214)](_0xb9a349(0x17e))['classed'](_0xb9a349(0x1a8),![])['classed'](_0xb9a349(0x174),![]);var _0x345c08=[];svg[_0xb9a349(0x214)](_0xb9a349(0x197))[_0xb9a349(0x1d0)](function(_0x36bc3d){var _0x4c321e=_0xb9a349,_0x2329eb=_0x36bc3d[0x1][_0x4c321e(0x1c4)](),_0x962abf=removeSpecialCharsAndDiacritics(_0x2329eb),_0x95403a=_0x2329eb[_0x4c321e(0x1f5)](_0x543b60)||_0x962abf[_0x4c321e(0x1f5)](_0xc8995c);return _0x95403a&&_0x345c08[_0x4c321e(0x19d)](_0x36bc3d[0x1]),_0x95403a;})[_0xb9a349(0x239)](_0xb9a349(0x1a8),!![])[_0xb9a349(0x1b4)](function(){var _0x3a2a44=_0xb9a349;this[_0x3a2a44(0x191)][_0x3a2a44(0x1d6)](this);}),_0x345c08[_0xb9a349(0x233)]>0x0?(svg[_0xb9a349(0x214)]('.team-label')['classed']('search-dimmed',!![]),svg[_0xb9a349(0x214)](_0xb9a349(0x17e))[_0xb9a349(0x1d0)](function(){var _0x344a9=_0xb9a349,_0x27422e=d3['select'](this)['text']();return _0x345c08[_0x344a9(0x1f5)](_0x27422e);})[_0xb9a349(0x239)](_0xb9a349(0x1a8),!![])[_0xb9a349(0x239)](_0xb9a349(0x174),![])[_0xb9a349(0x1b4)](function(){var _0x16816c=_0xb9a349;this[_0x16816c(0x191)][_0x16816c(0x1d6)](this);}),_0x345c08[_0xb9a349(0x1f1)](function(_0x24cc58){var _0x214be4=_0xb9a349,_0x214470=_0x214be4(0x1f2)+_0x24cc58[_0x214be4(0x1e6)](/\s+/g,'-')[_0x214be4(0x1c4)]();if(svg[_0x214be4(0x1a6)]('.'+_0x214470)['size']()===0x0){var _0x384b28=filteredData[_0x214be4(0x1e1)](function(_0x54824f){return _0x54824f[0x1]===_0x24cc58;});_0x384b28&&(addTeamLabel(_0x384b28),svg[_0x214be4(0x1a6)]('.'+_0x214470)[_0x214be4(0x239)]('search-match',!![]));}})):(svg[_0xb9a349(0x214)](_0xb9a349(0x17e))[_0xb9a349(0x1b4)](function(){var _0x50cf5f=_0xb9a349,_0x46d0cc=d3[_0x50cf5f(0x1a6)](this),_0x262e21=_0x46d0cc[_0x50cf5f(0x206)]();!clickedCircles[_0x50cf5f(0x1f5)](_0x262e21)&&_0x46d0cc['remove']();}),svg['selectAll'](_0xb9a349(0x197))[_0xb9a349(0x1fc)](_0xb9a349(0x160),function(_0x21242e){var _0x326020=_0xb9a349;return clickedCircles['includes'](_0x21242e[0x1])?getLeagueColor(_0x21242e[0x2]):_0x326020(0x210);})[_0xb9a349(0x1fc)](_0xb9a349(0x171),function(_0x4be25a){var _0x23eda6=_0xb9a349;return clickedCircles[_0x23eda6(0x1f5)](_0x4be25a[0x1])?_0x23eda6(0x244):_0x23eda6(0x200);})[_0xb9a349(0x1fc)](_0xb9a349(0x1e0),function(_0x108e76){return clickedCircles['includes'](_0x108e76[0x1])?0x2:0x0;}));});function resetSearch(){var _0x50c8b0=_0x318285;searchBar[_0x50c8b0(0x16b)]='',svg[_0x50c8b0(0x214)]('circle')[_0x50c8b0(0x239)](_0x50c8b0(0x1a8),![])['style'](_0x50c8b0(0x160),function(_0xb0f88f){var _0x228e90=_0x50c8b0;return clickedCircles[_0x228e90(0x1f5)](_0xb0f88f[0x1])?getLeagueColor(_0xb0f88f[0x2]):_0x228e90(0x210);})[_0x50c8b0(0x1fc)](_0x50c8b0(0x171),function(_0x16ecc6){var _0x5a5fd6=_0x50c8b0;return clickedCircles[_0x5a5fd6(0x1f5)](_0x16ecc6[0x1])?_0x5a5fd6(0x244):'none';})[_0x50c8b0(0x1fc)](_0x50c8b0(0x1e0),function(_0x142daa){return clickedCircles['includes'](_0x142daa[0x1])?0x2:0x0;})[_0x50c8b0(0x1fc)]('filter',_0x50c8b0(0x200))[_0x50c8b0(0x1b4)](function(){var _0x95de89=_0x50c8b0;d3[_0x95de89(0x1a6)](this)['style']('r',null),d3[_0x95de89(0x1a6)](this)[_0x95de89(0x198)]();}),svg[_0x50c8b0(0x214)](_0x50c8b0(0x17e))[_0x50c8b0(0x239)]('search-match',![])[_0x50c8b0(0x239)](_0x50c8b0(0x174),![])[_0x50c8b0(0x1b4)](function(){var _0x1d7c2c=_0x50c8b0;d3[_0x1d7c2c(0x1a6)](this)[_0x1d7c2c(0x198)]();}),svg['selectAll'](_0x50c8b0(0x17e))[_0x50c8b0(0x1b4)](function(){var _0x3cb1a0=_0x50c8b0,_0x4e78e2=d3['select'](this),_0x112cc6=_0x4e78e2[_0x3cb1a0(0x206)]();!clickedCircles['includes'](_0x112cc6)&&_0x4e78e2[_0x3cb1a0(0x21e)]();});}var toggleButton=document[_0x318285(0x201)](_0x318285(0x20d));toggleButton['addEventListener'](_0x318285(0x1c6),function(){var _0x1d18bf=_0x318285;medianLinesVisible=!medianLinesVisible,updateChart();const _0x3f5c33=document[_0x1d18bf(0x201)](_0x1d18bf(0x1d3));window[_0x1d18bf(0x229)]&&window[_0x1d18bf(0x229)][_0x1d18bf(0x1d4)]?_0x3f5c33[_0x1d18bf(0x16d)]=medianLinesVisible?window[_0x1d18bf(0x229)]['tooltip'][_0x1d18bf(0x1bf)]||'Hide\x20median\x20lines':window[_0x1d18bf(0x229)][_0x1d18bf(0x1d4)][_0x1d18bf(0x1d9)]||_0x1d18bf(0x208):_0x3f5c33[_0x1d18bf(0x16d)]=medianLinesVisible?_0x1d18bf(0x1c0):'Show\x20median\x20lines';});function selectAllCircles(){var _0x199455=_0x318285,_0xb90038=filteredData[_0x199455(0x202)](function(_0x3e9b4c){var _0x5c8d75=_0x199455;return clickedCircles[_0x5c8d75(0x1f5)](_0x3e9b4c[0x1]);});_0xb90038?(clickedCircles=[],svg[_0x199455(0x214)](_0x199455(0x197))[_0x199455(0x1fc)]('fill',_0x199455(0x210))[_0x199455(0x1fc)](_0x199455(0x171),_0x199455(0x200)),svg[_0x199455(0x214)](_0x199455(0x17e))['remove']()):(svg[_0x199455(0x214)](_0x199455(0x197))[_0x199455(0x1b4)](function(_0x34b1f5){var _0x353869=_0x199455;!clickedCircles[_0x353869(0x1f5)](_0x34b1f5[0x1])&&(clickedCircles[_0x353869(0x19d)](_0x34b1f5[0x1]),d3[_0x353869(0x1a6)](this)[_0x353869(0x1fc)](_0x353869(0x160),getLeagueColor(_0x34b1f5[0x2]))[_0x353869(0x1fc)](_0x353869(0x171),_0x353869(0x244))['style'](_0x353869(0x1e0),0x2));}),filteredData[_0x199455(0x1f1)](function(_0x5f3689){addTeamLabel(_0x5f3689);}));updateSelectAllButtonText();var _0x5164ea=document[_0x199455(0x201)](_0x199455(0x1e8))[_0x199455(0x16b)];updateLeagueLegend(_0x5164ea);}updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x275afa){var _0x1b44bb=_0x318285,_0x299f06=document[_0x1b44bb(0x201)](_0x1b44bb(0x1ef));if(_0x275afa!==_0x1b44bb(0x170)&&_0x275afa!=='Top\x205\x20Leagues'){_0x299f06['style'][_0x1b44bb(0x1cf)]='none';return;}if(clickedCircles[_0x1b44bb(0x233)]===0x0){_0x299f06[_0x1b44bb(0x1fc)]['display']='none';return;}var _0x580e28=![];for(var _0x1d072f=0x0;_0x1d072f<filteredData[_0x1b44bb(0x233)];_0x1d072f++){if(clickedCircles['includes'](filteredData[_0x1d072f][0x1])){_0x580e28=!![];break;}}if(!_0x580e28){_0x299f06[_0x1b44bb(0x1fc)][_0x1b44bb(0x1cf)]=_0x1b44bb(0x200);return;}_0x299f06[_0x1b44bb(0x1fc)][_0x1b44bb(0x1cf)]=_0x1b44bb(0x20a),_0x299f06['innerHTML']='';var _0x426da1=document[_0x1b44bb(0x219)](_0x1b44bb(0x1eb));_0x426da1[_0x1b44bb(0x1fc)][_0x1b44bb(0x1e7)]='bold',_0x426da1[_0x1b44bb(0x1fc)]['marginRight']='15px',_0x299f06[_0x1b44bb(0x1d6)](_0x426da1);var _0x431c32=[];if(_0x275afa===_0x1b44bb(0x170))_0x431c32=Object['keys'](leagueColors);else _0x275afa===_0x1b44bb(0x1b8)&&(_0x431c32=[_0x1b44bb(0x213),_0x1b44bb(0x234),'Bundesliga','Serie\x20A',_0x1b44bb(0x1c1)]);_0x431c32[_0x1b44bb(0x1f1)](function(_0x2e9f3b){var _0x560b1e=_0x1b44bb,_0x337c33=document[_0x560b1e(0x219)](_0x560b1e(0x1eb));_0x337c33[_0x560b1e(0x20f)]=_0x560b1e(0x177);var _0xd9ae64=document[_0x560b1e(0x219)](_0x560b1e(0x1eb));_0xd9ae64[_0x560b1e(0x20f)]=_0x560b1e(0x1aa),_0xd9ae64[_0x560b1e(0x1fc)][_0x560b1e(0x1a0)]=leagueColors[_0x2e9f3b];var _0x46e4e2=document[_0x560b1e(0x219)]('span');_0x46e4e2[_0x560b1e(0x16d)]=_0x2e9f3b,_0x337c33[_0x560b1e(0x1d6)](_0xd9ae64),_0x337c33['appendChild'](_0x46e4e2),_0x299f06[_0x560b1e(0x1d6)](_0x337c33);});}function addTeamLabel(_0x1941e8,_0x5cbe86){var _0x262275=_0x318285,_0x112d1f=xScale(_0x1941e8[header[_0x262275(0x1bd)](xMetric)]),_0x4d296f=yScale(_0x1941e8[header['indexOf'](yMetric)]),_0x2e1a02=_0x262275(0x1f2)+_0x1941e8[0x1][_0x262275(0x1c4)]()['replace'](/\s+/g,'-');if(svg[_0x262275(0x1a6)]('.'+_0x2e1a02)['size']()>0x0)return;var _0xfabce2=svg[_0x262275(0x182)]('text')[_0x262275(0x15b)](_0x262275(0x1af),_0x262275(0x183))[_0x262275(0x206)](_0x1941e8[0x1])['style'](_0x262275(0x162),_0x262275(0x1fe))[_0x262275(0x1fc)](_0x262275(0x23a),_0x262275(0x17d))[_0x262275(0x1fc)]('opacity',0x0),_0x5e013d=_0xfabce2[_0x262275(0x211)]()['getComputedTextLength']();_0xfabce2[_0x262275(0x21e)]();var _0x537f57=[{'dx':0x8,'dy':0x0,'anchor':_0x262275(0x1c5)},{'dx':-0x8,'dy':0x0,'anchor':_0x262275(0x241)},{'dx':0x0,'dy':-0x8,'anchor':_0x262275(0x1dd)},{'dx':0x0,'dy':0x8,'anchor':_0x262275(0x1dd)}],_0x4e8856=[];svg[_0x262275(0x214)](_0x262275(0x242))[_0x262275(0x1b4)](function(){var _0x31d957=_0x262275,_0x269302=this[_0x31d957(0x186)]();_0x4e8856['push']({'x1':_0x269302['x']-0x2,'y1':_0x269302['y']-0x2,'x2':_0x269302['x']+_0x269302['width']+0x2,'y2':_0x269302['y']+_0x269302[_0x31d957(0x172)]+0x2});});var _0x59e1d2=null,_0x264f25=0xc,_0x260173=width,_0x1b26fd=height;if(!_0x5cbe86){for(var _0xcb14c8=0x0;_0xcb14c8<_0x537f57[_0x262275(0x233)];_0xcb14c8++){var _0x220478=_0x537f57[_0xcb14c8],_0x421cfc=_0x112d1f+_0x220478['dx'],_0x13531f=_0x4d296f+_0x220478['dy'],_0x5ba836={'x1':_0x220478[_0x262275(0x1ee)]===_0x262275(0x241)?_0x421cfc-_0x5e013d:_0x220478['anchor']===_0x262275(0x1dd)?_0x421cfc-_0x5e013d/0x2:_0x421cfc,'y1':_0x220478['dy']<0x0?_0x13531f-_0x264f25:_0x13531f,'x2':_0x220478[_0x262275(0x1ee)]===_0x262275(0x1c5)?_0x421cfc+_0x5e013d:_0x220478['anchor']===_0x262275(0x1dd)?_0x421cfc+_0x5e013d/0x2:_0x421cfc,'y2':_0x220478['dy']<0x0?_0x13531f:_0x13531f+_0x264f25};if(_0x5ba836['x1']<0x0||_0x5ba836['x2']>_0x260173||_0x5ba836['y1']<0x0||_0x5ba836['y2']>_0x1b26fd)continue;var _0x583eba=![];for(var _0x3d67ae=0x0;_0x3d67ae<_0x4e8856[_0x262275(0x233)];_0x3d67ae++){var _0x1f6ef1=_0x4e8856[_0x3d67ae];if(!(_0x5ba836['x2']<_0x1f6ef1['x1']||_0x5ba836['x1']>_0x1f6ef1['x2']||_0x5ba836['y2']<_0x1f6ef1['y1']||_0x5ba836['y1']>_0x1f6ef1['y2'])){_0x583eba=!![];break;}}if(!_0x583eba){_0x59e1d2=_0x220478;break;}}if(!_0x59e1d2){var _0x266f39=0x32,_0x29e2d4=0x0;_0x4e8856[_0x262275(0x1f1)](function(_0x19fc19){var _0x3298b7=_0x262275,_0x1671d4=(_0x19fc19['x1']+_0x19fc19['x2'])/0x2,_0x3a337d=(_0x19fc19['y1']+_0x19fc19['y2'])/0x2,_0x5d2579=Math[_0x3298b7(0x16a)](Math[_0x3298b7(0x19f)](_0x1671d4-_0x112d1f,0x2)+Math[_0x3298b7(0x19f)](_0x3a337d-_0x4d296f,0x2));_0x5d2579<_0x266f39&&_0x29e2d4++;});if(_0x29e2d4>0x3)return;}}if(!_0x59e1d2){_0x59e1d2=_0x537f57[0x0];var _0x421cfc=_0x112d1f+_0x59e1d2['dx'],_0x13531f=_0x4d296f+_0x59e1d2['dy'],_0x5ba836={'x1':_0x59e1d2[_0x262275(0x1ee)]===_0x262275(0x241)?_0x421cfc-_0x5e013d:_0x59e1d2['anchor']===_0x262275(0x1dd)?_0x421cfc-_0x5e013d/0x2:_0x421cfc,'y1':_0x59e1d2['dy']<0x0?_0x13531f-_0x264f25:_0x13531f,'x2':_0x59e1d2[_0x262275(0x1ee)]===_0x262275(0x1c5)?_0x421cfc+_0x5e013d:_0x59e1d2[_0x262275(0x1ee)]===_0x262275(0x1dd)?_0x421cfc+_0x5e013d/0x2:_0x421cfc,'y2':_0x59e1d2['dy']<0x0?_0x13531f:_0x13531f+_0x264f25};if(_0x5ba836['x1']<0x0)_0x59e1d2=_0x537f57[0x0];else _0x5ba836['x2']>_0x260173&&(_0x59e1d2=_0x537f57[0x1]);if(_0x5ba836['y1']<0x0)_0x59e1d2=_0x537f57[0x3];else _0x5ba836['y2']>_0x1b26fd&&(_0x59e1d2=_0x537f57[0x2]);}var _0x182163=svg[_0x262275(0x182)](_0x262275(0x206))['attr'](_0x262275(0x1af),_0x262275(0x1ea)+_0x2e1a02)[_0x262275(0x15b)]('x',_0x112d1f+_0x59e1d2['dx'])['attr']('y',_0x4d296f+_0x59e1d2['dy'])[_0x262275(0x15b)](_0x262275(0x1a4),_0x59e1d2[_0x262275(0x1ee)])[_0x262275(0x15b)]('dominant-baseline',_0x59e1d2['dy']<0x0?'auto':'hanging')['text'](_0x1941e8[0x1])[_0x262275(0x1fc)]('font-family',_0x262275(0x1fe))[_0x262275(0x1fc)](_0x262275(0x23a),_0x262275(0x17d))['style']('font-weight',_0x262275(0x193))['style']('fill',_0x262275(0x240));_0x5cbe86&&_0x182163[_0x262275(0x239)](_0x262275(0x1a8),!![]);var _0x270dca=_0x182163['node']()[_0x262275(0x186)]();_0x4e8856[_0x262275(0x19d)]({'x1':_0x270dca['x']-0x2,'y1':_0x270dca['y']-0x2,'x2':_0x270dca['x']+_0x270dca[_0x262275(0x222)]+0x2,'y2':_0x270dca['y']+_0x270dca['height']+0x2});}document[_0x318285(0x246)]('DOMContentLoaded',function(){var _0x596a84=_0x318285;const _0x579444=document[_0x596a84(0x201)](_0x596a84(0x1d3));_0x579444[_0x596a84(0x16d)]=medianLinesVisible?_0x596a84(0x1c0):_0x596a84(0x208);});
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
            window.currentTranslations = translations;
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'INPUT') {
              element.setAttribute('placeholder', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });

        function takeScreenshot() {
            const chartContainer = document.querySelector('.chart-container');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            html2canvas(chartContainer, {
                scale: 2, // Higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = renderedCanvas.width;
                finalCanvas.height = renderedCanvas.height;
                const finalCtx = finalCanvas.getContext('2d');
                finalCtx.drawImage(renderedCanvas, 0, 0);
                
                // Load the watermark
                const watermarkImg = new Image();
                watermarkImg.crossOrigin = "Anonymous";
                
                watermarkImg.onload = function() {
                    const watermarkWidth = finalCanvas.width * 0.3;
                    const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
                    
                    const x = (finalCanvas.width - watermarkWidth) / 2;
                    const y = (finalCanvas.height - watermarkHeight) / 2;
                    
                    finalCtx.save();
                    finalCtx.globalAlpha = 0.04;
                    finalCtx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
                    finalCtx.restore();
                    
                    const dataURL = finalCanvas.toDataURL('image/png', 1.0);
                    const link = document.createElement('a');
                    link.download = 'DataMB Screenshot.png';
                    link.href = dataURL;
                    link.click();
                };
                watermarkImg.src = 'https://datamb.football/logo.png';
            }).catch(function(error) {
            });
        }
    </script>
    
</body>
</html>
