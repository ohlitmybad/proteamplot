<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .header {
            background-color: var(--header-bg);
            display: flex;
            padding: 20px;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            position: relative;
            font-family: system-ui;
            top: 0;
            z-index: 100;
        }


        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }

        .position-filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 20px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }




  body.dark-mode .header .button10 {
      color: #aeaeae;
}
body.dark-mode .header .button10:hover {
  color: #2563eb;
background-color: #ffffff;
}

    body.dark-mode header a {
      color: #aeaeae;
}

body.dark-mode .header .logo img {
  opacity: 0.88;
}


body.dark-mode .language-button {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}



  

.header .logo {
  display: flex;
  align-items: center;
  margin-right: auto; /* Push logo to the left */
}

.header .logo img {
  height: 34px;
  width: auto;
  opacity: 0.84;
}
.header .logo-text {
  margin-left: 10px;
  font-size: 23px;
  font-weight: 600;
  transform: translateY(-1.1px); /* Move logo text slightly higher */
}

.header .navigation {
  display: flex;
  align-items: center;
  gap: 25px; /* Reduced gap between buttons */
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-2px); /* Center the navigation and move it higher */
}



.header .button10 {
  padding: 0.5rem 1rem;
  text-decoration: none;
  color: #333;
  line-height: 1.6;
  border-radius: 4px;
  transition: background-color 0.2s;
  font-size: 1.1rem;  /* Added larger font size */
}


.header .button10:hover {
  background-color: #f0f0f0;
  color: #2563eb;

}



/* Group search and language buttons */
.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto; /* Push buttons to the right */
  transform: translateY(-1.25px); /* Move search and language buttons higher */
}

header a {
      color: black;
      text-decoration: none;
    }

    .language-switcher-container {
  position: relative;
  display: none;
}

.language-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px;
  color: #444444;
  display: flex;
  align-items: center;
  font-size: 17px;
}

.language-button iconify-icon {
  font-size: 24px;
  opacity: 0.7;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 10px;
  width: 200px;
  z-index: 1000;
}

.language-option {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 4px;
  color: #444444;
  text-decoration: none;
}



.language-option iconify-icon {
  margin-right: 10px;
  font-size: 20px;
}

.language-dropdown.show {
  display: block;
}

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
}

.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}

.custom-select-option.selected, .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.1);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

body.dark-mode .language-button:hover {
      background-color: #0F0F0E;
      color: #aeaeae;
}

body.dark-mode .language-dropdown {
  background: #e8e6e6;
}

body.dark-mode .language-option {
  color: #000000;
}

/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
@media screen and (max-width: 550px) { .header .navigation { display: none; } }

        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 



        .dark-mode #searchButton3 {
            background-color: #0074d9;
            color: #fff;
        }


        .dark-mode .header .button10 {
            color: #aaa;
        }

        .dark-mode .header .button10:hover {
            color: #2563eb;
            background-color: #1a1a1a;
        }

        .dark-mode header a {
            color: #aaa;
        }

        .dark-mode .header .logo img {
            opacity: 0.9;
            filter: brightness(0.9);
        }

        .dark-mode .language-button {
            background-color: #0e0f0f;
            color: #aaa;
        }

        .dark-mode .language-button:hover {
            background-color: #1a1a1a;
        }

        .dark-mode .language-dropdown {
            background: #1a1a1a;
            border: 1px solid #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .language-option {
            color: #e0e0e0;
        }

        .dark-mode .language-option:hover {
            background-color: #252525;
        }

        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        
        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }
        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}

/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

#SFctr {
	font-size: 15px !important;
}

#SFctr .SFfrm {
    margin-top: 20px;
margin-left: 10px;
}
	    
#SFctr td {
	font-family: Arial, Helvetica, sans-serif !important;
}

body.dark-mode #SFctr td {
	color: #f3f6f4 !important;
}
	    
#SFctr input[type="text"],
#SFctr input[type="password"],
#SFctr input[type="email"] {
	border-radius: 8px;

}

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        var _0x543c33=_0x4ba6;function _0x4ba6(_0x5bedca,_0x10ccf4){var _0x3154a6=_0x3154();return _0x4ba6=function(_0x4ba608,_0x22a07b){_0x4ba608=_0x4ba608-0x1ef;var _0x32885e=_0x3154a6[_0x4ba608];return _0x32885e;},_0x4ba6(_0x5bedca,_0x10ccf4);}(function(_0x29abca,_0x5a5ef0){var _0x57dd30=_0x4ba6,_0x2fc8e4=_0x29abca();while(!![]){try{var _0x4eb1f8=-parseInt(_0x57dd30(0x289))/0x1+parseInt(_0x57dd30(0x260))/0x2+-parseInt(_0x57dd30(0x23b))/0x3+-parseInt(_0x57dd30(0x211))/0x4+-parseInt(_0x57dd30(0x238))/0x5*(parseInt(_0x57dd30(0x227))/0x6)+-parseInt(_0x57dd30(0x2a1))/0x7+parseInt(_0x57dd30(0x242))/0x8;if(_0x4eb1f8===_0x5a5ef0)break;else _0x2fc8e4['push'](_0x2fc8e4['shift']());}catch(_0x54a7c4){_0x2fc8e4['push'](_0x2fc8e4['shift']());}}}(_0x3154,0x95c19));let initializeCustomSelectors=function(){var _0x419f23=_0x4ba6;const _0x3158f9=document[_0x419f23(0x29b)]('league-select-trigger'),_0x314cb8=document[_0x419f23(0x29b)](_0x419f23(0x223)),_0x3c541e=document[_0x419f23(0x29b)](_0x419f23(0x26d));setupCustomSelect(_0x3158f9,_0x314cb8,_0x3c541e);const _0x2b15d3=document[_0x419f23(0x29b)](_0x419f23(0x234)),_0x4a5d82=document[_0x419f23(0x29b)](_0x419f23(0x270)),_0x253c96=document[_0x419f23(0x29b)](_0x419f23(0x29e));populateMetricOptions(_0x4a5d82,header[_0x419f23(0x2dd)](0x3),function(_0x5abdfb,_0x305346){var _0x2b5205=_0x419f23;_0x2b15d3['querySelector']('span')[_0x2b5205(0x2ba)]===_0x305346&&_0x5abdfb['classList'][_0x2b5205(0x23e)](_0x2b5205(0x259));if(_0x305346===header[0x3]){_0x5abdfb[_0x2b5205(0x20d)][_0x2b5205(0x23e)](_0x2b5205(0x259)),_0x2b15d3['querySelector']('span')[_0x2b5205(0x2ba)]=_0x305346;const _0x2cd912=_0x305346[_0x2b5205(0x2d7)]()[_0x2b5205(0x1f9)](/ /g,'-')[_0x2b5205(0x1f9)](/%/g,'pct');_0x2b15d3[_0x2b5205(0x29d)](_0x2b5205(0x23a))['setAttribute'](_0x2b5205(0x2b2),_0x2b5205(0x1f7)+_0x2cd912);}}),setupCustomSelect(_0x2b15d3,_0x4a5d82,_0x253c96);const _0xf837a5=document['getElementById'](_0x419f23(0x2c4)),_0x15ab9d=document['getElementById'](_0x419f23(0x233)),_0x188fe3=document[_0x419f23(0x29b)](_0x419f23(0x2b0));populateMetricOptions(_0x15ab9d,header[_0x419f23(0x2dd)](0x3),function(_0x93b92c,_0x3122a0){var _0x52e230=_0x419f23;_0xf837a5[_0x52e230(0x29d)](_0x52e230(0x23a))[_0x52e230(0x2ba)]===_0x3122a0&&_0x93b92c[_0x52e230(0x20d)]['add']('selected');if(_0x3122a0===header[0x4]){_0x93b92c[_0x52e230(0x20d)][_0x52e230(0x23e)]('selected'),_0xf837a5[_0x52e230(0x29d)](_0x52e230(0x23a))['textContent']=_0x3122a0;const _0x506822=_0x3122a0['toLowerCase']()[_0x52e230(0x1f9)](/ /g,'-')[_0x52e230(0x1f9)](/%/g,'pct');_0xf837a5[_0x52e230(0x29d)]('span')[_0x52e230(0x220)]('data-i18n',_0x52e230(0x1f7)+_0x506822);}}),setupCustomSelect(_0xf837a5,_0x15ab9d,_0x188fe3);};function populateMetricOptions(_0x5a20c4,_0x3930ad,_0xdaaf7a){_0x5a20c4['innerHTML']='',_0x3930ad['forEach'](function(_0x2c8959){var _0xf4b807=_0x4ba6;const _0x218970=document['createElement']('div');_0x218970[_0xf4b807(0x25d)]=_0xf4b807(0x2b6),_0x218970[_0xf4b807(0x220)]('data-value',_0x2c8959);const _0x147e0=document[_0xf4b807(0x2d1)](_0xf4b807(0x23a));_0x147e0['textContent']=_0x2c8959;const _0xce13b1=_0x2c8959[_0xf4b807(0x2d7)]()[_0xf4b807(0x1f9)](/ /g,'-')['replace'](/%/g,_0xf4b807(0x21c));_0x147e0[_0xf4b807(0x220)]('data-i18n',_0xf4b807(0x1f7)+_0xce13b1),_0x218970[_0xf4b807(0x28b)](_0x147e0);if(_0xdaaf7a)_0xdaaf7a(_0x218970,_0x2c8959);_0x5a20c4['appendChild'](_0x218970);});}function setupCustomSelect(_0xd5d93a,_0x2ed954,_0x1d5668){var _0x36f862=_0x4ba6;_0xd5d93a['addEventListener'](_0x36f862(0x2a6),function(){var _0x3ba804=_0x36f862;document['querySelectorAll'](_0x3ba804(0x1fd))[_0x3ba804(0x280)](function(_0x331d41){var _0x4daea7=_0x3ba804;if(_0x331d41!==_0xd5d93a){_0x331d41['classList']['remove'](_0x4daea7(0x2ce));const _0x18e950=_0x331d41['nextElementSibling'];if(_0x18e950)_0x18e950['style'][_0x4daea7(0x274)]=_0x4daea7(0x21f);}}),_0xd5d93a[_0x3ba804(0x20d)]['toggle'](_0x3ba804(0x2ce));const _0x41c8c5=_0xd5d93a[_0x3ba804(0x20d)][_0x3ba804(0x27d)]('open');_0x2ed954[_0x3ba804(0x29a)][_0x3ba804(0x274)]=_0x41c8c5?_0x3ba804(0x1f8):_0x3ba804(0x21f);});const _0x40c828=_0x2ed954[_0x36f862(0x1fa)](_0x36f862(0x226));_0x40c828[_0x36f862(0x280)](_0x48f86a=>{var _0x373cbd=_0x36f862;_0x48f86a[_0x373cbd(0x22b)](_0x373cbd(0x2a6),function(){var _0x35b193=_0x373cbd;_0x40c828[_0x35b193(0x280)](_0x3e2c44=>_0x3e2c44[_0x35b193(0x20d)]['remove'](_0x35b193(0x259))),this['classList']['add'](_0x35b193(0x259));const _0x3d783a=this[_0x35b193(0x29d)](_0x35b193(0x23a))[_0x35b193(0x2ba)],_0x41a28c=this[_0x35b193(0x29d)]('span')['getAttribute']('data-i18n'),_0x2e4e84=this[_0x35b193(0x29d)](_0x35b193(0x2cc));_0xd5d93a[_0x35b193(0x25e)]='';if(_0x2e4e84){const _0x411aeb=_0x2e4e84[_0x35b193(0x258)](!![]);_0x411aeb[_0x35b193(0x29a)][_0x35b193(0x2b5)]=_0x35b193(0x2c2),_0xd5d93a[_0x35b193(0x28b)](_0x411aeb);}const _0x1436d1=document['createElement'](_0x35b193(0x23a));_0x1436d1[_0x35b193(0x2ba)]=_0x3d783a;_0x41a28c&&_0x1436d1['setAttribute'](_0x35b193(0x2b2),_0x41a28c);_0xd5d93a[_0x35b193(0x28b)](_0x1436d1);const _0x292c18=this[_0x35b193(0x2c3)](_0x35b193(0x253));_0x1d5668[_0x35b193(0x235)]=_0x292c18||_0x3d783a;const _0x610a4c=new Event(_0x35b193(0x294));_0x1d5668[_0x35b193(0x20f)](_0x610a4c),_0xd5d93a['classList'][_0x35b193(0x285)](_0x35b193(0x2ce)),_0x2ed954[_0x35b193(0x29a)][_0x35b193(0x274)]=_0x35b193(0x21f);});});let _0x415b44='',_0x25f732;document[_0x36f862(0x22b)](_0x36f862(0x213),function(_0x1ca704){var _0x3e63fc=_0x36f862;if(!_0xd5d93a[_0x3e63fc(0x20d)][_0x3e63fc(0x27d)]('open'))return;if(_0x1ca704[_0x3e63fc(0x284)]==='ArrowDown'||_0x1ca704[_0x3e63fc(0x284)]===_0x3e63fc(0x292)){_0x1ca704[_0x3e63fc(0x2c0)]();const _0x1e31c6=Array['from'](_0x40c828),_0x5062b4=_0x1e31c6[_0x3e63fc(0x286)](_0x5b15cf=>_0x5b15cf[_0x3e63fc(0x20d)][_0x3e63fc(0x27d)](_0x3e63fc(0x259)));let _0x2e6b33;_0x1ca704[_0x3e63fc(0x284)]===_0x3e63fc(0x1ef)?_0x2e6b33=_0x5062b4<_0x1e31c6[_0x3e63fc(0x2db)]-0x1?_0x5062b4+0x1:0x0:_0x2e6b33=_0x5062b4>0x0?_0x5062b4-0x1:_0x1e31c6[_0x3e63fc(0x2db)]-0x1;_0x40c828['forEach'](_0x26f2b1=>_0x26f2b1[_0x3e63fc(0x20d)]['remove'](_0x3e63fc(0x259))),_0x1e31c6[_0x2e6b33][_0x3e63fc(0x20d)][_0x3e63fc(0x23e)](_0x3e63fc(0x259)),_0x1e31c6[_0x2e6b33][_0x3e63fc(0x29f)]({'block':'nearest'});return;}if(_0x1ca704[_0x3e63fc(0x284)]===_0x3e63fc(0x239)){_0x1ca704['preventDefault']();const _0x48549b=_0x2ed954[_0x3e63fc(0x29d)](_0x3e63fc(0x28a));_0x48549b&&_0x48549b[_0x3e63fc(0x2a6)]();return;}if(_0x1ca704[_0x3e63fc(0x284)]===_0x3e63fc(0x251)){_0x1ca704['preventDefault'](),_0xd5d93a[_0x3e63fc(0x20d)][_0x3e63fc(0x285)]('open'),_0x2ed954[_0x3e63fc(0x29a)][_0x3e63fc(0x274)]='none';return;}if(_0x1ca704[_0x3e63fc(0x284)]['length']===0x1&&_0x1ca704[_0x3e63fc(0x284)]['match'](/[a-zA-Z0-9%]/)){clearTimeout(_0x25f732),_0x415b44+=_0x1ca704[_0x3e63fc(0x284)]['toLowerCase']();const _0x13bf85=Array[_0x3e63fc(0x229)](_0x40c828)['find'](_0x3fa406=>{var _0xa00407=_0x3e63fc;const _0x50c3fd=_0x3fa406[_0xa00407(0x29d)](_0xa00407(0x23a))['textContent'][_0xa00407(0x2d7)]();return _0x50c3fd['startsWith'](_0x415b44);});_0x13bf85&&(_0x40c828[_0x3e63fc(0x280)](_0x56f69a=>_0x56f69a[_0x3e63fc(0x20d)][_0x3e63fc(0x285)](_0x3e63fc(0x259))),_0x13bf85[_0x3e63fc(0x20d)][_0x3e63fc(0x23e)](_0x3e63fc(0x259)),_0x13bf85[_0x3e63fc(0x29f)]({'block':'nearest'})),_0x25f732=setTimeout(()=>{_0x415b44='';},0x3e8);}});}document[_0x543c33(0x22b)](_0x543c33(0x2a6),function(_0x118f68){var _0xa9fad0=_0x543c33;const _0x4d85b5=document[_0xa9fad0(0x1fa)](_0xa9fad0(0x2a4)),_0x1c450e=document['querySelectorAll']('.custom-select-options,\x20.metric-select-options');let _0x15d6c3=![];_0x4d85b5[_0xa9fad0(0x280)](function(_0x2ec8cf,_0x46e1e9){var _0x561fdf=_0xa9fad0;const _0x571bef=_0x1c450e[_0x46e1e9];_0x2ec8cf&&_0x571bef&&(_0x2ec8cf[_0x561fdf(0x27d)](_0x118f68[_0x561fdf(0x273)])||_0x571bef[_0x561fdf(0x27d)](_0x118f68[_0x561fdf(0x273)]))&&(_0x15d6c3=!![]);}),!_0x15d6c3&&_0x4d85b5[_0xa9fad0(0x280)](function(_0x29980e,_0xc8a96b){var _0x3bb3a1=_0xa9fad0;_0x29980e&&_0x1c450e[_0xc8a96b]&&(_0x29980e['classList']['remove'](_0x3bb3a1(0x2ce)),_0x1c450e[_0xc8a96b][_0x3bb3a1(0x29a)][_0x3bb3a1(0x274)]=_0x3bb3a1(0x21f));});});const xhr=new XMLHttpRequest();xhr[_0x543c33(0x2ce)]('GET',_0x543c33(0x221),![]),xhr['send'](null);let csvData=xhr[_0x543c33(0x250)],extraHeaderRow=_0x543c33(0x2d3);csvData=extraHeaderRow+csvData;var rows=csvData['trim']()['split']('\x0a'),header=rows[0x0][_0x543c33(0x241)](','),data=rows[_0x543c33(0x2dd)](0x1)['map'](function(_0x31675a){var _0xd45c2d=_0x543c33;return _0x31675a[_0xd45c2d(0x241)](',')[_0xd45c2d(0x2a5)](function(_0x9fe09b,_0x414ccc){return _0x414ccc>=0x3?parseFloat(_0x9fe09b):_0x9fe09b;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0x543c33(0x269)]-margin[_0x543c33(0x23c)],height=0x302-margin[_0x543c33(0x217)]-margin[_0x543c33(0x2de)],leagueColors={'Premier\x20League':'rgba(255,\x200,\x200,\x200.7)','La\x20Liga':_0x543c33(0x2b9),'Bundesliga':_0x543c33(0x288),'Serie\x20A':_0x543c33(0x24d),'Ligue\x201':_0x543c33(0x24b),'Eredivisie':_0x543c33(0x290),'Primeira\x20Liga':_0x543c33(0x29c)};function _0x3154(){var _0x5adcfc=['search-match','apply','search-bar','metrics.','block','replace','querySelectorAll','bold','div','.custom-select-trigger.open,\x20.metric-select-trigger.open','x-axis','500','marker#arrow-over,\x20marker#arrow-under','legend-color','classed','#000','select','size','data-stable-position','<strong>','tickSize','.team-label','Goals\x20per\x2090','end','width','classList','Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','dispatchEvent','scaleLinear','3589084vyPwHi','#select-y','keydown','.chart-container','NFD','</span>','top','opacity','innerHeight','metrics','team-label-','pct','#scatter-plot','data-original-y','none','setAttribute','https://datamb.football/database/TEAM/teamplots.csv','x-label','league-select-options','hideMedianLines','duration','.custom-select-option,\x20.metric-select-option','426lJOAxd','filter','from','enter','addEventListener','font-size','.xy-line-bg','parentNode','Inter,\x20sans-serif','innerWidth','option','class','y-metric-options','x-metric-trigger','value','showMedianLines','<span>','48085gYmJTh','Enter','span','1331688ZDEVdV','right','median-line','add','Show\x20median\x20lines','legend-item','split','22399616NVHIdz','fontWeight','axisBottom','<br/>','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','backgroundColor','Bundesliga','true','Top\x205\x20Leagues','rgba(0,\x200,\x20255,\x200.7)','transparent','rgba(0,\x20128,\x200,\x200.7)','pageY','includes','responseText','Escape','toggle-median-lines','data-value','.performance-label','height','circle','stroke','cloneNode','selected','.team-label-','body','find','className','innerHTML','La\x20Liga','168742qXfSZm','transform','help','cursor','5,3','Hide\x20median\x20lines','call','event','append','left','fill','flex','text','select-league','font-family','every','x-metric-options','stroke-dasharray','translate(','target','display','</strong><br/>','node','tooltip.xg-line-above','max','keys','false','axisLeft','#select-x','contains','select-all-tooltip','dark-mode','forEach','transition','league-legend','html','key','remove','findIndex','select-icon','rgba(255,\x20255,\x200,\x200.7)','110910zsTtJY','.selected','appendChild','rgba(0,\x200,\x200,\x200.3)','Premier\x20League','sqrt','push','rgba(75,\x200,\x20130,\x200.7)','#333','ArrowUp','pageX','change','resize','all','translate(0,','text-anchor','interrupt','style','getElementById','rgba(238,\x20130,\x20238,\x200.7)','querySelector','select-x','scrollIntoView','clientWidth','952266WwsojA','range','unselectAll','.custom-select-trigger,\x20.metric-select-trigger','map','click','#2ecc71','15px','input','getBoundingClientRect','data-original-x','indexOf','xy-line','ion-ios-circle-filled','mouseout','select-y','property','data-i18n','</span><br/>','rgba(70,\x20130,\x20180,\x200.7)','marginRight','metric-select-option','y-axis','toFixed','rgba(255,\x20165,\x200,\x200.7)','textContent','.chart-wrapper','currentTranslations','median','domain','Serie\x20A','preventDefault','selectAll','8px','getAttribute','y-metric-trigger','linearGradient#line-gradient','xG\x20per\x2090','y-label','min','team-label\x20','font-weight','Unselect\x20all\x20teams','iconify-icon','tooltip.xg-line-below','open','Select\x20all\x20teams','splice','createElement','Ligue\x201','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','.xy-line','attr','data','toLowerCase','line','tooltip','search-dimmed','length','getBBox','slice','bottom','ArrowDown','tooltip.xg-line-right','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','each','stroke-width'];_0x3154=function(){return _0x5adcfc;};return _0x3154();}function getLeagueColor(_0x411dcb){return leagueColors[_0x411dcb]||'rgba(255,\x200,\x200,\x200.7)';}function updateChartDimensions(){var _0x4022c8=_0x543c33,_0x59c99c=document[_0x4022c8(0x29d)](_0x4022c8(0x2bb))[_0x4022c8(0x2a0)],_0x202cfe=window[_0x4022c8(0x219)]*0.7,_0x2f2498=0x1e,_0x2e0728=Math[_0x4022c8(0x2c8)](0x43a,_0x59c99c-_0x2f2498*0x2),_0x268ceb=window[_0x4022c8(0x230)]/window[_0x4022c8(0x219)]<0x1;if(_0x268ceb){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x445679=1.4,_0x4c6591=Math[_0x4022c8(0x2c8)](_0x202cfe,_0x2e0728*_0x445679);_0x4c6591=Math[_0x4022c8(0x278)](_0x4c6591,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x585d2a=0.7,_0x4c6591=_0x2e0728*_0x585d2a;}width=_0x2e0728-margin['left']-margin['right'],height=_0x4c6591-margin[_0x4022c8(0x217)]-margin[_0x4022c8(0x2de)],d3[_0x4022c8(0x204)](_0x4022c8(0x21d))['attr']('width',_0x2e0728)['attr'](_0x4022c8(0x255),_0x4c6591),document[_0x4022c8(0x29d)](_0x4022c8(0x214))[_0x4022c8(0x29a)][_0x4022c8(0x255)]=_0x4c6591+'px';}window['addEventListener'](_0x543c33(0x295),function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0x2c5e08,_0xc40c69){let _0xed2671;return function(){const _0x3dd2a4=this,_0x406267=arguments;clearTimeout(_0xed2671),_0xed2671=setTimeout(function(){var _0x587abd=_0x4ba6;_0x2c5e08[_0x587abd(0x1f5)](_0x3dd2a4,_0x406267);},_0xc40c69);};}var prevWindowWidth=window[_0x543c33(0x230)],prevWindowHeight=window[_0x543c33(0x219)];window[_0x543c33(0x22b)](_0x543c33(0x295),debounce(function(){var _0xc6d6da=_0x543c33,_0x4d7ccc=prevWindowWidth/prevWindowHeight<0x1,_0x4d503a=window[_0xc6d6da(0x230)]/window[_0xc6d6da(0x219)]<0x1;prevWindowWidth=window['innerWidth'],prevWindowHeight=window[_0xc6d6da(0x219)],requestAnimationFrame(function(){updateChart();});},0x32));var medianLinesVisible=![],selectX=d3[_0x543c33(0x204)](_0x543c33(0x27c)),selectY=d3[_0x543c33(0x204)](_0x543c33(0x212)),names=data[_0x543c33(0x2a5)](function(_0x53e0bb){return _0x53e0bb[0x1];});header[_0x543c33(0x2dd)](0x3)[_0x543c33(0x280)](function(_0x1933b6){var _0x267457=_0x543c33;selectX[_0x267457(0x268)](_0x267457(0x231))['text'](_0x1933b6)['attr'](_0x267457(0x235),_0x1933b6),selectY[_0x267457(0x268)](_0x267457(0x231))[_0x267457(0x26c)](_0x1933b6)['attr']('value',_0x1933b6);}),selectX[_0x543c33(0x2b1)](_0x543c33(0x235),header[0x3]),selectY[_0x543c33(0x2b1)]('value',header[0x4]);var svg=d3['select'](_0x543c33(0x21d))[_0x543c33(0x2d5)](_0x543c33(0x20c),width+margin[_0x543c33(0x269)]+margin[_0x543c33(0x23c)])[_0x543c33(0x2d5)]('height',height+margin[_0x543c33(0x217)]+margin[_0x543c33(0x2de)])['append']('g')[_0x543c33(0x2d5)]('transform',_0x543c33(0x272)+margin[_0x543c33(0x269)]+','+margin[_0x543c33(0x217)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3['scaleLinear']()[_0x543c33(0x2a2)]([0x0,width]),yScale=d3[_0x543c33(0x210)]()[_0x543c33(0x2a2)]([height,0x0]),xAxis=d3['axisBottom'](xScale)[_0x543c33(0x208)](0x0),yAxis=d3[_0x543c33(0x27b)](yScale)[_0x543c33(0x208)](0x0),gXAxis=svg[_0x543c33(0x268)]('g')[_0x543c33(0x2d5)]('class',_0x543c33(0x1fe))[_0x543c33(0x2d5)](_0x543c33(0x261),_0x543c33(0x297)+height+')'),gYAxis=svg[_0x543c33(0x268)]('g')[_0x543c33(0x2d5)](_0x543c33(0x232),_0x543c33(0x2b7)),xLabel=svg['append'](_0x543c33(0x26c))[_0x543c33(0x2d5)](_0x543c33(0x232),_0x543c33(0x222))['attr']('text-anchor',_0x543c33(0x20b))[_0x543c33(0x2d5)]('x',width)[_0x543c33(0x2d5)]('y',height+0x23)[_0x543c33(0x29a)](_0x543c33(0x26e),_0x543c33(0x22f))[_0x543c33(0x29a)](_0x543c33(0x22c),'14px'),yLabel=svg[_0x543c33(0x268)](_0x543c33(0x26c))[_0x543c33(0x2d5)]('class',_0x543c33(0x2c7))[_0x543c33(0x2d5)](_0x543c33(0x298),'end')[_0x543c33(0x2d5)](_0x543c33(0x261),'rotate(-90)')['attr']('y',-0x35)[_0x543c33(0x2d5)]('x',0x0)['style'](_0x543c33(0x26e),_0x543c33(0x22f))[_0x543c33(0x29a)](_0x543c33(0x22c),'14px'),tooltip=d3[_0x543c33(0x204)](_0x543c33(0x25b))[_0x543c33(0x268)](_0x543c33(0x1fc))[_0x543c33(0x2d5)](_0x543c33(0x232),_0x543c33(0x2d9));function isMobileDevice(){var _0x365d43=_0x543c33;return window[_0x365d43(0x230)]<=0x300;}function positionTooltip(_0x22a040,_0x2e2b47){var _0x4bb072=_0x543c33;const _0x4b2e82=_0x2e2b47['node']();if(!_0x4b2e82)return{'left':0x0,'top':0x0};const _0x5c0d9f=_0x4b2e82[_0x4bb072(0x2aa)](),_0x28a411=window[_0x4bb072(0x230)],_0xbe875a=window[_0x4bb072(0x219)];let _0xbf8797=_0x22a040[_0x4bb072(0x293)]+0xa,_0x4a525c=_0x22a040['pageY']-0x1c;return _0xbf8797+_0x5c0d9f[_0x4bb072(0x20c)]>_0x28a411-0xa&&(_0xbf8797=_0x22a040['pageX']-_0x5c0d9f['width']-0xa),_0x4a525c+_0x5c0d9f['height']>_0xbe875a-0xa&&(_0x4a525c=_0x22a040[_0x4bb072(0x24e)]-_0x5c0d9f[_0x4bb072(0x255)]-0xa),_0xbf8797=Math[_0x4bb072(0x278)](0xa,_0xbf8797),_0x4a525c=Math['max'](0xa,_0x4a525c),{'left':_0xbf8797,'top':_0x4a525c};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x2b68b9=_0x543c33;updateChartDimensions(),d3['select'](_0x2b68b9(0x21d))['attr'](_0x2b68b9(0x20c),width+margin[_0x2b68b9(0x269)]+margin[_0x2b68b9(0x23c)])[_0x2b68b9(0x2d5)](_0x2b68b9(0x255),height+margin[_0x2b68b9(0x217)]+margin[_0x2b68b9(0x2de)]),gXAxis[_0x2b68b9(0x2d5)]('transform',_0x2b68b9(0x297)+height+')'),xLabel[_0x2b68b9(0x2d5)]('x',width)[_0x2b68b9(0x2d5)]('y',height+0x23),yLabel[_0x2b68b9(0x2d5)]('x',0x0);const _0x545dc4=document['body'][_0x2b68b9(0x20d)][_0x2b68b9(0x27d)](_0x2b68b9(0x27f));var _0x1ca32f=document['getElementById'](_0x2b68b9(0x26d))[_0x2b68b9(0x235)];if(_0x1ca32f===_0x2b68b9(0x296))filteredData=data;else _0x1ca32f===_0x2b68b9(0x24a)?filteredData=data['filter'](function(_0x9f4c8f){var _0x183356=_0x2b68b9;return _0x9f4c8f[0x2]===_0x183356(0x28d)||_0x9f4c8f[0x2]==='La\x20Liga'||_0x9f4c8f[0x2]===_0x183356(0x248)||_0x9f4c8f[0x2]===_0x183356(0x2bf)||_0x9f4c8f[0x2]===_0x183356(0x2d2);}):filteredData=data['filter'](function(_0x590851){return _0x590851[0x2]===_0x1ca32f;});filteredNames=filteredData[_0x2b68b9(0x2a5)](function(_0x226a2d){return _0x226a2d[0x1];}),xMetric=selectX[_0x2b68b9(0x2b1)](_0x2b68b9(0x235)),yMetric=selectY[_0x2b68b9(0x2b1)](_0x2b68b9(0x235)),xScale[_0x2b68b9(0x2a2)]([0x0,width])[_0x2b68b9(0x2be)]((function(){var _0x1bb5de=_0x2b68b9;const _0xe4d797=d3['min'](filteredData,_0x53b07f=>_0x53b07f[header[_0x1bb5de(0x2ac)](xMetric)]),_0x150473=d3[_0x1bb5de(0x278)](filteredData,_0x165193=>_0x165193[header[_0x1bb5de(0x2ac)](xMetric)]),_0x2035f7=_0x150473-_0xe4d797,_0x4535f7=_0x2035f7*0.1;return[_0xe4d797-_0x4535f7,_0x150473+_0x4535f7];}())),yScale[_0x2b68b9(0x2a2)]([height,0x0])[_0x2b68b9(0x2be)]((function(){var _0x47d3bc=_0x2b68b9;const _0x3d30d6=d3[_0x47d3bc(0x2c8)](filteredData,_0x2a89c4=>_0x2a89c4[header[_0x47d3bc(0x2ac)](yMetric)]),_0x1e1cf2=d3[_0x47d3bc(0x278)](filteredData,_0x5c5a66=>_0x5c5a66[header[_0x47d3bc(0x2ac)](yMetric)]),_0x2c5bf9=_0x1e1cf2-_0x3d30d6,_0x24bf35=_0x2c5bf9*0.1;return[_0x3d30d6-_0x24bf35,_0x1e1cf2+_0x24bf35];}())),gXAxis[_0x2b68b9(0x266)](d3[_0x2b68b9(0x244)](xScale)[_0x2b68b9(0x208)](0x0)),gYAxis['call'](d3[_0x2b68b9(0x27b)](yScale)[_0x2b68b9(0x208)](0x0));const _0x1d4111=_0x2b68b9(0x1f7)+xMetric[_0x2b68b9(0x2d7)]()[_0x2b68b9(0x1f9)](/ /g,'-')[_0x2b68b9(0x1f9)](/%/g,'pct'),_0xb41417=_0x2b68b9(0x1f7)+yMetric[_0x2b68b9(0x2d7)]()['replace'](/ /g,'-')[_0x2b68b9(0x1f9)](/%/g,_0x2b68b9(0x21c));xLabel[_0x2b68b9(0x2d5)]('data-i18n',_0x1d4111),yLabel['attr'](_0x2b68b9(0x2b2),_0xb41417);if(window[_0x2b68b9(0x2bc)]&&window[_0x2b68b9(0x2bc)][_0x2b68b9(0x21a)]){const _0x2c477d=xMetric['toLowerCase']()['replace'](/ /g,'-')[_0x2b68b9(0x1f9)](/%/g,'pct'),_0x2c63ac=yMetric['toLowerCase']()['replace'](/ /g,'-')[_0x2b68b9(0x1f9)](/%/g,_0x2b68b9(0x21c)),_0x30d037=window[_0x2b68b9(0x2bc)][_0x2b68b9(0x21a)][_0x2c477d],_0x332e4f=window[_0x2b68b9(0x2bc)][_0x2b68b9(0x21a)][_0x2c63ac];xLabel[_0x2b68b9(0x26c)](_0x30d037||xMetric),yLabel[_0x2b68b9(0x26c)](_0x332e4f||yMetric);}else xLabel[_0x2b68b9(0x26c)](xMetric),yLabel[_0x2b68b9(0x26c)](yMetric);svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x256))['remove'](),svg['selectAll']('.team-label')['remove'](),svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x2d4))[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x22d))['remove'](),svg[_0x2b68b9(0x2c1)]('.xy-line-label')[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)]('.xy-line-label-bg')[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x254))[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x2c5))['remove'](),svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x200))[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)]('.xy-line-hover')[_0x2b68b9(0x285)](),svg[_0x2b68b9(0x2c1)]('.median-line')[_0x2b68b9(0x285)]();if(xMetric==='xG\x20per\x2090'&&yMetric===_0x2b68b9(0x20a)||xMetric===_0x2b68b9(0x20a)&&yMetric===_0x2b68b9(0x2c6)){var _0xd75995=null,_0x1dc4f8=d3['min'](filteredData,function(_0x31a875){return _0x31a875[header['indexOf'](xMetric)];}),_0x1b7111=d3[_0x2b68b9(0x278)](filteredData,function(_0x20b395){var _0x26388c=_0x2b68b9;return _0x20b395[header[_0x26388c(0x2ac)](xMetric)];}),_0x267e13=d3['min'](filteredData,function(_0x3193f2){return _0x3193f2[header['indexOf'](yMetric)];}),_0x10b2a4=d3['max'](filteredData,function(_0x70d6e2){var _0x5e1d92=_0x2b68b9;return _0x70d6e2[header[_0x5e1d92(0x2ac)](yMetric)];}),_0x5c3bf0=Math[_0x2b68b9(0x2c8)](_0x1b7111,_0x10b2a4),_0xa2867c=Math[_0x2b68b9(0x278)](_0x1dc4f8,_0x267e13);svg[_0x2b68b9(0x268)](_0x2b68b9(0x2d8))[_0x2b68b9(0x2d5)]('class',_0x2b68b9(0x2ad))[_0x2b68b9(0x2d5)]('x1',xScale(_0xa2867c))[_0x2b68b9(0x2d5)]('y1',yScale(_0xa2867c))[_0x2b68b9(0x2d5)]('x2',xScale(_0x5c3bf0))[_0x2b68b9(0x2d5)]('y2',yScale(_0x5c3bf0))[_0x2b68b9(0x29a)]('stroke',_0x2b68b9(0x2a7))['style'](_0x2b68b9(0x1f3),'2')['style']('stroke-dasharray',_0x2b68b9(0x264)),svg[_0x2b68b9(0x268)](_0x2b68b9(0x2d8))[_0x2b68b9(0x2d5)](_0x2b68b9(0x232),'xy-line-hover')[_0x2b68b9(0x2d5)]('x1',xScale(_0xa2867c))[_0x2b68b9(0x2d5)]('y1',yScale(_0xa2867c))['attr']('x2',xScale(_0x5c3bf0))[_0x2b68b9(0x2d5)]('y2',yScale(_0x5c3bf0))[_0x2b68b9(0x29a)](_0x2b68b9(0x257),_0x2b68b9(0x24c))[_0x2b68b9(0x29a)](_0x2b68b9(0x1f3),'15')[_0x2b68b9(0x29a)]('cursor',_0x2b68b9(0x262))['on']('mouseover',function(){var _0x3c52c6=_0x2b68b9;_0xd75995&&clearTimeout(_0xd75995);var _0xedacbf=d3[_0x3c52c6(0x267)][_0x3c52c6(0x293)],_0x2c9b27=d3[_0x3c52c6(0x267)]['pageY'];_0xd75995=setTimeout(function(){var _0x1ca954=_0x3c52c6;tooltip[_0x1ca954(0x281)]()[_0x1ca954(0x225)](0xc8)[_0x1ca954(0x29a)]('opacity',0.9);var _0x9b6abd=_0x1ca954(0x207)+getTranslation('tooltip.xg-line-title','G\x20=\x20xG\x20Line')+_0x1ca954(0x275);xMetric==='xG\x20per\x2090'&&yMetric===_0x1ca954(0x20a)?_0x9b6abd+='<span>'+getTranslation(_0x1ca954(0x277),_0x1ca954(0x20e))+_0x1ca954(0x2b3)+_0x1ca954(0x237)+getTranslation(_0x1ca954(0x2cd),_0x1ca954(0x246))+'</span>':_0x9b6abd+=_0x1ca954(0x237)+getTranslation(_0x1ca954(0x1f0),'Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.')+_0x1ca954(0x2b3)+'<span>'+getTranslation('tooltip.xg-line-left',_0x1ca954(0x1f1))+_0x1ca954(0x216),tooltip['html'](_0x9b6abd)['style']('left',_0xedacbf+0xa+'px')[_0x1ca954(0x29a)](_0x1ca954(0x217),_0x2c9b27-0x1c+'px');},0x258);})['on'](_0x2b68b9(0x2af),function(){var _0x137f6f=_0x2b68b9;_0xd75995&&(clearTimeout(_0xd75995),_0xd75995=null),tooltip[_0x137f6f(0x281)]()[_0x137f6f(0x225)](0x1f4)['style'](_0x137f6f(0x218),0x0);});}if(medianLinesVisible){var _0xe9d314=d3[_0x2b68b9(0x2bd)](filteredData,function(_0x5453af){return _0x5453af[header['indexOf'](xMetric)];}),_0x1de80c=d3[_0x2b68b9(0x2bd)](filteredData,function(_0x232618){return _0x232618[header['indexOf'](yMetric)];});svg[_0x2b68b9(0x268)](_0x2b68b9(0x2d8))['attr']('class',_0x2b68b9(0x23d))['attr']('x1',xScale(_0xe9d314))[_0x2b68b9(0x2d5)]('y1',0x0)[_0x2b68b9(0x2d5)]('x2',xScale(_0xe9d314))['attr']('y2',height)[_0x2b68b9(0x29a)](_0x2b68b9(0x257),_0x2b68b9(0x28c))[_0x2b68b9(0x29a)]('stroke-dasharray','4'),svg[_0x2b68b9(0x268)](_0x2b68b9(0x2d8))[_0x2b68b9(0x2d5)](_0x2b68b9(0x232),_0x2b68b9(0x23d))[_0x2b68b9(0x2d5)]('x1',0x0)[_0x2b68b9(0x2d5)]('y1',yScale(_0x1de80c))[_0x2b68b9(0x2d5)]('x2',width)[_0x2b68b9(0x2d5)]('y2',yScale(_0x1de80c))[_0x2b68b9(0x29a)](_0x2b68b9(0x257),_0x2b68b9(0x28c))['style'](_0x2b68b9(0x271),'4');}circles=svg[_0x2b68b9(0x2c1)](_0x2b68b9(0x256))[_0x2b68b9(0x2d6)](filteredData)[_0x2b68b9(0x22a)]()[_0x2b68b9(0x268)](_0x2b68b9(0x256))[_0x2b68b9(0x2d5)]('cx',function(_0x34ea66){var _0x5cc61b=_0x2b68b9;return xScale(_0x34ea66[header[_0x5cc61b(0x2ac)](xMetric)]);})[_0x2b68b9(0x2d5)]('cy',function(_0x3ef4de){var _0x27b1ec=_0x2b68b9;return yScale(_0x3ef4de[header[_0x27b1ec(0x2ac)](yMetric)]);})[_0x2b68b9(0x2d5)]('r',0x8)['style'](_0x2b68b9(0x26a),function(_0x5e0799){var _0x53014c=_0x2b68b9;if(clickedCircles[_0x53014c(0x24f)](_0x5e0799[0x1]))return getLeagueColor(_0x5e0799[0x2]);return _0x53014c(0x2b4);})[_0x2b68b9(0x29a)](_0x2b68b9(0x257),function(_0x45d079){var _0x342b8d=_0x2b68b9;return clickedCircles[_0x342b8d(0x24f)](_0x45d079[0x1])?_0x342b8d(0x203):_0x342b8d(0x21f);})[_0x2b68b9(0x29a)](_0x2b68b9(0x1f3),function(_0x21ef68){var _0x4d5b75=_0x2b68b9;return clickedCircles[_0x4d5b75(0x24f)](_0x21ef68[0x1])?0x2:0x0;})[_0x2b68b9(0x29a)](_0x2b68b9(0x263),'pointer')['on']('mouseover',function(_0x332bfa){var _0x25f98b=_0x2b68b9;d3['select'](this)[_0x25f98b(0x281)]()[_0x25f98b(0x225)](0xc8)[_0x25f98b(0x2d5)]('r',0xa)[_0x25f98b(0x29a)](_0x25f98b(0x26a),getLeagueColor(_0x332bfa[0x2])),tooltip[_0x25f98b(0x281)]()[_0x25f98b(0x225)](0xc8)['style']('opacity',0.9);const _0xa985a9=_0x25f98b(0x1f7)+xMetric['toLowerCase']()[_0x25f98b(0x1f9)](/ /g,'-')[_0x25f98b(0x1f9)](/%/g,_0x25f98b(0x21c)),_0x269252=_0x25f98b(0x1f7)+yMetric[_0x25f98b(0x2d7)]()[_0x25f98b(0x1f9)](/ /g,'-')['replace'](/%/g,_0x25f98b(0x21c)),_0x58839a=getTranslation(_0xa985a9,xMetric),_0x2c8bbd=getTranslation(_0x269252,yMetric);tooltip[_0x25f98b(0x283)](_0x25f98b(0x207)+_0x332bfa[0x1]+'</strong><br/>'+_0x58839a+':\x20'+_0x332bfa[header['indexOf'](xMetric)][_0x25f98b(0x2b8)](0x2)+_0x25f98b(0x245)+_0x2c8bbd+':\x20'+_0x332bfa[header[_0x25f98b(0x2ac)](yMetric)][_0x25f98b(0x2b8)](0x2));const _0x2b62c4=tooltip[_0x25f98b(0x276)]();if(_0x2b62c4){const _0x976c9=_0x2b62c4[_0x25f98b(0x2aa)](),_0x37b499=window['innerWidth'],_0xa2ea32=window['innerHeight'];let _0x4c7c6a=d3['event']['pageX']+0xa,_0x23b866=d3['event']['pageY']-0x1c;_0x4c7c6a+_0x976c9[_0x25f98b(0x20c)]>_0x37b499-0xa&&(_0x4c7c6a=d3[_0x25f98b(0x267)][_0x25f98b(0x293)]-_0x976c9[_0x25f98b(0x20c)]-0xa),_0x23b866+_0x976c9[_0x25f98b(0x255)]>_0xa2ea32-0xa&&(_0x23b866=d3[_0x25f98b(0x267)][_0x25f98b(0x24e)]-_0x976c9[_0x25f98b(0x255)]-0xa),_0x4c7c6a=Math[_0x25f98b(0x278)](0xa,_0x4c7c6a),_0x23b866=Math['max'](0xa,_0x23b866),tooltip['style'](_0x25f98b(0x269),_0x4c7c6a+'px')[_0x25f98b(0x29a)](_0x25f98b(0x217),_0x23b866+'px');}else tooltip[_0x25f98b(0x29a)](_0x25f98b(0x269),d3['event'][_0x25f98b(0x293)]+0xa+'px')[_0x25f98b(0x29a)](_0x25f98b(0x217),d3['event'][_0x25f98b(0x24e)]-0x1c+'px');window[_0x25f98b(0x230)]<=0x300&&setTimeout(function(){var _0x2159ef=_0x25f98b;tooltip[_0x2159ef(0x281)]()[_0x2159ef(0x225)](0xc8)[_0x2159ef(0x29a)](_0x2159ef(0x218),0x0);},0x3e8);})['on'](_0x2b68b9(0x2af),function(_0x5390e2){var _0x38c89d=_0x2b68b9;window[_0x38c89d(0x230)]>0x300&&tooltip[_0x38c89d(0x281)]()[_0x38c89d(0x225)](0x1f4)[_0x38c89d(0x29a)](_0x38c89d(0x218),0x0);var _0x47444e=clickedCircles[_0x38c89d(0x24f)](_0x5390e2[0x1]);d3[_0x38c89d(0x204)](this)[_0x38c89d(0x281)]()['duration'](0xc8)['attr']('r',0x8)[_0x38c89d(0x29a)](_0x38c89d(0x26a),function(){return _0x47444e?getLeagueColor(_0x5390e2[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';});})['on'](_0x2b68b9(0x2a6),function(_0x252841){var _0x30a27b=_0x2b68b9,_0x57b017=d3[_0x30a27b(0x204)](this)[_0x30a27b(0x202)]('search-match');_0x57b017&&resetSearch();var _0x37f685=clickedCircles['indexOf'](_0x252841[0x1]);_0x37f685===-0x1?(clickedCircles[_0x30a27b(0x28f)](_0x252841[0x1]),d3[_0x30a27b(0x204)](this)[_0x30a27b(0x29a)]('fill',getLeagueColor(_0x252841[0x2]))[_0x30a27b(0x29a)]('stroke',_0x30a27b(0x203))['style'](_0x30a27b(0x1f3),0x2),addTeamLabel(_0x252841)):(clickedCircles[_0x30a27b(0x2d0)](_0x37f685,0x1),d3[_0x30a27b(0x204)](this)['style'](_0x30a27b(0x26a),'rgba(70,\x20130,\x20180,\x200.7)')[_0x30a27b(0x29a)](_0x30a27b(0x257),_0x30a27b(0x21f)),svg['selectAll'](_0x30a27b(0x25a)+_0x252841[0x1][_0x30a27b(0x1f9)](/\s+/g,'-')['toLowerCase']())[_0x30a27b(0x285)]());updateSelectAllButtonText();var _0x5ecde8=document[_0x30a27b(0x29b)](_0x30a27b(0x26d))[_0x30a27b(0x235)];updateLeagueLegend(_0x5ecde8);}),clickedCircles['forEach'](function(_0x4d48b5){var _0x24aa05=filteredData['find'](function(_0x5e48ac){return _0x5e48ac[0x1]===_0x4d48b5;});_0x24aa05&&addTeamLabel(_0x24aa05);}),updateSelectAllButtonText(),updateLeagueLegend(_0x1ca32f);}function updateSelectAllButtonText(){var _0x41fa31=_0x543c33,_0x49cfd4=document[_0x41fa31(0x29b)](_0x41fa31(0x287)),_0x3e8649=document['getElementById'](_0x41fa31(0x27e)),_0x1461c9=filteredData[_0x41fa31(0x26f)](function(_0x4ff440){return clickedCircles['includes'](_0x4ff440[0x1]);});_0x1461c9?(_0x49cfd4[_0x41fa31(0x25d)]='ion-ios-circle-outline',_0x3e8649&&(window[_0x41fa31(0x2bc)]&&window[_0x41fa31(0x2bc)]['tooltip']?_0x3e8649[_0x41fa31(0x2ba)]=window[_0x41fa31(0x2bc)]['tooltip'][_0x41fa31(0x2a3)]||'Unselect\x20all\x20teams':_0x3e8649[_0x41fa31(0x2ba)]=_0x41fa31(0x2cb))):(_0x49cfd4['className']=_0x41fa31(0x2ae),_0x3e8649&&(window['currentTranslations']&&window[_0x41fa31(0x2bc)][_0x41fa31(0x2d9)]?_0x3e8649[_0x41fa31(0x2ba)]=window[_0x41fa31(0x2bc)][_0x41fa31(0x2d9)][_0x41fa31(0x2c1)]||_0x41fa31(0x2cf):_0x3e8649[_0x41fa31(0x2ba)]=_0x41fa31(0x2cf)));}selectX['on'](_0x543c33(0x294),updateChart),selectY['on'](_0x543c33(0x294),updateChart);function removeSpecialCharsAndDiacritics(_0x2d5f37){var _0x366bbc=_0x543c33;if(!_0x2d5f37)return'';return _0x2d5f37['normalize'](_0x366bbc(0x215))[_0x366bbc(0x1f9)](/[\u0300-\u036f]/g,'')[_0x366bbc(0x1f9)](//g,'O')[_0x366bbc(0x1f9)](//g,'o');}var searchBar=document[_0x543c33(0x29b)](_0x543c33(0x1f6));searchBar[_0x543c33(0x22b)](_0x543c33(0x2a9),function(){var _0x49c37e=_0x543c33,_0x1a6463=searchBar[_0x49c37e(0x235)][_0x49c37e(0x2d7)]();if(_0x1a6463===''){resetSearch();return;}var _0x5113b4=removeSpecialCharsAndDiacritics(_0x1a6463);svg[_0x49c37e(0x2c1)](_0x49c37e(0x256))[_0x49c37e(0x202)](_0x49c37e(0x1f4),![])[_0x49c37e(0x29a)]('fill',function(_0x498ad7){var _0xfcba0c=_0x49c37e;return clickedCircles[_0xfcba0c(0x24f)](_0x498ad7[0x1])?getLeagueColor(_0x498ad7[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})['style'](_0x49c37e(0x257),function(_0x2591a7){var _0x83901f=_0x49c37e;return clickedCircles[_0x83901f(0x24f)](_0x2591a7[0x1])?'#000':_0x83901f(0x21f);})['style'](_0x49c37e(0x1f3),function(_0x78dc1a){var _0xede0fc=_0x49c37e;return clickedCircles[_0xede0fc(0x24f)](_0x78dc1a[0x1])?0x2:0x0;})[_0x49c37e(0x29a)](_0x49c37e(0x228),_0x49c37e(0x21f))[_0x49c37e(0x1f2)](function(){var _0x32c3ad=_0x49c37e;d3[_0x32c3ad(0x204)](this)[_0x32c3ad(0x29a)]('r',null);}),svg[_0x49c37e(0x2c1)](_0x49c37e(0x209))[_0x49c37e(0x202)]('search-match',![])[_0x49c37e(0x202)](_0x49c37e(0x2da),![]);var _0xc4d101=[];svg[_0x49c37e(0x2c1)](_0x49c37e(0x256))[_0x49c37e(0x228)](function(_0x490915){var _0x322835=_0x49c37e,_0x227573=_0x490915[0x1][_0x322835(0x2d7)](),_0x2352a5=removeSpecialCharsAndDiacritics(_0x227573),_0x5b4788=_0x227573['includes'](_0x1a6463)||_0x2352a5['includes'](_0x5113b4);return _0x5b4788&&_0xc4d101['push'](_0x490915[0x1]),_0x5b4788;})[_0x49c37e(0x202)]('search-match',!![])[_0x49c37e(0x1f2)](function(){var _0x3d6cd8=_0x49c37e;this[_0x3d6cd8(0x22e)][_0x3d6cd8(0x28b)](this);}),_0xc4d101[_0x49c37e(0x2db)]>0x0?(svg[_0x49c37e(0x2c1)](_0x49c37e(0x209))[_0x49c37e(0x202)](_0x49c37e(0x2da),!![]),svg['selectAll'](_0x49c37e(0x209))[_0x49c37e(0x228)](function(){var _0x8abd0b=_0x49c37e,_0x128774=d3[_0x8abd0b(0x204)](this)[_0x8abd0b(0x26c)]();return _0xc4d101[_0x8abd0b(0x24f)](_0x128774);})[_0x49c37e(0x202)](_0x49c37e(0x1f4),!![])[_0x49c37e(0x202)](_0x49c37e(0x2da),![])[_0x49c37e(0x1f2)](function(){var _0xe8238d=_0x49c37e;this[_0xe8238d(0x22e)][_0xe8238d(0x28b)](this);}),_0xc4d101[_0x49c37e(0x280)](function(_0xa9496e){var _0x269cd3=_0x49c37e,_0x54b123=_0x269cd3(0x21b)+_0xa9496e['replace'](/\s+/g,'-')[_0x269cd3(0x2d7)]();if(svg['select']('.'+_0x54b123)[_0x269cd3(0x205)]()===0x0){var _0x49edb8=filteredData[_0x269cd3(0x25c)](function(_0x43f76f){return _0x43f76f[0x1]===_0xa9496e;});_0x49edb8&&(addTeamLabel(_0x49edb8),svg['select']('.'+_0x54b123)['classed'](_0x269cd3(0x1f4),!![]));}})):(svg[_0x49c37e(0x2c1)](_0x49c37e(0x209))[_0x49c37e(0x1f2)](function(){var _0x34e62c=_0x49c37e,_0x50a45e=d3[_0x34e62c(0x204)](this),_0x383ab7=_0x50a45e['text']();!clickedCircles[_0x34e62c(0x24f)](_0x383ab7)&&_0x50a45e[_0x34e62c(0x285)]();}),svg[_0x49c37e(0x2c1)](_0x49c37e(0x256))[_0x49c37e(0x29a)]('fill',function(_0x4d876e){var _0x4c35d3=_0x49c37e;return clickedCircles[_0x4c35d3(0x24f)](_0x4d876e[0x1])?getLeagueColor(_0x4d876e[0x2]):_0x4c35d3(0x2b4);})[_0x49c37e(0x29a)](_0x49c37e(0x257),function(_0x1cd1c2){var _0x5f576f=_0x49c37e;return clickedCircles[_0x5f576f(0x24f)](_0x1cd1c2[0x1])?_0x5f576f(0x203):_0x5f576f(0x21f);})[_0x49c37e(0x29a)](_0x49c37e(0x1f3),function(_0x4e1fcc){return clickedCircles['includes'](_0x4e1fcc[0x1])?0x2:0x0;}));});function resetSearch(){var _0x558a80=_0x543c33;searchBar[_0x558a80(0x235)]='',svg[_0x558a80(0x2c1)]('circle')[_0x558a80(0x202)]('search-match',![])[_0x558a80(0x29a)](_0x558a80(0x26a),function(_0x2d511e){return clickedCircles['includes'](_0x2d511e[0x1])?getLeagueColor(_0x2d511e[0x2]):'rgba(70,\x20130,\x20180,\x200.7)';})[_0x558a80(0x29a)](_0x558a80(0x257),function(_0x3047ef){var _0x1ce32d=_0x558a80;return clickedCircles['includes'](_0x3047ef[0x1])?_0x1ce32d(0x203):'none';})[_0x558a80(0x29a)]('stroke-width',function(_0x254d6e){var _0x5c76e6=_0x558a80;return clickedCircles[_0x5c76e6(0x24f)](_0x254d6e[0x1])?0x2:0x0;})[_0x558a80(0x29a)]('filter',_0x558a80(0x21f))[_0x558a80(0x1f2)](function(){var _0x343c2a=_0x558a80;d3[_0x343c2a(0x204)](this)[_0x343c2a(0x29a)]('r',null),d3[_0x343c2a(0x204)](this)[_0x343c2a(0x299)]();}),svg[_0x558a80(0x2c1)](_0x558a80(0x209))[_0x558a80(0x202)](_0x558a80(0x1f4),![])['classed'](_0x558a80(0x2da),![])[_0x558a80(0x1f2)](function(){var _0x2bc11c=_0x558a80;d3[_0x2bc11c(0x204)](this)[_0x2bc11c(0x299)]();}),svg[_0x558a80(0x2c1)](_0x558a80(0x209))[_0x558a80(0x1f2)](function(){var _0x4ef4d5=_0x558a80,_0x83b803=d3[_0x4ef4d5(0x204)](this),_0x30053c=_0x83b803['text']();!clickedCircles['includes'](_0x30053c)&&_0x83b803[_0x4ef4d5(0x285)]();});}var toggleButton=document[_0x543c33(0x29b)](_0x543c33(0x252));toggleButton[_0x543c33(0x22b)]('click',function(){var _0xea8963=_0x543c33;medianLinesVisible=!medianLinesVisible,updateChart();const _0x3a524a=document[_0xea8963(0x29b)]('median-lines-tooltip');window[_0xea8963(0x2bc)]&&window[_0xea8963(0x2bc)][_0xea8963(0x2d9)]?_0x3a524a['textContent']=medianLinesVisible?window['currentTranslations'][_0xea8963(0x2d9)][_0xea8963(0x224)]||_0xea8963(0x265):window[_0xea8963(0x2bc)][_0xea8963(0x2d9)][_0xea8963(0x236)]||_0xea8963(0x23f):_0x3a524a['textContent']=medianLinesVisible?'Hide\x20median\x20lines':_0xea8963(0x23f);});function selectAllCircles(){var _0x3421d6=_0x543c33,_0x48b026=filteredData[_0x3421d6(0x26f)](function(_0x3fc7fd){return clickedCircles['includes'](_0x3fc7fd[0x1]);});_0x48b026?(clickedCircles=[],svg[_0x3421d6(0x2c1)](_0x3421d6(0x256))[_0x3421d6(0x29a)]('fill',_0x3421d6(0x2b4))['style'](_0x3421d6(0x257),'none'),svg['selectAll'](_0x3421d6(0x209))[_0x3421d6(0x285)]()):(svg[_0x3421d6(0x2c1)](_0x3421d6(0x256))[_0x3421d6(0x1f2)](function(_0x2a7552){var _0x244d24=_0x3421d6;!clickedCircles[_0x244d24(0x24f)](_0x2a7552[0x1])&&(clickedCircles[_0x244d24(0x28f)](_0x2a7552[0x1]),d3['select'](this)[_0x244d24(0x29a)](_0x244d24(0x26a),getLeagueColor(_0x2a7552[0x2]))[_0x244d24(0x29a)](_0x244d24(0x257),'#000')['style'](_0x244d24(0x1f3),0x2));}),filteredData[_0x3421d6(0x280)](function(_0x1a40a7){addTeamLabel(_0x1a40a7);}));updateSelectAllButtonText();var _0x9af627=document[_0x3421d6(0x29b)]('select-league')[_0x3421d6(0x235)];updateLeagueLegend(_0x9af627);}updateChart(),initializeCustomSelectors();function updateLeagueLegend(_0x1334bb){var _0x403bc2=_0x543c33,_0x435981=document[_0x403bc2(0x29b)](_0x403bc2(0x282));if(_0x1334bb!==_0x403bc2(0x296)&&_0x1334bb!=='Top\x205\x20Leagues'){_0x435981[_0x403bc2(0x29a)]['display']=_0x403bc2(0x21f);return;}if(clickedCircles[_0x403bc2(0x2db)]===0x0){_0x435981[_0x403bc2(0x29a)]['display']=_0x403bc2(0x21f);return;}_0x435981['style'][_0x403bc2(0x274)]=_0x403bc2(0x26b),_0x435981[_0x403bc2(0x25e)]='';var _0x255add=document['createElement'](_0x403bc2(0x1fc));_0x255add[_0x403bc2(0x29a)][_0x403bc2(0x243)]=_0x403bc2(0x1fb),_0x255add[_0x403bc2(0x29a)][_0x403bc2(0x2b5)]=_0x403bc2(0x2a8),_0x435981[_0x403bc2(0x28b)](_0x255add);var _0x1725a0=[];if(_0x1334bb===_0x403bc2(0x296))_0x1725a0=Object[_0x403bc2(0x279)](leagueColors);else _0x1334bb===_0x403bc2(0x24a)&&(_0x1725a0=['Premier\x20League',_0x403bc2(0x25f),_0x403bc2(0x248),_0x403bc2(0x2bf),'Ligue\x201']);_0x1725a0[_0x403bc2(0x280)](function(_0x1f4c82){var _0x28eb00=_0x403bc2,_0x30191a=document[_0x28eb00(0x2d1)](_0x28eb00(0x1fc));_0x30191a[_0x28eb00(0x25d)]=_0x28eb00(0x240);var _0xd31903=document[_0x28eb00(0x2d1)](_0x28eb00(0x1fc));_0xd31903[_0x28eb00(0x25d)]=_0x28eb00(0x201),_0xd31903['style'][_0x28eb00(0x247)]=leagueColors[_0x1f4c82];var _0x336b61=document[_0x28eb00(0x2d1)]('span');_0x336b61[_0x28eb00(0x2ba)]=_0x1f4c82,_0x30191a['appendChild'](_0xd31903),_0x30191a['appendChild'](_0x336b61),_0x435981['appendChild'](_0x30191a);});}function addTeamLabel(_0x472037){var _0x50d4f7=_0x543c33,_0x4b9d0c=xScale(_0x472037[header[_0x50d4f7(0x2ac)](xMetric)]),_0x2e73e4=yScale(_0x472037[header['indexOf'](yMetric)]),_0x38834e=_0x50d4f7(0x21b)+_0x472037[0x1][_0x50d4f7(0x1f9)](/\s+/g,'-')[_0x50d4f7(0x2d7)]();if(svg[_0x50d4f7(0x204)]('.'+_0x38834e)['size']()>0x0)return;var _0x1a2d0c=svg['append']('text')['attr']('class',_0x50d4f7(0x2c9)+_0x38834e)[_0x50d4f7(0x2d5)]('x',_0x4b9d0c+0xc)[_0x50d4f7(0x2d5)]('y',_0x2e73e4+0x4)[_0x50d4f7(0x26c)](_0x472037[0x1])[_0x50d4f7(0x29a)](_0x50d4f7(0x26e),'Inter,\x20sans-serif')[_0x50d4f7(0x29a)]('font-size','12px')['style'](_0x50d4f7(0x2ca),_0x50d4f7(0x1ff))[_0x50d4f7(0x29a)](_0x50d4f7(0x26a),_0x50d4f7(0x291))[_0x50d4f7(0x2d5)](_0x50d4f7(0x2ab),_0x4b9d0c)[_0x50d4f7(0x2d5)]('data-original-y',_0x2e73e4)[_0x50d4f7(0x2d5)](_0x50d4f7(0x206),_0x50d4f7(0x27a));positionLabelToAvoidOverlap(_0x1a2d0c,_0x4b9d0c,_0x2e73e4);}function positionLabelToAvoidOverlap(_0x5c09a0,_0x25c092,_0x12391e){var _0x6878a0=_0x543c33;if(_0x5c09a0[_0x6878a0(0x2d5)](_0x6878a0(0x206))===_0x6878a0(0x249)){var _0x4079e1=parseFloat(_0x5c09a0['attr']('data-original-x')),_0x3ea1e5=parseFloat(_0x5c09a0['attr'](_0x6878a0(0x21e))),_0x23d04e=parseFloat(_0x5c09a0[_0x6878a0(0x2d5)]('x')),_0x297e5a=parseFloat(_0x5c09a0['attr']('y')),_0x2181a2=Math[_0x6878a0(0x28e)](Math['pow'](_0x4079e1-_0x25c092,0x2)+Math['pow'](_0x3ea1e5-_0x12391e,0x2));if(_0x2181a2<0x5){_0x5c09a0[_0x6878a0(0x2d5)](_0x6878a0(0x2ab),_0x25c092)['attr'](_0x6878a0(0x21e),_0x12391e);return;}_0x5c09a0[_0x6878a0(0x2d5)](_0x6878a0(0x206),'false');}var _0x18095d=svg['selectAll']('.team-label')[_0x6878a0(0x228)](function(){return this!==_0x5c09a0['node']();}),_0x3ba663=_0x5c09a0['node']()[_0x6878a0(0x2dc)](),_0x58acea=[{'x':_0x25c092+0xc,'y':_0x12391e+0x4},{'x':_0x25c092+0xc,'y':_0x12391e-0xa},{'x':_0x25c092+0xc,'y':_0x12391e+0x12},{'x':_0x25c092-_0x3ba663['width']-0x5,'y':_0x12391e+0x4},{'x':_0x25c092-_0x3ba663['width']-0x5,'y':_0x12391e-0xa},{'x':_0x25c092-_0x3ba663['width']-0x5,'y':_0x12391e+0x12},{'x':_0x25c092-_0x3ba663['width']/0x2,'y':_0x12391e-0xf},{'x':_0x25c092-_0x3ba663[_0x6878a0(0x20c)]/0x2,'y':_0x12391e+0x19}],_0x189ed4=findPositionWithoutOverlap(_0x58acea,_0x18095d,_0x3ba663);_0x5c09a0['attr']('x',_0x189ed4['x'])[_0x6878a0(0x2d5)]('y',_0x189ed4['y'])['attr']('data-original-x',_0x25c092)[_0x6878a0(0x2d5)](_0x6878a0(0x21e),_0x12391e)[_0x6878a0(0x2d5)](_0x6878a0(0x206),'true');}function findPositionWithoutOverlap(_0x4f8d29,_0x2b2238,_0x4b618b){var _0xaa2ee1=_0x543c33;for(var _0x3dbe71=0x0;_0x3dbe71<_0x4f8d29[_0xaa2ee1(0x2db)];_0x3dbe71++){var _0x238c61=_0x4f8d29[_0x3dbe71],_0x378913=![],_0x51a783={'x1':_0x238c61['x'],'y1':_0x238c61['y']-_0x4b618b[_0xaa2ee1(0x255)],'x2':_0x238c61['x']+_0x4b618b[_0xaa2ee1(0x20c)],'y2':_0x238c61['y']+0x5};if(_0x51a783['x1']<0x0||_0x51a783['x2']>width||_0x51a783['y1']<0x0||_0x51a783['y2']>height)continue;_0x2b2238[_0xaa2ee1(0x1f2)](function(){var _0x2aa6e4=_0xaa2ee1,_0x42a346=d3['select'](this)['node']()[_0x2aa6e4(0x2dc)](),_0xab676f=parseFloat(d3[_0x2aa6e4(0x204)](this)[_0x2aa6e4(0x2d5)]('x')),_0x5b5fd0=parseFloat(d3[_0x2aa6e4(0x204)](this)[_0x2aa6e4(0x2d5)]('y')),_0x3ff766={'x1':_0xab676f,'y1':_0x5b5fd0-_0x42a346[_0x2aa6e4(0x255)],'x2':_0xab676f+_0x42a346[_0x2aa6e4(0x20c)],'y2':_0x5b5fd0+0x5};!(_0x51a783['x2']<_0x3ff766['x1']||_0x51a783['x1']>_0x3ff766['x2']||_0x51a783['y2']<_0x3ff766['y1']||_0x51a783['y1']>_0x3ff766['y2'])&&(_0x378913=!![]);});if(!_0x378913)return _0x238c61;}for(var _0x3dbe71=0x0;_0x3dbe71<_0x4f8d29[_0xaa2ee1(0x2db)];_0x3dbe71++){var _0x238c61=_0x4f8d29[_0x3dbe71],_0x51a783={'x1':_0x238c61['x'],'y1':_0x238c61['y']-_0x4b618b[_0xaa2ee1(0x255)],'x2':_0x238c61['x']+_0x4b618b[_0xaa2ee1(0x20c)],'y2':_0x238c61['y']+0x5};if(_0x51a783['x1']>=0x0&&_0x51a783['x2']<=width&&_0x51a783['y1']>=0x0&&_0x51a783['y2']<=height)return _0x238c61;}var _0x23e528={'x':Math['min'](Math[_0xaa2ee1(0x278)](0x0,_0x4f8d29[0x0]['x']),width-_0x4b618b[_0xaa2ee1(0x20c)]),'y':Math['min'](Math[_0xaa2ee1(0x278)](_0x4b618b[_0xaa2ee1(0x255)],_0x4f8d29[0x0]['y']),height)};return _0x23e528;}var originalUpdateChart=updateChart;updateChart=function(){originalUpdateChart(),setTimeout(function(){var _0x4b0e43=_0x4ba6,_0xecea69=svg[_0x4b0e43(0x2c1)](_0x4b0e43(0x209));_0xecea69[_0x4b0e43(0x1f2)](function(){var _0x55f452=_0x4b0e43,_0x2f6305=d3['select'](this),_0x2b738b=_0x2f6305[_0x55f452(0x26c)](),_0x31cdd0=filteredData[_0x55f452(0x25c)](function(_0x31c7b5){return _0x31c7b5[0x1]===_0x2b738b;});if(_0x31cdd0){var _0x1174b7=xScale(_0x31cdd0[header[_0x55f452(0x2ac)](xMetric)]),_0x3cdb5b=yScale(_0x31cdd0[header[_0x55f452(0x2ac)](yMetric)]);positionLabelToAvoidOverlap(_0x2f6305,_0x1174b7,_0x3cdb5b);}});},0xa);},document['addEventListener']('DOMContentLoaded',function(){var _0x3f3613=_0x543c33;const _0x24bf45=document[_0x3f3613(0x29b)]('median-lines-tooltip');_0x24bf45['textContent']=medianLinesVisible?_0x3f3613(0x265):_0x3f3613(0x23f);});
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'META') {
              element.setAttribute('content', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
            updateChart();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });


function takeScreenshot() {
    const isDarkMode = document.body.classList.contains('dark-mode');
    const svg = document.getElementById('scatter-plot');
    const svgRect = svg.getBoundingClientRect();
    
    // Create a canvas with 2x resolution for higher quality
    const canvas = document.createElement('canvas');
    const scale = 2; // Increase resolution by 2x
    canvas.width = svgRect.width * scale;
    canvas.height = svgRect.height * scale;
    
    const ctx = canvas.getContext('2d');
    ctx.scale(scale, scale); 

    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = 'high';
    
    ctx.fillStyle = isDarkMode ? '#2c2c2c' : '#FFFFFF';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    const svgImg = new Image();
    const svgData = new XMLSerializer().serializeToString(svg);
    const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
    const url = URL.createObjectURL(svgBlob);

    const watermarkImg = new Image();
    watermarkImg.crossOrigin = "Anonymous";
    
    svgImg.onload = function() {
        ctx.drawImage(svgImg, 0, 0, svgRect.width, svgRect.height);
        watermarkImg.onload = function() {
            ctx.save();
            ctx.globalAlpha = 0.04;
            
            const watermarkWidth = svgRect.width * 0.3;
            const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
            const x = (svgRect.width - watermarkWidth) / 2;
            const y = (svgRect.height - watermarkHeight) / 2;
            
            ctx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
            ctx.restore();
            
            const dataURL = canvas.toDataURL('image/png', 1.0);
            const link = document.createElement('a');
            link.download = 'DataMB Screenshot.png';
            link.href = dataURL;
            link.click();
            URL.revokeObjectURL(url);
        };
        
        watermarkImg.src = 'https://datamb.football/logo.png';
    };
    
    svgImg.src = url;
}

    </script>
    
</body>
</html>
