<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f5f7fa;
            --container-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --hover-color: #f0f0f0;
            --button-color: #3498db;
            --button-text: #ffffff;
            --header-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #0e0f0f;
            --container-bg: #1a1a1a;
            --text-color: #e0e0e0;
            --border-color: #333333;
            --hover-color: #252525;
            --button-color: #2980b9;
            --button-text: #ffffff;
            --header-bg: #0e0f0f;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

 
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Replace plot-container with a simpler structure */
        .chart-wrapper {
            background-color: var(--container-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            width: 100%;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
        }

        select, input {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            transition: border-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Ensure consistent height for controls in the same row */
        select, input, .btn:not(.btn-icon), .custom-select-trigger, .metric-select-trigger {
            height: 36px;
            box-sizing: border-box;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background-color: var(--button-color);
            color: var(--button-text);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            height: 36px;
            box-sizing: border-box;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-outline:hover {
            background-color: var(--hover-color);
        }

        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 6px;
        }

        #search-bar, #select-league {
            width: 178px;
        }

        #select-x, #select-y {
            width: 190px;
        }

        /* Add tooltip for icon buttons */
        .btn-icon .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .btn-icon i {
            font-size: 18px;
        }


        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-top: 30px; /* Consistent spacing from controls */
        }

        #scatter-plot {
            width: 100%;
            height: auto; /* Height will be set dynamically */
            display: block;
            margin: 0 auto;
            max-width: 1082px;
        }

        .tooltip {
            position: absolute;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        /* Custom button tooltips */
        .btn-tooltip {
            position: relative;
            display: inline-block;
        }

        .btn-tooltip .btn-tooltip-text {
            visibility: hidden;
            width: 120px;
            background-color: var(--container-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            pointer-events: none;
        }

        /* Hide button tooltips on mobile */
        @media (max-width: 768px) {
            .btn-tooltip .btn-tooltip-text {
                display: none;
            }
        }

        .btn-tooltip .btn-tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--border-color) transparent transparent transparent;
        }

        .btn-tooltip:hover .btn-tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .player-name {
            font-size: 12px;
            font-weight: 500;
        }

        circle {
            cursor: pointer;
            transition: r 0.2s, fill 0.2s;
        }



        /* Add new styles for better search highlighting */
        circle.search-match {
            fill: #ff3366 !important; /* Bright pink fill */
            stroke: #ffffff;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
            animation: circlePulse 1.5s infinite ease-in-out;
        }

        .dark-mode circle.search-match {
            stroke: #000000;
        }

        @keyframes circlePulse {
            0% { r: 6; }
            50% { r: 9; }
            100% { r: 6; }
        }

        .team-label.search-match {
            font-weight: 700 !important;
            fill: #ff3366 !important;
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 1));
            opacity: 1 !important;
            animation: labelPulse 1.5s infinite ease-in-out;
        }

        @keyframes labelPulse {
            0% { font-size: 12px; }
            50% { font-size: 14px; }
            100% { font-size: 12px; }
        }

        .dark-mode .team-label.search-match {
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));
        }

        .team-label.search-dimmed {
            opacity: 0 !important;
        }

        .team-label {
            pointer-events: none;
            text-shadow: 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white, 0px 0px 2px white;
        }

        .dark-mode .team-label {
            fill: #f5f5f5 !important;
            text-shadow: 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a, 0px 0px 2px #1a1a1a;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--container-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: background-color 0.3s;
        }

        .toggle-icon::before {
            font-family: "Ionicons";
            content: "\f467";
            font-size: 30px;
            color: var(--text-color);
        }

        .dark-mode .toggle-icon::before {
            content: "\f3b0";
            font-size: 20px;
        }

        @media (max-width: 768px) {
  
            
  .chart-wrapper {
      padding: 15px;
  }
  
  
  /* Remove fixed height for scatter plot - now handled by updateChartDimensions */
  #scatter-plot {
      min-height: 500px; /* Minimum height for mobile */
  }
  
  select, input {
      width: 100%;
  }
  
  
  /* Make text elements more readable on mobile */
  .x-label, .y-label {
      font-size: 12px;
  }
  
  /* Adjust tooltip position for mobile */
  .tooltip {
      max-width: 80%;
  }
}

        /* Styles for the diagonal reference line */
        .dark-mode .xy-line {
            stroke: #3cb371; /* Slightly different green for dark mode */
        }






  

/* Styles for flag icons in select dropdown */
#select-league option {
    display: flex;
    align-items: center;
    padding: 8px 12px;
}

#select-league iconify-icon {
    display: inline-flex;
    vertical-align: middle;
}

/* Styles for custom league selector dropdown */
.custom-select-container {
    position: relative;
    width: 172px;
}

.metric-select-container {
    position: relative;
    width: 192px;
}

.custom-select-option, .metric-select-option {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    cursor: pointer;
    color: var(--text-color);
    background-color: var(--container-bg);
}

.custom-select-option iconify-icon, .metric-select-option iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}


.custom-select-trigger, .metric-select-trigger {
    display: flex;
    align-items: center;
    padding: 0 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--container-bg);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    cursor: pointer;
    user-select: none;
    position: relative;
    line-height: 1;
}

.custom-select-trigger span, .metric-select-trigger span {
    display: inline-block;
    transform: translateY(1px);
    white-space: nowrap;
    overflow: hidden;
    max-width: calc(100% - 20px); /* Account for the icon width and margin */
    line-height: normal; /* Ensure consistent line height */
}

/* Make the league selector span 30px smaller */
#league-select-trigger span {
    max-width: calc(100% - 45px); /* 20px + 30px reduction */
}

.custom-select-trigger::after, .metric-select-trigger::after {
    content: '';
    width: 6px;
    height: 6px;
    margin-left: auto;
    border-right: 1.5px solid var(--text-color);
    border-bottom: 1.5px solid var(--text-color);
    transform: rotate(45deg) translateY(-2px);
    transition: transform 0.3s;
    opacity: 0.7;
    margin-right: 2px;
}

.custom-select-trigger.open::after, .metric-select-trigger.open::after {
    transform: rotate(-135deg) translateY(1px);
}

.custom-select-options, .metric-select-options {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-top: 4px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 100;
    font-size: 13px;
    display: none;
    box-shadow: var(--shadow);
}



.custom-select-option:hover, .metric-select-option:hover {
    background-color: var(--hover-color);
}



.custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

.metric-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}


.dark-mode .custom-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected {
    background-color: var(--primary-color);
    color: white;
}

@media (max-width: 768px) {
    .custom-select-option {
        padding: 6px 12px;
    }
}


/* Dark mode styles for custom dropdown */
.dark-mode .custom-select-trigger,
.dark-mode .custom-select-options,
.dark-mode .metric-select-trigger,
.dark-mode .metric-select-options {
    border-color: var(--border-color);
    background-color: var(--container-bg);
    color: var(--text-color);
}

.dark-mode .custom-select-option:hover,
.dark-mode .metric-select-option:hover {
    background-color: var(--hover-color);
}

.dark-mode .custom-select-option.selected,
.dark-mode .metric-select-option.selected {
    background-color: rgba(52, 152, 219, 0.2);
}


/* Adjust flag icon alignment in the trigger */
#league-select-trigger iconify-icon {
    margin-right: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transform: translateY(-1px);
}
        /* Enhanced Dark Mode Styles */
        .dark-mode .chart-wrapper {
            background-color: var(--container-bg);
            border: 1px solid #333;
        }

        .dark-mode .btn {
            background-color: var(--button-color);
        }

        .dark-mode .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .dark-mode .btn-outline:hover {
            background-color: var(--hover-color);
            border-color: #444;
        }


        .dark-mode input, 
        .dark-mode select {
            background-color: #1a1a1a;
            color: var(--text-color);
            border-color: #333;
        }

        .dark-mode input::placeholder {
            color: #777;
        }

        .dark-mode input:focus, 
        .dark-mode select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .dark-mode .tooltip {
            background-color: #1a1a1a;
            border-color: #333;
            color: var(--text-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .legend {
            border-top-color: #333;
        }

        .dark-mode .legend-item {
            color: #ccc;
        }

        .dark-mode .btn-tooltip .btn-tooltip-text {
            background-color: #1a1a1a;
            border-color: #333;
            color: #e0e0e0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .btn-tooltip .btn-tooltip-text::after {
            border-color: #333 transparent transparent transparent;
        }

        .dark-mode .team-label {
            fill: #e0e0e0 !important;
            text-shadow: 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f, 0px 0px 3px #0e0f0f;
        }

        .dark-mode .x-axis path,
        .dark-mode .y-axis path,
        .dark-mode .x-axis line,
        .dark-mode .y-axis line {
            stroke: #444;
        }

        .dark-mode .x-axis text,
        .dark-mode .y-axis text {
            fill: #aaa;
        }

        .dark-mode .x-label,
        .dark-mode .y-label {
            fill: #ccc;
        }

        .dark-mode .median-line {
            stroke: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-mode .xy-line {
            stroke: #2ecc71;
            opacity: 0.8;
        }

        .dark-mode .dark-mode-toggle {
            background-color: #1a1a1a;
            border: 1px solid #333;
        }

        .dark-mode .toggle-icon::before {
            color: #e0e0e0;
        }

 




        .dark-mode #search-bar::placeholder {
            color: #777;
        }

        .dark-mode circle {
            stroke-width: 1px;
        }



        .dark-mode circle.search-match {
            fill: #ff3366 !important;
            stroke: #0e0f0f;
            stroke-width: 2px;
            filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.7));
        }


        
        /* Additional dark mode styles for chart elements */
        .dark-mode .chart-container {
            background-color: var(--container-bg);
        }
        
  
        
    
        

        
        /* Fix for custom select dropdown in dark mode */
        .dark-mode .custom-select-trigger::after, 
        .dark-mode .metric-select-trigger::after {
            border-right: 1.5px solid var(--text-color);
            border-bottom: 1.5px solid var(--text-color);
        }
        
        /* Improve contrast for selected items in dark mode */
        .dark-mode .custom-select-option.selected, 
        .dark-mode .metric-select-option.selected {
            background-color: rgba(52, 152, 219, 0.3);
        }
        
        /* Improve visibility of SVG elements in dark mode */
        .dark-mode svg text {
            fill: #ccc;
        }
        
        .dark-mode .legend-color {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Improve button states in dark mode */
        .dark-mode .btn:hover {
            background-color: #3498db;
        }
        
        .dark-mode .btn-outline:active {
            background-color: #333;
        }
        
        /* Improve focus states for accessibility */
        .dark-mode input:focus,
        .dark-mode select:focus,
        .dark-mode .btn:focus {
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.5);
        }
        
        /* Fix for buttons staying focused with blue outline */
        button:focus, 
        .btn:focus, 
        select:focus, 
        input:focus {
            outline: none;
        }
        
        /* Custom focus styles for better accessibility */
        button:focus-visible, 
        .btn:focus-visible, 
        select:focus-visible, 
        input:focus-visible {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }
        
        /* Remove focus styles when using mouse */
        button:focus:not(:focus-visible), 
        .btn:focus:not(:focus-visible), 
        select:focus:not(:focus-visible), 
        input:focus:not(:focus-visible) {
            box-shadow: none;
        }



.logo img {
  width: 50px;
  height: 50px;
}


/* Promo links styling */
.promo-links-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 15px auto 25px;
    max-width: 800px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.promo-link {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--container-bg);
    color: var(--text-color);
    text-decoration: none;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    font-weight: 500;
    flex: 1;
    min-width: 220px;
    max-width: 350px;
    justify-content: center;
}

.promo-link iconify-icon {
    margin-right: 8px;
}

.promo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.radar-link {
    border-left: 4px solid #3498db;
}

.pro-link {
    border-left: 4px solid #f39c12;
}

.dark-mode .radar-link {
    border-left: 4px solid #2980b9;
}

.dark-mode .pro-link {
    border-left: 4px solid #d35400;
}

@media (max-width: 768px) {
  
    

    
    select, input {
        width: 100%;
    }
    
    /* Make text elements more readable on mobile */
    .x-label, .y-label {
        font-size: 12px;
    }
    
    /* Adjust tooltip position for mobile */
    .tooltip {
        max-width: 80%;
    }
    
    /* Adjust promo links for mobile */
    .promo-links-container {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        padding: 0 15px;
    }
}

#SFctr {
	font-size: 15px !important;
}

#SFctr .SFfrm {
    margin-top: 20px;
margin-left: 10px;
}
	    
#SFctr td {
	font-family: Arial, Helvetica, sans-serif !important;
}

body.dark-mode #SFctr td {
	color: #f3f6f4 !important;
}
	    
#SFctr input[type="text"],
#SFctr input[type="password"],
#SFctr input[type="email"] {
	border-radius: 8px;

}


.custom-select-option {
    -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            
}
        /* Disable text selection for SVG text elements */
        svg text, .legend,
        .x-label,
        .y-label,
        .team-label,
        .player-name,
        .x-axis text,
        .y-axis text {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
        }

    </style>
</head>


<body>
    <script type="text/javascript">document.body.style.visibility="hidden";</script><div id="SFctr" data-org="31002" data-mfl="64c215764c0b6076026762a3"><div style="clear:both"></div></div><script type="text/javascript" src="https://cdn.membershipworks.com/mfl.js"></script>
    <div class="container">
        <div class="chart-wrapper">
            <div class="controls">
                <select id="select-x" style="display: none;"></select>
                <select id="select-y" style="display: none;"></select>
                <select id="select-league" style="display: none;" onchange="updateChart()">
                    <option value="all">Top 7 Leagues</option>
                    <option value="Top 5 Leagues">Top 5 Leagues</option>
                    <option value="Premier League">Premier League</option>
                    <option value="La Liga">La Liga</option>
                    <option value="Bundesliga">Bundesliga</option>
                    <option value="Serie A">Serie A</option> 
                    <option value="Ligue 1">Ligue 1</option>
                    <option value="Eredivisie">Eredivisie</option>
                    <option value="Primeira Liga">Liga Portugal</option>
                </select>
                
                <!-- Custom X metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="x-metric-trigger">
                        <span data-i18n="metrics.goals-per-90">Goals per 90</span>
                    </div>
                    <div class="metric-select-options" id="x-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom Y metric selector -->
                <div class="metric-select-container">
                    <div class="metric-select-trigger" id="y-metric-trigger">
                        <span data-i18n="metrics.xg-per-90">xG per 90</span>
                    </div>
                    <div class="metric-select-options" id="y-metric-options">
                        <!-- Options will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Custom league selector with flag icons -->
                <div class="custom-select-container">
                    <div class="custom-select-trigger" id="league-select-trigger">
                        <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                        <span data-i18n="leagues.top7">Top 7 Leagues</span>
                    </div>
                    <div class="custom-select-options" id="league-select-options">
                        <div class="custom-select-option selected" data-value="all">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top7">Top 7 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Top 5 Leagues">
                            <iconify-icon icon="emojione:flag-for-flag-european-union" width="18" height="18"></iconify-icon>
                            <span data-i18n="leagues.top5">Top 5 Leagues</span>
                        </div>
                        <div class="custom-select-option" data-value="Premier League">
                            <iconify-icon icon="emojione:flag-for-united-kingdom" width="18" height="18"></iconify-icon>
                            <span>Premier League</span>
                        </div>
                        <div class="custom-select-option" data-value="La Liga">
                            <iconify-icon icon="emojione:flag-for-spain" width="18" height="18"></iconify-icon>
                            <span>La Liga</span>
                        </div>
                        <div class="custom-select-option" data-value="Bundesliga">
                            <iconify-icon icon="emojione:flag-for-germany" width="18" height="18"></iconify-icon>
                            <span>Bundesliga</span>
                        </div>
                        <div class="custom-select-option" data-value="Serie A">
                            <iconify-icon icon="emojione:flag-for-italy" width="18" height="18"></iconify-icon>
                            <span>Serie A</span>
                        </div>
                        <div class="custom-select-option" data-value="Ligue 1">
                            <iconify-icon icon="emojione:flag-for-france" width="18" height="18"></iconify-icon>
                            <span>Ligue 1</span>
                        </div>
                        <div class="custom-select-option" data-value="Eredivisie">
                            <iconify-icon icon="emojione:flag-for-netherlands" width="18" height="18"></iconify-icon>
                            <span>Eredivisie</span>
                        </div>
                        <div class="custom-select-option" data-value="Primeira Liga">
                            <iconify-icon icon="emojione:flag-for-portugal" width="18" height="18"></iconify-icon>
                            <span>Liga Portugal</span>
                        </div>
                    </div>
                </div>
                
                <input type="text" id="search-bar" data-i18n="search.placeholder2" placeholder="Search team...">
                <div class="btn-tooltip">
                    <button id="toggle-median-lines" class="btn btn-outline btn-icon">
                        <div class="icon">
                            <i class="ion-stats-bars"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="median-lines-tooltip" data-i18n="tooltip.median-lines">Show median lines</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" id="select-all-button" onclick="selectAllCircles()">
                        <div class="icon">
                            <i class="ion-ios-circle-filled" id="select-icon"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" id="select-all-tooltip" data-i18n="tooltip.select-all">Select all teams</span>
                </div>
                <div class="btn-tooltip">
                    <button class="btn btn-outline btn-icon" onclick="takeScreenshot()">
                        <div class="icon">
                            <i class="ion-camera"></i>
                        </div>
                    </button>
                    <span class="btn-tooltip-text" data-i18n="tooltip.screenshot">Download chart as image</span>
                </div>
            </div>
       
            <div class="chart-container">
              <svg id="scatter-plot"></svg>
            </div>

            <div class="legend" id="league-legend">
              <!-- Legend items will be added here dynamically -->
            </div>
        </div>

        <div class="promo-links-container">
            <a href="https://datamb.football/proteamradar" class="promo-link radar-link"  target="_self" rel="noopener noreferrer">
                <iconify-icon icon="mdi:radar" width="20" height="20"></iconify-icon>
                <span data-i18n="promo.radar-link">Compare Teams with Radars</span>
            </a>
        </div>
    </div>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <div class="toggle-icon"></div>
    </div>



    <script>
        var _0x49fb0f=_0x2ec9;(function(_0xf50666,_0x4492af){var _0x296f81=_0x2ec9,_0x4b76c4=_0xf50666();while(!![]){try{var _0xeb571=-parseInt(_0x296f81(0x282))/0x1*(-parseInt(_0x296f81(0x278))/0x2)+parseInt(_0x296f81(0x1d4))/0x3*(-parseInt(_0x296f81(0x28a))/0x4)+parseInt(_0x296f81(0x1fb))/0x5*(-parseInt(_0x296f81(0x292))/0x6)+-parseInt(_0x296f81(0x28d))/0x7+-parseInt(_0x296f81(0x206))/0x8*(-parseInt(_0x296f81(0x215))/0x9)+-parseInt(_0x296f81(0x281))/0xa+-parseInt(_0x296f81(0x23a))/0xb*(-parseInt(_0x296f81(0x25e))/0xc);if(_0xeb571===_0x4492af)break;else _0x4b76c4['push'](_0x4b76c4['shift']());}catch(_0x2c927d){_0x4b76c4['push'](_0x4b76c4['shift']());}}}(_0x249f,0xb7f59));let initializeCustomSelectors=function(){var _0x202267=_0x2ec9;const _0x842181=document['getElementById'](_0x202267(0x260)),_0x670254=document[_0x202267(0x21a)](_0x202267(0x276)),_0x1ba9d3=document[_0x202267(0x21a)](_0x202267(0x222));setupCustomSelect(_0x842181,_0x670254,_0x1ba9d3);const _0x5ae2a0=document['getElementById'](_0x202267(0x290)),_0x57f5df=document[_0x202267(0x21a)](_0x202267(0x1e7)),_0x4c7d43=document[_0x202267(0x21a)](_0x202267(0x266));populateMetricOptions(_0x57f5df,header[_0x202267(0x231)](0x3),function(_0x5f1160,_0x2d7e4f){var _0x159cb2=_0x202267;_0x5ae2a0[_0x159cb2(0x29d)](_0x159cb2(0x241))['textContent']===_0x2d7e4f&&_0x5f1160[_0x159cb2(0x26b)][_0x159cb2(0x239)](_0x159cb2(0x1d0));if(_0x2d7e4f===header[0x3]){_0x5f1160['classList']['add'](_0x159cb2(0x1d0)),_0x5ae2a0[_0x159cb2(0x29d)](_0x159cb2(0x241))[_0x159cb2(0x23b)]=_0x2d7e4f;const _0x513f27=_0x2d7e4f['toLowerCase']()[_0x159cb2(0x2b0)](/ /g,'-')[_0x159cb2(0x2b0)](/%/g,_0x159cb2(0x26f));_0x5ae2a0[_0x159cb2(0x29d)](_0x159cb2(0x241))[_0x159cb2(0x2a6)](_0x159cb2(0x243),_0x159cb2(0x1e5)+_0x513f27);}}),setupCustomSelect(_0x5ae2a0,_0x57f5df,_0x4c7d43);const _0x2ef6d8=document['getElementById'](_0x202267(0x209)),_0x3bf120=document[_0x202267(0x21a)](_0x202267(0x1fa)),_0x4c4070=document['getElementById'](_0x202267(0x27e));populateMetricOptions(_0x3bf120,header[_0x202267(0x231)](0x3),function(_0x3cbb1b,_0x43098e){var _0x3d59ba=_0x202267;_0x2ef6d8[_0x3d59ba(0x29d)](_0x3d59ba(0x241))[_0x3d59ba(0x23b)]===_0x43098e&&_0x3cbb1b[_0x3d59ba(0x26b)][_0x3d59ba(0x239)]('selected');if(_0x43098e===header[0x4]){_0x3cbb1b[_0x3d59ba(0x26b)]['add']('selected'),_0x2ef6d8[_0x3d59ba(0x29d)]('span')[_0x3d59ba(0x23b)]=_0x43098e;const _0xe05aea=_0x43098e[_0x3d59ba(0x2c5)]()[_0x3d59ba(0x2b0)](/ /g,'-')[_0x3d59ba(0x2b0)](/%/g,_0x3d59ba(0x26f));_0x2ef6d8[_0x3d59ba(0x29d)](_0x3d59ba(0x241))['setAttribute']('data-i18n','metrics.'+_0xe05aea);}}),setupCustomSelect(_0x2ef6d8,_0x3bf120,_0x4c4070);};function populateMetricOptions(_0x54287a,_0x558d34,_0x277098){var _0x401886=_0x2ec9;_0x54287a[_0x401886(0x28e)]='',_0x558d34[_0x401886(0x27f)](function(_0x1c7a2e){var _0x318bea=_0x401886;const _0x597ae8=document['createElement'](_0x318bea(0x1e0));_0x597ae8[_0x318bea(0x210)]=_0x318bea(0x285),_0x597ae8[_0x318bea(0x2a6)]('data-value',_0x1c7a2e);const _0x18c4f2=document[_0x318bea(0x1e9)](_0x318bea(0x241));_0x18c4f2[_0x318bea(0x23b)]=_0x1c7a2e;const _0x2a644e=_0x1c7a2e[_0x318bea(0x2c5)]()['replace'](/ /g,'-')['replace'](/%/g,'pct');_0x18c4f2[_0x318bea(0x2a6)]('data-i18n',_0x318bea(0x1e5)+_0x2a644e),_0x597ae8[_0x318bea(0x2b8)](_0x18c4f2);if(_0x277098)_0x277098(_0x597ae8,_0x1c7a2e);_0x54287a[_0x318bea(0x2b8)](_0x597ae8);});}function setupCustomSelect(_0x3c0e14,_0x51da0a,_0x2480c3){var _0x27947f=_0x2ec9;_0x3c0e14[_0x27947f(0x2b1)]('click',function(){var _0x394266=_0x27947f;document[_0x394266(0x267)](_0x394266(0x234))[_0x394266(0x27f)](function(_0x3485e6){var _0x5f3441=_0x394266;if(_0x3485e6!==_0x3c0e14){_0x3485e6[_0x5f3441(0x26b)]['remove'](_0x5f3441(0x25f));const _0xede698=_0x3485e6[_0x5f3441(0x230)];if(_0xede698)_0xede698[_0x5f3441(0x22e)]['display']=_0x5f3441(0x23e);}}),_0x3c0e14[_0x394266(0x26b)][_0x394266(0x29c)](_0x394266(0x25f));const _0x2cf977=_0x3c0e14[_0x394266(0x26b)][_0x394266(0x2ac)]('open');_0x51da0a['style']['display']=_0x2cf977?_0x394266(0x228):_0x394266(0x23e);});const _0x497af9=_0x51da0a[_0x27947f(0x267)](_0x27947f(0x2c0));_0x497af9[_0x27947f(0x27f)](_0x4f1184=>{var _0x5a747e=_0x27947f;_0x4f1184['addEventListener'](_0x5a747e(0x2bb),function(){var _0x4ef42a=_0x5a747e;_0x497af9[_0x4ef42a(0x27f)](_0x11ec66=>_0x11ec66[_0x4ef42a(0x26b)][_0x4ef42a(0x1d7)](_0x4ef42a(0x1d0))),this[_0x4ef42a(0x26b)][_0x4ef42a(0x239)](_0x4ef42a(0x1d0));const _0x31dc62=this[_0x4ef42a(0x29d)](_0x4ef42a(0x241))['textContent'],_0x170782=this[_0x4ef42a(0x29d)](_0x4ef42a(0x241))[_0x4ef42a(0x2bc)](_0x4ef42a(0x243)),_0x732c7d=this[_0x4ef42a(0x29d)](_0x4ef42a(0x294));_0x3c0e14[_0x4ef42a(0x28e)]='';if(_0x732c7d){const _0x2b8f94=_0x732c7d[_0x4ef42a(0x246)](!![]);_0x2b8f94[_0x4ef42a(0x22e)][_0x4ef42a(0x2be)]=_0x4ef42a(0x1fe),_0x3c0e14[_0x4ef42a(0x2b8)](_0x2b8f94);}const _0x2a7c61=document[_0x4ef42a(0x1e9)]('span');_0x2a7c61[_0x4ef42a(0x23b)]=_0x31dc62;_0x170782&&_0x2a7c61['setAttribute']('data-i18n',_0x170782);_0x3c0e14[_0x4ef42a(0x2b8)](_0x2a7c61);const _0x1b7e3a=this[_0x4ef42a(0x2bc)]('data-value');_0x2480c3['value']=_0x1b7e3a||_0x31dc62;const _0x42440f=new Event(_0x4ef42a(0x271));_0x2480c3['dispatchEvent'](_0x42440f),_0x3c0e14[_0x4ef42a(0x26b)][_0x4ef42a(0x1d7)]('open'),_0x51da0a[_0x4ef42a(0x22e)][_0x4ef42a(0x2ca)]=_0x4ef42a(0x23e);});});let _0x27d1b3='',_0x70be77;document['addEventListener']('keydown',function(_0x58e4e6){var _0x58e19b=_0x27947f;if(!_0x3c0e14[_0x58e19b(0x26b)][_0x58e19b(0x2ac)]('open'))return;if(_0x58e4e6[_0x58e19b(0x252)]==='ArrowDown'||_0x58e4e6[_0x58e19b(0x252)]===_0x58e19b(0x236)){_0x58e4e6[_0x58e19b(0x280)]();const _0x2743ea=Array[_0x58e19b(0x248)](_0x497af9),_0x5e1235=_0x2743ea[_0x58e19b(0x22d)](_0x24286d=>_0x24286d[_0x58e19b(0x26b)][_0x58e19b(0x2ac)](_0x58e19b(0x1d0)));let _0x14de0e;_0x58e4e6[_0x58e19b(0x252)]===_0x58e19b(0x2cb)?_0x14de0e=_0x5e1235<_0x2743ea[_0x58e19b(0x21e)]-0x1?_0x5e1235+0x1:0x0:_0x14de0e=_0x5e1235>0x0?_0x5e1235-0x1:_0x2743ea['length']-0x1;_0x497af9[_0x58e19b(0x27f)](_0x5a0fd9=>_0x5a0fd9[_0x58e19b(0x26b)][_0x58e19b(0x1d7)](_0x58e19b(0x1d0))),_0x2743ea[_0x14de0e][_0x58e19b(0x26b)][_0x58e19b(0x239)]('selected'),_0x2743ea[_0x14de0e][_0x58e19b(0x224)]({'block':_0x58e19b(0x2a4)});return;}if(_0x58e4e6['key']===_0x58e19b(0x296)){_0x58e4e6[_0x58e19b(0x280)]();const _0x3150e3=_0x51da0a[_0x58e19b(0x29d)](_0x58e19b(0x23f));_0x3150e3&&_0x3150e3[_0x58e19b(0x2bb)]();return;}if(_0x58e4e6[_0x58e19b(0x252)]===_0x58e19b(0x298)){_0x58e4e6[_0x58e19b(0x280)](),_0x3c0e14['classList'][_0x58e19b(0x1d7)](_0x58e19b(0x25f)),_0x51da0a[_0x58e19b(0x22e)][_0x58e19b(0x2ca)]=_0x58e19b(0x23e);return;}if(_0x58e4e6['key'][_0x58e19b(0x21e)]===0x1&&_0x58e4e6['key'][_0x58e19b(0x217)](/[a-zA-Z0-9%]/)){clearTimeout(_0x70be77),_0x27d1b3+=_0x58e4e6[_0x58e19b(0x252)][_0x58e19b(0x2c5)]();const _0x336e99=Array['from'](_0x497af9)[_0x58e19b(0x200)](_0x14d723=>{var _0x503afc=_0x58e19b;const _0x41d053=_0x14d723[_0x503afc(0x29d)]('span')[_0x503afc(0x23b)][_0x503afc(0x2c5)]();return _0x41d053['startsWith'](_0x27d1b3);});_0x336e99&&(_0x497af9[_0x58e19b(0x27f)](_0x488079=>_0x488079['classList'][_0x58e19b(0x1d7)](_0x58e19b(0x1d0))),_0x336e99['classList']['add'](_0x58e19b(0x1d0)),_0x336e99[_0x58e19b(0x224)]({'block':_0x58e19b(0x2a4)})),_0x70be77=setTimeout(()=>{_0x27d1b3='';},0x3e8);}});}document['addEventListener']('click',function(_0x2be8e0){var _0x2083b4=_0x2ec9;const _0x4fd389=document[_0x2083b4(0x267)](_0x2083b4(0x2a9)),_0x5e5c21=document[_0x2083b4(0x267)](_0x2083b4(0x2b4));let _0x504524=![];_0x4fd389[_0x2083b4(0x27f)](function(_0x401f75,_0x552f9b){var _0x1cf691=_0x2083b4;const _0x233571=_0x5e5c21[_0x552f9b];_0x401f75&&_0x233571&&(_0x401f75[_0x1cf691(0x2ac)](_0x2be8e0[_0x1cf691(0x226)])||_0x233571[_0x1cf691(0x2ac)](_0x2be8e0[_0x1cf691(0x226)]))&&(_0x504524=!![]);}),!_0x504524&&_0x4fd389[_0x2083b4(0x27f)](function(_0x54be63,_0x11e988){var _0x42dbc4=_0x2083b4;_0x54be63&&_0x5e5c21[_0x11e988]&&(_0x54be63[_0x42dbc4(0x26b)][_0x42dbc4(0x1d7)](_0x42dbc4(0x25f)),_0x5e5c21[_0x11e988][_0x42dbc4(0x22e)][_0x42dbc4(0x2ca)]='none');});});const xhr=new XMLHttpRequest();xhr[_0x49fb0f(0x25f)](_0x49fb0f(0x27d),_0x49fb0f(0x1dc),![]),xhr[_0x49fb0f(0x275)](null);let csvData=xhr[_0x49fb0f(0x27b)],extraHeaderRow=_0x49fb0f(0x218);csvData=extraHeaderRow+csvData;var rows=csvData[_0x49fb0f(0x223)]()[_0x49fb0f(0x2a7)]('\x0a'),header=rows[0x0][_0x49fb0f(0x2a7)](','),data=rows[_0x49fb0f(0x231)](0x1)[_0x49fb0f(0x263)](function(_0x17a585){var _0x5a0180=_0x49fb0f;return _0x17a585['split'](',')[_0x5a0180(0x263)](function(_0x2c460e,_0x58583e){return _0x58583e>=0x3?parseFloat(_0x2c460e):_0x2c460e;});}),margin={'top':0x0,'right':0x0,'bottom':0x0,'left':0x0},width=0x43a-margin[_0x49fb0f(0x2ba)]-margin['right'],height=0x302-margin[_0x49fb0f(0x24b)]-margin[_0x49fb0f(0x284)],leagueColors={'Premier\x20League':'rgba(255,\x200,\x200,\x200.7)','La\x20Liga':_0x49fb0f(0x2c2),'Bundesliga':'rgba(255,\x20255,\x200,\x200.7)','Serie\x20A':_0x49fb0f(0x2ad),'Ligue\x201':_0x49fb0f(0x21c),'Eredivisie':_0x49fb0f(0x212),'Primeira\x20Liga':_0x49fb0f(0x20c)};function getLeagueColor(_0x9458a7){var _0x4a93be=_0x49fb0f;return leagueColors[_0x9458a7]||_0x4a93be(0x1f7);}function updateChartDimensions(){var _0x1c1555=_0x49fb0f,_0xbcfa83=document['querySelector'](_0x1c1555(0x235))[_0x1c1555(0x21d)],_0x1b521e=window[_0x1c1555(0x242)]*0.7,_0x2b989c=0x1e,_0x38d0f7=Math[_0x1c1555(0x24a)](0x43a,_0xbcfa83-_0x2b989c*0x2),_0x4b944b=window[_0x1c1555(0x205)]/window[_0x1c1555(0x242)]<0x1;if(_0x4b944b){margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4b};var _0x540bfc=1.4,_0x5a7b66=Math['min'](_0x1b521e,_0x38d0f7*_0x540bfc);_0x5a7b66=Math[_0x1c1555(0x214)](_0x5a7b66,0x1f4);}else{margin={'top':0x28,'right':0x1e,'bottom':0x3c,'left':0x4f};var _0x5c43f5=0.7,_0x5a7b66=_0x38d0f7*_0x5c43f5;}width=_0x38d0f7-margin[_0x1c1555(0x2ba)]-margin['right'],height=_0x5a7b66-margin[_0x1c1555(0x24b)]-margin[_0x1c1555(0x284)],d3['select'](_0x1c1555(0x232))[_0x1c1555(0x25d)](_0x1c1555(0x227),_0x38d0f7)[_0x1c1555(0x25d)](_0x1c1555(0x203),_0x5a7b66),document[_0x1c1555(0x29d)](_0x1c1555(0x299))[_0x1c1555(0x22e)]['height']=_0x5a7b66+'px';}function _0x249f(){var _0x37ebe7=['.xy-line-hover','apply','map','append','median','select-x','querySelectorAll','auto','Select\x20all\x20teams','x-axis','classList','currentTranslations','</strong><br/>','axisLeft','pct','nice','change','</span>','start','value','send','league-select-options','median-line','3398NpESbm','.performance-label','mouseover','responseText','text-anchor','GET','select-y','forEach','preventDefault','7699230mtEZsm','677qaJSej','flex','bottom','metric-select-option','select-icon','call','tooltip.xg-line-left','Hide\x20median\x20lines','22824wrpLlF','interrupt','transform','6868848GmPzUE','innerHTML','help','x-metric-trigger','normalize','5022606pglATc','classed','iconify-icon','filter','Enter','y-label','Escape','.chart-container','splice','xy-line-hover','toggle','querySelector','search-match','Premier\x20League','Teams\x20below\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','12px','font-family','backgroundColor','nearest','fontWeight','setAttribute','split','node','.custom-select-trigger,\x20.metric-select-trigger','#333','enter','contains','rgba(0,\x20128,\x200,\x200.7)','pointer','hideMedianLines','replace','addEventListener','all','linearGradient#line-gradient','.custom-select-options,\x20.metric-select-options','y-axis','anchor','temp-label','appendChild','.xy-line','left','click','getAttribute','#000','marginRight','translate(0,','.custom-select-option,\x20.metric-select-option','select','rgba(255,\x20165,\x200,\x200.7)','includes','#select-y','toLowerCase','league-legend','transition','transparent','.xy-line-bg','display','ArrowDown','selected','hanging','G\x20=\x20xG\x20Line','14px','177dNyWMf','legend-item','property','remove','tickSize','Ligue\x201','tooltip','toFixed','https://datamb.football/database/TEAM/teamplots.csv','Top\x205\x20Leagues','line','extent','div','x-label','middle','font-size','text','metrics.','legend-color','x-metric-options','ion-ios-circle-outline','createElement','font-weight','La\x20Liga','tooltip.xg-line-right','size','500','parentNode','Teams\x20left\x20of\x20this\x20line\x20are\x20scoring\x20fewer\x20goals\x20than\x20expected.','pageX','push','Teams\x20right\x20of\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.','Unselect\x20all\x20teams','Inter,\x20sans-serif','stroke-dasharray','rgba(255,\x200,\x200,\x200.7)','keys','Goals\x20per\x2090','y-metric-options','5bFXzTV','</span><br/>','getBBox','8px','rotate(-90)','find','class','domain','height','toggle-median-lines','innerWidth','184EFBIuP','tooltip.xg-line-title','xG\x20per\x2090','y-metric-trigger','indexOf','stroke-width','rgba(238,\x20130,\x20238,\x200.7)','html','circle','.xy-line-label-bg','className','cursor','rgba(75,\x200,\x20130,\x200.7)','xy-line','max','280863eKwXft','.team-label','match','ID,Player,Top\x207\x20Leagues,Goals\x20per\x2090,xG\x20per\x2090,Shots\x20on\x20target\x20per\x2090,Shots\x20on\x20target\x20%,Passes\x20completed,Pass\x20accuracy\x20%,Possession\x20%,Positional\x20attacks\x20per\x2090,Counter\x20attacks\x20per\x2090,Touches\x20in\x20the\x20box\x20per\x2090,Goals\x20conceded\x20per\x2090,SoT\x20against\x20per\x2090,Defensive\x20duels\x20per\x2090,Defensive\x20duel\x20%,Aerial\x20duels\x20per\x2090,Aerial\x20duels\x20%,Passes\x20per\x20possession,PPDA\x0a','selectAll','getElementById','scaleLinear','rgba(0,\x200,\x20255,\x200.7)','clientWidth','length','body','Show\x20median\x20lines','showMedianLines','select-league','trim','scrollIntoView','<br/>','target','width','block','range','fill','Serie\x20A','mouseout','findIndex','style','event','nextElementSibling','slice','#scatter-plot','search-bar','.custom-select-trigger.open,\x20.metric-select-trigger.open','.chart-wrapper','ArrowUp','every','right','add','19915005VyrEVZ','textContent','duration','stroke','none','.selected','.median-line','span','innerHeight','data-i18n','opacity','end','cloneNode','Bundesliga','from','getBoundingClientRect','min','top','marker#arrow-over,\x20marker#arrow-under','axisBottom','median-lines-tooltip','rgba(0,\x200,\x200,\x200.3)','tooltip.xg-line-above','metrics','key','select-all-tooltip','resize','search-dimmed','<span>','each','pow','team-label-','rgba(70,\x20130,\x20180,\x200.7)','15px','pageY','attr','12ViqchO','open','league-select-trigger'];_0x249f=function(){return _0x37ebe7;};return _0x249f();}window['addEventListener']('resize',function(){updateChartDimensions(),requestAnimationFrame(function(){updateChart();});}),updateChartDimensions();function debounce(_0xc87d0a,_0xe7a3fa){let _0x82b92e;return function(){const _0x5dfc28=this,_0x3fde19=arguments;clearTimeout(_0x82b92e),_0x82b92e=setTimeout(function(){var _0x594c47=_0x2ec9;_0xc87d0a[_0x594c47(0x262)](_0x5dfc28,_0x3fde19);},_0xe7a3fa);};}var prevWindowWidth=window[_0x49fb0f(0x205)],prevWindowHeight=window[_0x49fb0f(0x242)];window['addEventListener'](_0x49fb0f(0x254),debounce(function(){var _0x1d8d7f=_0x49fb0f,_0x1f8c9b=prevWindowWidth/prevWindowHeight<0x1,_0x5ee099=window['innerWidth']/window[_0x1d8d7f(0x242)]<0x1;prevWindowWidth=window['innerWidth'],prevWindowHeight=window['innerHeight'],requestAnimationFrame(function(){updateChart();});},0x32));var medianLinesVisible=![],selectX=d3[_0x49fb0f(0x2c1)]('#select-x'),selectY=d3[_0x49fb0f(0x2c1)](_0x49fb0f(0x2c4)),names=data['map'](function(_0xb60b42){return _0xb60b42[0x1];});header[_0x49fb0f(0x231)](0x3)[_0x49fb0f(0x27f)](function(_0x24c707){var _0x2815b6=_0x49fb0f;selectX[_0x2815b6(0x264)]('option')['text'](_0x24c707)[_0x2815b6(0x25d)](_0x2815b6(0x274),_0x24c707),selectY[_0x2815b6(0x264)]('option')[_0x2815b6(0x1e4)](_0x24c707)['attr']('value',_0x24c707);}),selectX[_0x49fb0f(0x1d6)]('value',header[0x3]),selectY[_0x49fb0f(0x1d6)](_0x49fb0f(0x274),header[0x4]);var svg=d3['select']('#scatter-plot')[_0x49fb0f(0x25d)](_0x49fb0f(0x227),width+margin['left']+margin[_0x49fb0f(0x238)])['attr']('height',height+margin[_0x49fb0f(0x24b)]+margin[_0x49fb0f(0x284)])[_0x49fb0f(0x264)]('g')['attr'](_0x49fb0f(0x28c),'translate('+margin['left']+','+margin[_0x49fb0f(0x24b)]+')'),xMetric=header[0x3],yMetric=header[0x4],xScale=d3['scaleLinear']()[_0x49fb0f(0x229)]([0x0,width]),yScale=d3[_0x49fb0f(0x21b)]()[_0x49fb0f(0x229)]([height,0x0]),xAxis=d3[_0x49fb0f(0x24d)](xScale)[_0x49fb0f(0x1d8)](0x0),yAxis=d3[_0x49fb0f(0x26e)](yScale)['tickSize'](0x0),gXAxis=svg['append']('g')['attr']('class',_0x49fb0f(0x26a))['attr'](_0x49fb0f(0x28c),_0x49fb0f(0x2bf)+height+')'),gYAxis=svg[_0x49fb0f(0x264)]('g')['attr'](_0x49fb0f(0x201),_0x49fb0f(0x2b5)),xLabel=svg[_0x49fb0f(0x264)](_0x49fb0f(0x1e4))['attr'](_0x49fb0f(0x201),_0x49fb0f(0x1e1))[_0x49fb0f(0x25d)](_0x49fb0f(0x27c),_0x49fb0f(0x245))[_0x49fb0f(0x25d)]('x',width)['attr']('y',height+0x23)[_0x49fb0f(0x22e)](_0x49fb0f(0x2a2),_0x49fb0f(0x1f5))[_0x49fb0f(0x22e)]('font-size',_0x49fb0f(0x1d3)),yLabel=svg[_0x49fb0f(0x264)]('text')['attr']('class',_0x49fb0f(0x297))['attr'](_0x49fb0f(0x27c),_0x49fb0f(0x245))['attr']('transform',_0x49fb0f(0x1ff))['attr']('y',-0x35)['attr']('x',0x0)[_0x49fb0f(0x22e)](_0x49fb0f(0x2a2),_0x49fb0f(0x1f5))[_0x49fb0f(0x22e)](_0x49fb0f(0x1e3),'14px'),tooltip=d3[_0x49fb0f(0x2c1)](_0x49fb0f(0x21f))[_0x49fb0f(0x264)]('div')[_0x49fb0f(0x25d)](_0x49fb0f(0x201),_0x49fb0f(0x1da));function isMobileDevice(){return window['innerWidth']<=0x300;}function positionTooltip(_0x20ac98,_0x99ed5d){var _0x302f59=_0x49fb0f;const _0x45b94b=_0x99ed5d['node']();if(!_0x45b94b)return{'left':0x0,'top':0x0};const _0x2ef9ce=_0x45b94b[_0x302f59(0x249)](),_0x4e2fd1=window[_0x302f59(0x205)],_0x4f82a7=window[_0x302f59(0x242)];let _0x5f0f10=_0x20ac98[_0x302f59(0x1f1)]+0xa,_0x5e2517=_0x20ac98[_0x302f59(0x25c)]-0x1c;return _0x5f0f10+_0x2ef9ce[_0x302f59(0x227)]>_0x4e2fd1-0xa&&(_0x5f0f10=_0x20ac98[_0x302f59(0x1f1)]-_0x2ef9ce[_0x302f59(0x227)]-0xa),_0x5e2517+_0x2ef9ce['height']>_0x4f82a7-0xa&&(_0x5e2517=_0x20ac98['pageY']-_0x2ef9ce['height']-0xa),_0x5f0f10=Math[_0x302f59(0x214)](0xa,_0x5f0f10),_0x5e2517=Math['max'](0xa,_0x5e2517),{'left':_0x5f0f10,'top':_0x5e2517};}var clickedCircles=[],filteredData=data,filteredNames=names,circles;function updateChart(){var _0x1e55a6=_0x49fb0f;updateChartDimensions(),d3[_0x1e55a6(0x2c1)](_0x1e55a6(0x232))[_0x1e55a6(0x25d)](_0x1e55a6(0x227),width+margin[_0x1e55a6(0x2ba)]+margin[_0x1e55a6(0x238)])[_0x1e55a6(0x25d)](_0x1e55a6(0x203),height+margin['top']+margin[_0x1e55a6(0x284)]),gXAxis[_0x1e55a6(0x25d)](_0x1e55a6(0x28c),_0x1e55a6(0x2bf)+height+')'),xLabel[_0x1e55a6(0x25d)]('x',width)[_0x1e55a6(0x25d)]('y',height+0x23),yLabel[_0x1e55a6(0x25d)]('x',0x0);const _0x1e7001=document[_0x1e55a6(0x21f)][_0x1e55a6(0x26b)][_0x1e55a6(0x2ac)]('dark-mode');var _0x215234=document['getElementById'](_0x1e55a6(0x222))['value'];if(_0x215234==='all')filteredData=data;else _0x215234===_0x1e55a6(0x1dd)?filteredData=data[_0x1e55a6(0x295)](function(_0x530404){var _0x2942c0=_0x1e55a6;return _0x530404[0x2]==='Premier\x20League'||_0x530404[0x2]===_0x2942c0(0x1eb)||_0x530404[0x2]==='Bundesliga'||_0x530404[0x2]===_0x2942c0(0x22b)||_0x530404[0x2]==='Ligue\x201';}):filteredData=data[_0x1e55a6(0x295)](function(_0x1488d1){return _0x1488d1[0x2]===_0x215234;});filteredNames=filteredData[_0x1e55a6(0x263)](function(_0x33b23b){return _0x33b23b[0x1];}),xMetric=selectX[_0x1e55a6(0x1d6)](_0x1e55a6(0x274)),yMetric=selectY[_0x1e55a6(0x1d6)](_0x1e55a6(0x274)),xScale['range']([0x0,width])['domain']((function(){var _0xabf0c8=_0x1e55a6;const _0x550bd9=d3[_0xabf0c8(0x1df)](filteredData,function(_0x225e4e){var _0x3b7320=_0xabf0c8;return+_0x225e4e[header[_0x3b7320(0x20a)](xMetric)];}),_0x2b13b7=d3[_0xabf0c8(0x21b)]()[_0xabf0c8(0x202)](_0x550bd9)[_0xabf0c8(0x270)](),_0x4a04ed=_0x2b13b7[_0xabf0c8(0x202)](),_0x5e44fb=_0x550bd9[0x1]-_0x550bd9[0x0],_0x2567fd=_0x4a04ed[0x1]-_0x4a04ed[0x0];if(_0x2567fd/_0x5e44fb>1.2){const _0x227141=_0x5e44fb*0.1;return[_0x550bd9[0x0]-_0x227141,_0x550bd9[0x1]+_0x227141];}else return _0x4a04ed;}())),yScale[_0x1e55a6(0x229)]([height,0x0])[_0x1e55a6(0x202)]((function(){var _0x46eace=_0x1e55a6;const _0x3f5e55=d3[_0x46eace(0x1df)](filteredData,function(_0x263346){var _0x42f3d5=_0x46eace;return+_0x263346[header[_0x42f3d5(0x20a)](yMetric)];}),_0x388ccb=d3['scaleLinear']()['domain'](_0x3f5e55)[_0x46eace(0x270)](),_0x51fc00=_0x388ccb[_0x46eace(0x202)](),_0x309f4f=_0x3f5e55[0x1]-_0x3f5e55[0x0],_0x36852d=_0x51fc00[0x1]-_0x51fc00[0x0];if(_0x36852d/_0x309f4f>1.2){const _0x170222=_0x309f4f*0.1;return[_0x3f5e55[0x0]-_0x170222,_0x3f5e55[0x1]+_0x170222];}else return _0x51fc00;}())),gXAxis[_0x1e55a6(0x287)](d3['axisBottom'](xScale)[_0x1e55a6(0x1d8)](0x0)),gYAxis[_0x1e55a6(0x287)](d3[_0x1e55a6(0x26e)](yScale)[_0x1e55a6(0x1d8)](0x0));const _0x1f2755=_0x1e55a6(0x1e5)+xMetric[_0x1e55a6(0x2c5)]()[_0x1e55a6(0x2b0)](/ /g,'-')[_0x1e55a6(0x2b0)](/%/g,_0x1e55a6(0x26f)),_0xc4762a=_0x1e55a6(0x1e5)+yMetric[_0x1e55a6(0x2c5)]()[_0x1e55a6(0x2b0)](/ /g,'-')[_0x1e55a6(0x2b0)](/%/g,_0x1e55a6(0x26f));xLabel['attr']('data-i18n',_0x1f2755),yLabel[_0x1e55a6(0x25d)](_0x1e55a6(0x243),_0xc4762a);if(window['currentTranslations']&&window['currentTranslations']['metrics']){const _0xfb8948=xMetric[_0x1e55a6(0x2c5)]()[_0x1e55a6(0x2b0)](/ /g,'-')[_0x1e55a6(0x2b0)](/%/g,_0x1e55a6(0x26f)),_0x268661=yMetric['toLowerCase']()[_0x1e55a6(0x2b0)](/ /g,'-')[_0x1e55a6(0x2b0)](/%/g,_0x1e55a6(0x26f)),_0x1ccb3e=window[_0x1e55a6(0x26c)][_0x1e55a6(0x251)][_0xfb8948],_0x17732e=window[_0x1e55a6(0x26c)][_0x1e55a6(0x251)][_0x268661];xLabel[_0x1e55a6(0x1e4)](_0x1ccb3e||xMetric),yLabel['text'](_0x17732e||yMetric);}else xLabel[_0x1e55a6(0x1e4)](xMetric),yLabel[_0x1e55a6(0x1e4)](yMetric);svg[_0x1e55a6(0x219)]('circle')[_0x1e55a6(0x1d7)](),svg['selectAll'](_0x1e55a6(0x216))['remove'](),svg[_0x1e55a6(0x219)](_0x1e55a6(0x2b9))[_0x1e55a6(0x1d7)](),svg[_0x1e55a6(0x219)](_0x1e55a6(0x2c9))[_0x1e55a6(0x1d7)](),svg[_0x1e55a6(0x219)]('.xy-line-label')[_0x1e55a6(0x1d7)](),svg[_0x1e55a6(0x219)](_0x1e55a6(0x20f))[_0x1e55a6(0x1d7)](),svg['selectAll'](_0x1e55a6(0x279))[_0x1e55a6(0x1d7)](),svg['selectAll'](_0x1e55a6(0x2b3))['remove'](),svg[_0x1e55a6(0x219)](_0x1e55a6(0x24c))[_0x1e55a6(0x1d7)](),svg[_0x1e55a6(0x219)](_0x1e55a6(0x261))[_0x1e55a6(0x1d7)](),svg['selectAll'](_0x1e55a6(0x240))[_0x1e55a6(0x1d7)]();if(xMetric===_0x1e55a6(0x208)&&yMetric===_0x1e55a6(0x1f9)||xMetric===_0x1e55a6(0x1f9)&&yMetric==='xG\x20per\x2090'){var _0x10e9ef=null,_0x2a696d=d3[_0x1e55a6(0x24a)](filteredData,function(_0x124301){var _0x1a9e2d=_0x1e55a6;return _0x124301[header[_0x1a9e2d(0x20a)](xMetric)];}),_0x39b2b9=d3[_0x1e55a6(0x214)](filteredData,function(_0xec4412){var _0x1ac6e0=_0x1e55a6;return _0xec4412[header[_0x1ac6e0(0x20a)](xMetric)];}),_0x31746e=d3[_0x1e55a6(0x24a)](filteredData,function(_0x150c59){var _0x405fb7=_0x1e55a6;return _0x150c59[header[_0x405fb7(0x20a)](yMetric)];}),_0x57d054=d3[_0x1e55a6(0x214)](filteredData,function(_0x2658f8){var _0x15050a=_0x1e55a6;return _0x2658f8[header[_0x15050a(0x20a)](yMetric)];}),_0x2d00bb=Math['min'](_0x39b2b9,_0x57d054),_0x55216c=Math['max'](_0x2a696d,_0x31746e);svg[_0x1e55a6(0x264)](_0x1e55a6(0x1de))[_0x1e55a6(0x25d)]('class',_0x1e55a6(0x213))[_0x1e55a6(0x25d)]('x1',xScale(_0x55216c))[_0x1e55a6(0x25d)]('y1',yScale(_0x55216c))['attr']('x2',xScale(_0x2d00bb))['attr']('y2',yScale(_0x2d00bb))[_0x1e55a6(0x22e)](_0x1e55a6(0x23d),'#2ecc71')[_0x1e55a6(0x22e)](_0x1e55a6(0x20b),'2')['style'](_0x1e55a6(0x1f6),'5,3'),svg['append']('line')[_0x1e55a6(0x25d)]('class',_0x1e55a6(0x29b))[_0x1e55a6(0x25d)]('x1',xScale(_0x55216c))[_0x1e55a6(0x25d)]('y1',yScale(_0x55216c))[_0x1e55a6(0x25d)]('x2',xScale(_0x2d00bb))[_0x1e55a6(0x25d)]('y2',yScale(_0x2d00bb))[_0x1e55a6(0x22e)](_0x1e55a6(0x23d),_0x1e55a6(0x2c8))[_0x1e55a6(0x22e)](_0x1e55a6(0x20b),'15')[_0x1e55a6(0x22e)](_0x1e55a6(0x211),_0x1e55a6(0x28f))['on'](_0x1e55a6(0x27a),function(){var _0x2b844b=_0x1e55a6;_0x10e9ef&&clearTimeout(_0x10e9ef);var _0x27d69f=d3[_0x2b844b(0x22f)][_0x2b844b(0x1f1)],_0xdacae4=d3[_0x2b844b(0x22f)]['pageY'];_0x10e9ef=setTimeout(function(){var _0x91e3e1=_0x2b844b;tooltip['transition']()[_0x91e3e1(0x23c)](0xc8)[_0x91e3e1(0x22e)](_0x91e3e1(0x244),0.9);var _0x50bc3a='<strong>'+getTranslation(_0x91e3e1(0x207),_0x91e3e1(0x1d2))+_0x91e3e1(0x26d);xMetric==='xG\x20per\x2090'&&yMetric===_0x91e3e1(0x1f9)?_0x50bc3a+=_0x91e3e1(0x256)+getTranslation(_0x91e3e1(0x250),'Teams\x20above\x20this\x20line\x20are\x20scoring\x20more\x20goals\x20than\x20expected.')+_0x91e3e1(0x1fc)+_0x91e3e1(0x256)+getTranslation('tooltip.xg-line-below',_0x91e3e1(0x2a0))+'</span>':_0x50bc3a+='<span>'+getTranslation(_0x91e3e1(0x1ec),_0x91e3e1(0x1f3))+_0x91e3e1(0x1fc)+_0x91e3e1(0x256)+getTranslation(_0x91e3e1(0x288),_0x91e3e1(0x1f0))+_0x91e3e1(0x272),tooltip[_0x91e3e1(0x20d)](_0x50bc3a)[_0x91e3e1(0x22e)]('left',_0x27d69f+0xa+'px')[_0x91e3e1(0x22e)](_0x91e3e1(0x24b),_0xdacae4-0x1c+'px');},0x258);})['on']('mouseout',function(){var _0x4abcfe=_0x1e55a6;_0x10e9ef&&(clearTimeout(_0x10e9ef),_0x10e9ef=null),tooltip[_0x4abcfe(0x2c7)]()[_0x4abcfe(0x23c)](0x1f4)[_0x4abcfe(0x22e)](_0x4abcfe(0x244),0x0);});}if(medianLinesVisible){var _0x1226a7=d3[_0x1e55a6(0x265)](filteredData,function(_0x2e0ab8){var _0x24620b=_0x1e55a6;return _0x2e0ab8[header[_0x24620b(0x20a)](xMetric)];}),_0x4ddb9d=d3[_0x1e55a6(0x265)](filteredData,function(_0xfb6b55){var _0x3edaca=_0x1e55a6;return _0xfb6b55[header[_0x3edaca(0x20a)](yMetric)];});svg['append'](_0x1e55a6(0x1de))['attr']('class',_0x1e55a6(0x277))[_0x1e55a6(0x25d)]('x1',xScale(_0x1226a7))[_0x1e55a6(0x25d)]('y1',0x0)['attr']('x2',xScale(_0x1226a7))[_0x1e55a6(0x25d)]('y2',height)[_0x1e55a6(0x22e)](_0x1e55a6(0x23d),_0x1e55a6(0x24f))[_0x1e55a6(0x22e)](_0x1e55a6(0x1f6),'4'),svg[_0x1e55a6(0x264)]('line')[_0x1e55a6(0x25d)]('class',_0x1e55a6(0x277))[_0x1e55a6(0x25d)]('x1',0x0)[_0x1e55a6(0x25d)]('y1',yScale(_0x4ddb9d))['attr']('x2',width)[_0x1e55a6(0x25d)]('y2',yScale(_0x4ddb9d))['style'](_0x1e55a6(0x23d),_0x1e55a6(0x24f))[_0x1e55a6(0x22e)](_0x1e55a6(0x1f6),'4');}circles=svg[_0x1e55a6(0x219)](_0x1e55a6(0x20e))['data'](filteredData)[_0x1e55a6(0x2ab)]()['append'](_0x1e55a6(0x20e))[_0x1e55a6(0x25d)]('cx',function(_0x37b5b1){var _0x7bf3a6=_0x1e55a6;return xScale(_0x37b5b1[header[_0x7bf3a6(0x20a)](xMetric)]);})[_0x1e55a6(0x25d)]('cy',function(_0x588114){return yScale(_0x588114[header['indexOf'](yMetric)]);})[_0x1e55a6(0x25d)]('r',0x8)[_0x1e55a6(0x22e)](_0x1e55a6(0x22a),function(_0x161881){var _0x4ea77b=_0x1e55a6;if(clickedCircles[_0x4ea77b(0x2c3)](_0x161881[0x1]))return getLeagueColor(_0x161881[0x2]);return _0x4ea77b(0x25a);})[_0x1e55a6(0x22e)](_0x1e55a6(0x23d),function(_0x2bf1f9){var _0xe2382a=_0x1e55a6;return clickedCircles[_0xe2382a(0x2c3)](_0x2bf1f9[0x1])?_0xe2382a(0x2bd):_0xe2382a(0x23e);})['style'](_0x1e55a6(0x20b),function(_0x1be9c1){var _0xb39c71=_0x1e55a6;return clickedCircles[_0xb39c71(0x2c3)](_0x1be9c1[0x1])?0x2:0x0;})['style'](_0x1e55a6(0x211),_0x1e55a6(0x2ae))['on'](_0x1e55a6(0x27a),function(_0xa410e4){var _0x1e0889=_0x1e55a6;d3[_0x1e0889(0x2c1)](this)[_0x1e0889(0x2c7)]()[_0x1e0889(0x23c)](0xc8)[_0x1e0889(0x25d)]('r',0xa)[_0x1e0889(0x22e)](_0x1e0889(0x22a),getLeagueColor(_0xa410e4[0x2])),tooltip[_0x1e0889(0x2c7)]()['duration'](0xc8)[_0x1e0889(0x22e)]('opacity',0.9);const _0x58f204='metrics.'+xMetric[_0x1e0889(0x2c5)]()[_0x1e0889(0x2b0)](/ /g,'-')[_0x1e0889(0x2b0)](/%/g,_0x1e0889(0x26f)),_0x3ed141=_0x1e0889(0x1e5)+yMetric[_0x1e0889(0x2c5)]()[_0x1e0889(0x2b0)](/ /g,'-')['replace'](/%/g,_0x1e0889(0x26f)),_0x5041f3=getTranslation(_0x58f204,xMetric),_0x4059b7=getTranslation(_0x3ed141,yMetric);tooltip[_0x1e0889(0x20d)]('<strong>'+_0xa410e4[0x1]+_0x1e0889(0x26d)+_0x5041f3+':\x20'+_0xa410e4[header[_0x1e0889(0x20a)](xMetric)][_0x1e0889(0x1db)](0x2)+_0x1e0889(0x225)+_0x4059b7+':\x20'+_0xa410e4[header[_0x1e0889(0x20a)](yMetric)][_0x1e0889(0x1db)](0x2));const _0x1916df=tooltip[_0x1e0889(0x2a8)]();if(_0x1916df){const _0x50c6d8=_0x1916df[_0x1e0889(0x249)](),_0x4f1d04=window[_0x1e0889(0x205)],_0x538855=window['innerHeight'];let _0x351f3b=d3[_0x1e0889(0x22f)]['pageX']+0xa,_0x2e850f=d3[_0x1e0889(0x22f)][_0x1e0889(0x25c)]-0x1c;_0x351f3b+_0x50c6d8['width']>_0x4f1d04-0xa&&(_0x351f3b=d3[_0x1e0889(0x22f)][_0x1e0889(0x1f1)]-_0x50c6d8[_0x1e0889(0x227)]-0xa),_0x2e850f+_0x50c6d8[_0x1e0889(0x203)]>_0x538855-0xa&&(_0x2e850f=d3[_0x1e0889(0x22f)][_0x1e0889(0x25c)]-_0x50c6d8[_0x1e0889(0x203)]-0xa),_0x351f3b=Math[_0x1e0889(0x214)](0xa,_0x351f3b),_0x2e850f=Math[_0x1e0889(0x214)](0xa,_0x2e850f),tooltip[_0x1e0889(0x22e)](_0x1e0889(0x2ba),_0x351f3b+'px')[_0x1e0889(0x22e)](_0x1e0889(0x24b),_0x2e850f+'px');}window[_0x1e0889(0x205)]<=0x300&&setTimeout(function(){var _0x48570b=_0x1e0889;tooltip[_0x48570b(0x2c7)]()[_0x48570b(0x23c)](0xc8)['style'](_0x48570b(0x244),0x0);},0x3e8);})['on'](_0x1e55a6(0x22c),function(_0x1f4387){var _0x208693=_0x1e55a6;window['innerWidth']>0x300&&tooltip[_0x208693(0x2c7)]()['duration'](0x1f4)['style'](_0x208693(0x244),0x0);var _0x536339=clickedCircles[_0x208693(0x2c3)](_0x1f4387[0x1]);d3['select'](this)[_0x208693(0x2c7)]()[_0x208693(0x23c)](0xc8)[_0x208693(0x25d)]('r',0x8)['style'](_0x208693(0x22a),function(){var _0x198a25=_0x208693;return _0x536339?getLeagueColor(_0x1f4387[0x2]):_0x198a25(0x25a);});})['on']('click',function(_0x2b5ca9){var _0x2e9a93=_0x1e55a6,_0x20efbe=d3[_0x2e9a93(0x2c1)](this)[_0x2e9a93(0x293)](_0x2e9a93(0x29e));_0x20efbe&&resetSearch();var _0x2daae3=clickedCircles['indexOf'](_0x2b5ca9[0x1]);_0x2daae3===-0x1?(clickedCircles[_0x2e9a93(0x1f2)](_0x2b5ca9[0x1]),d3[_0x2e9a93(0x2c1)](this)[_0x2e9a93(0x22e)](_0x2e9a93(0x22a),getLeagueColor(_0x2b5ca9[0x2]))[_0x2e9a93(0x22e)](_0x2e9a93(0x23d),_0x2e9a93(0x2bd))['style'](_0x2e9a93(0x20b),0x2),addTeamLabel(_0x2b5ca9)):(clickedCircles[_0x2e9a93(0x29a)](_0x2daae3,0x1),d3[_0x2e9a93(0x2c1)](this)[_0x2e9a93(0x22e)](_0x2e9a93(0x22a),'rgba(70,\x20130,\x20180,\x200.7)')['style'](_0x2e9a93(0x23d),_0x2e9a93(0x23e)),svg[_0x2e9a93(0x219)]('.team-label-'+_0x2b5ca9[0x1][_0x2e9a93(0x2b0)](/\s+/g,'-')['toLowerCase']())[_0x2e9a93(0x1d7)]());updateSelectAllButtonText();var _0x263e02=document[_0x2e9a93(0x21a)](_0x2e9a93(0x222))[_0x2e9a93(0x274)];updateLeagueLegend(_0x263e02);}),clickedCircles[_0x1e55a6(0x27f)](function(_0x16199e){var _0x3b6fe5=filteredData['find'](function(_0x4df03d){return _0x4df03d[0x1]===_0x16199e;});_0x3b6fe5&&addTeamLabel(_0x3b6fe5);}),updateSelectAllButtonText(),updateLeagueLegend(_0x215234);}function updateSelectAllButtonText(){var _0x407e21=_0x49fb0f,_0x1b3c08=document[_0x407e21(0x21a)](_0x407e21(0x286)),_0x4aa187=document[_0x407e21(0x21a)](_0x407e21(0x253)),_0x558cc1=filteredData['every'](function(_0x2a4474){var _0x41c72d=_0x407e21;return clickedCircles[_0x41c72d(0x2c3)](_0x2a4474[0x1]);});_0x558cc1?(_0x1b3c08['className']=_0x407e21(0x1e8),_0x4aa187&&(window[_0x407e21(0x26c)]&&window[_0x407e21(0x26c)][_0x407e21(0x1da)]?_0x4aa187[_0x407e21(0x23b)]=window[_0x407e21(0x26c)][_0x407e21(0x1da)]['unselectAll']||_0x407e21(0x1f4):_0x4aa187[_0x407e21(0x23b)]=_0x407e21(0x1f4))):(_0x1b3c08[_0x407e21(0x210)]='ion-ios-circle-filled',_0x4aa187&&(window[_0x407e21(0x26c)]&&window[_0x407e21(0x26c)][_0x407e21(0x1da)]?_0x4aa187['textContent']=window[_0x407e21(0x26c)][_0x407e21(0x1da)]['selectAll']||_0x407e21(0x269):_0x4aa187[_0x407e21(0x23b)]=_0x407e21(0x269)));}selectX['on'](_0x49fb0f(0x271),updateChart),selectY['on'](_0x49fb0f(0x271),updateChart);function removeSpecialCharsAndDiacritics(_0x537bca){var _0x5ad332=_0x49fb0f;if(!_0x537bca)return'';return _0x537bca[_0x5ad332(0x291)]('NFD')[_0x5ad332(0x2b0)](/[\u0300-\u036f]/g,'')[_0x5ad332(0x2b0)](/Ø/g,'O')[_0x5ad332(0x2b0)](/ø/g,'o');}var searchBar=document[_0x49fb0f(0x21a)](_0x49fb0f(0x233));searchBar[_0x49fb0f(0x2b1)]('input',function(){var _0x2b6233=_0x49fb0f,_0x42666d=searchBar[_0x2b6233(0x274)][_0x2b6233(0x2c5)]();if(_0x42666d===''){resetSearch();return;}var _0x2f5747=removeSpecialCharsAndDiacritics(_0x42666d);svg['selectAll'](_0x2b6233(0x20e))[_0x2b6233(0x293)](_0x2b6233(0x29e),![])[_0x2b6233(0x22e)]('fill',function(_0x3ad85a){var _0x4461d5=_0x2b6233;return clickedCircles[_0x4461d5(0x2c3)](_0x3ad85a[0x1])?getLeagueColor(_0x3ad85a[0x2]):_0x4461d5(0x25a);})[_0x2b6233(0x22e)](_0x2b6233(0x23d),function(_0x4993d9){var _0xc50db8=_0x2b6233;return clickedCircles[_0xc50db8(0x2c3)](_0x4993d9[0x1])?_0xc50db8(0x2bd):_0xc50db8(0x23e);})[_0x2b6233(0x22e)](_0x2b6233(0x20b),function(_0x2d5aed){var _0xea248d=_0x2b6233;return clickedCircles[_0xea248d(0x2c3)](_0x2d5aed[0x1])?0x2:0x0;})[_0x2b6233(0x22e)](_0x2b6233(0x295),'none')[_0x2b6233(0x257)](function(){var _0x55f0ec=_0x2b6233;d3[_0x55f0ec(0x2c1)](this)['style']('r',null);}),svg[_0x2b6233(0x219)](_0x2b6233(0x216))[_0x2b6233(0x293)](_0x2b6233(0x29e),![])[_0x2b6233(0x293)](_0x2b6233(0x255),![]);var _0x29d356=[];svg['selectAll']('circle')[_0x2b6233(0x295)](function(_0x37e747){var _0x17996c=_0x2b6233,_0x3a0c4c=_0x37e747[0x1][_0x17996c(0x2c5)](),_0x103e4b=removeSpecialCharsAndDiacritics(_0x3a0c4c),_0x48e4b6=_0x3a0c4c[_0x17996c(0x2c3)](_0x42666d)||_0x103e4b[_0x17996c(0x2c3)](_0x2f5747);return _0x48e4b6&&_0x29d356[_0x17996c(0x1f2)](_0x37e747[0x1]),_0x48e4b6;})[_0x2b6233(0x293)](_0x2b6233(0x29e),!![])['each'](function(){var _0xebb408=_0x2b6233;this['parentNode'][_0xebb408(0x2b8)](this);}),_0x29d356[_0x2b6233(0x21e)]>0x0?(svg['selectAll']('.team-label')[_0x2b6233(0x293)](_0x2b6233(0x255),!![]),svg[_0x2b6233(0x219)](_0x2b6233(0x216))[_0x2b6233(0x295)](function(){var _0xffc129=_0x2b6233,_0x23229c=d3[_0xffc129(0x2c1)](this)['text']();return _0x29d356['includes'](_0x23229c);})['classed'](_0x2b6233(0x29e),!![])['classed'](_0x2b6233(0x255),![])[_0x2b6233(0x257)](function(){var _0x52564c=_0x2b6233;this[_0x52564c(0x1ef)][_0x52564c(0x2b8)](this);}),_0x29d356[_0x2b6233(0x27f)](function(_0x1be431){var _0x1d466c=_0x2b6233,_0x458323=_0x1d466c(0x259)+_0x1be431['replace'](/\s+/g,'-')[_0x1d466c(0x2c5)]();if(svg[_0x1d466c(0x2c1)]('.'+_0x458323)[_0x1d466c(0x1ed)]()===0x0){var _0x235235=filteredData[_0x1d466c(0x200)](function(_0x57b038){return _0x57b038[0x1]===_0x1be431;});_0x235235&&(addTeamLabel(_0x235235),svg[_0x1d466c(0x2c1)]('.'+_0x458323)[_0x1d466c(0x293)]('search-match',!![]));}})):(svg[_0x2b6233(0x219)](_0x2b6233(0x216))['each'](function(){var _0x50005e=_0x2b6233,_0x17594d=d3['select'](this),_0x16f78e=_0x17594d[_0x50005e(0x1e4)]();!clickedCircles[_0x50005e(0x2c3)](_0x16f78e)&&_0x17594d[_0x50005e(0x1d7)]();}),svg[_0x2b6233(0x219)](_0x2b6233(0x20e))['style'](_0x2b6233(0x22a),function(_0x51854e){var _0x3e135d=_0x2b6233;return clickedCircles[_0x3e135d(0x2c3)](_0x51854e[0x1])?getLeagueColor(_0x51854e[0x2]):_0x3e135d(0x25a);})['style'](_0x2b6233(0x23d),function(_0x1d3d1d){var _0x5e1b3b=_0x2b6233;return clickedCircles[_0x5e1b3b(0x2c3)](_0x1d3d1d[0x1])?_0x5e1b3b(0x2bd):_0x5e1b3b(0x23e);})[_0x2b6233(0x22e)](_0x2b6233(0x20b),function(_0x17a72a){return clickedCircles['includes'](_0x17a72a[0x1])?0x2:0x0;}));});function resetSearch(){var _0x547f60=_0x49fb0f;searchBar['value']='',svg[_0x547f60(0x219)]('circle')[_0x547f60(0x293)](_0x547f60(0x29e),![])[_0x547f60(0x22e)](_0x547f60(0x22a),function(_0x21db2d){var _0x559672=_0x547f60;return clickedCircles[_0x559672(0x2c3)](_0x21db2d[0x1])?getLeagueColor(_0x21db2d[0x2]):_0x559672(0x25a);})[_0x547f60(0x22e)](_0x547f60(0x23d),function(_0x208877){var _0xb2e84e=_0x547f60;return clickedCircles[_0xb2e84e(0x2c3)](_0x208877[0x1])?'#000':_0xb2e84e(0x23e);})[_0x547f60(0x22e)](_0x547f60(0x20b),function(_0x3c6960){return clickedCircles['includes'](_0x3c6960[0x1])?0x2:0x0;})[_0x547f60(0x22e)](_0x547f60(0x295),'none')[_0x547f60(0x257)](function(){var _0x56d646=_0x547f60;d3['select'](this)[_0x56d646(0x22e)]('r',null),d3[_0x56d646(0x2c1)](this)[_0x56d646(0x28b)]();}),svg[_0x547f60(0x219)](_0x547f60(0x216))[_0x547f60(0x293)](_0x547f60(0x29e),![])[_0x547f60(0x293)](_0x547f60(0x255),![])[_0x547f60(0x257)](function(){var _0x994771=_0x547f60;d3['select'](this)[_0x994771(0x28b)]();}),svg['selectAll']('.team-label')[_0x547f60(0x257)](function(){var _0x5d64=_0x547f60,_0x48a69c=d3['select'](this),_0x4ec703=_0x48a69c['text']();!clickedCircles[_0x5d64(0x2c3)](_0x4ec703)&&_0x48a69c[_0x5d64(0x1d7)]();});}var toggleButton=document[_0x49fb0f(0x21a)](_0x49fb0f(0x204));toggleButton[_0x49fb0f(0x2b1)]('click',function(){var _0x57c0c8=_0x49fb0f;medianLinesVisible=!medianLinesVisible,updateChart();const _0x77ae0b=document['getElementById'](_0x57c0c8(0x24e));window['currentTranslations']&&window['currentTranslations'][_0x57c0c8(0x1da)]?_0x77ae0b[_0x57c0c8(0x23b)]=medianLinesVisible?window['currentTranslations'][_0x57c0c8(0x1da)][_0x57c0c8(0x2af)]||'Hide\x20median\x20lines':window['currentTranslations'][_0x57c0c8(0x1da)][_0x57c0c8(0x221)]||_0x57c0c8(0x220):_0x77ae0b['textContent']=medianLinesVisible?_0x57c0c8(0x289):_0x57c0c8(0x220);});function selectAllCircles(){var _0x488430=_0x49fb0f,_0x31a545=filteredData[_0x488430(0x237)](function(_0x1725fc){var _0x5c7969=_0x488430;return clickedCircles[_0x5c7969(0x2c3)](_0x1725fc[0x1]);});_0x31a545?(clickedCircles=[],svg[_0x488430(0x219)](_0x488430(0x20e))['style'](_0x488430(0x22a),_0x488430(0x25a))[_0x488430(0x22e)](_0x488430(0x23d),_0x488430(0x23e)),svg[_0x488430(0x219)](_0x488430(0x216))[_0x488430(0x1d7)]()):(svg[_0x488430(0x219)]('circle')[_0x488430(0x257)](function(_0x3686c0){var _0xebbbd1=_0x488430;!clickedCircles[_0xebbbd1(0x2c3)](_0x3686c0[0x1])&&(clickedCircles[_0xebbbd1(0x1f2)](_0x3686c0[0x1]),d3[_0xebbbd1(0x2c1)](this)[_0xebbbd1(0x22e)](_0xebbbd1(0x22a),getLeagueColor(_0x3686c0[0x2]))[_0xebbbd1(0x22e)](_0xebbbd1(0x23d),_0xebbbd1(0x2bd))[_0xebbbd1(0x22e)](_0xebbbd1(0x20b),0x2));}),filteredData['forEach'](function(_0x546c66){addTeamLabel(_0x546c66);}));updateSelectAllButtonText();var _0x49eca1=document[_0x488430(0x21a)](_0x488430(0x222))['value'];updateLeagueLegend(_0x49eca1);}updateChart(),initializeCustomSelectors();function _0x2ec9(_0x7ca38f,_0x27d152){var _0x249f40=_0x249f();return _0x2ec9=function(_0x2ec953,_0x2a5be2){_0x2ec953=_0x2ec953-0x1d0;var _0x967b52=_0x249f40[_0x2ec953];return _0x967b52;},_0x2ec9(_0x7ca38f,_0x27d152);}function updateLeagueLegend(_0x4d4c0e){var _0x4b7b07=_0x49fb0f,_0x581f6d=document[_0x4b7b07(0x21a)](_0x4b7b07(0x2c6));if(_0x4d4c0e!==_0x4b7b07(0x2b2)&&_0x4d4c0e!==_0x4b7b07(0x1dd)){_0x581f6d[_0x4b7b07(0x22e)][_0x4b7b07(0x2ca)]=_0x4b7b07(0x23e);return;}if(clickedCircles['length']===0x0){_0x581f6d['style']['display']=_0x4b7b07(0x23e);return;}var _0x33c55c=![];for(var _0x184101=0x0;_0x184101<filteredData[_0x4b7b07(0x21e)];_0x184101++){if(clickedCircles[_0x4b7b07(0x2c3)](filteredData[_0x184101][0x1])){_0x33c55c=!![];break;}}if(!_0x33c55c){_0x581f6d[_0x4b7b07(0x22e)][_0x4b7b07(0x2ca)]='none';return;}_0x581f6d[_0x4b7b07(0x22e)]['display']=_0x4b7b07(0x283),_0x581f6d[_0x4b7b07(0x28e)]='';var _0xb0466a=document[_0x4b7b07(0x1e9)]('div');_0xb0466a['style'][_0x4b7b07(0x2a5)]='bold',_0xb0466a[_0x4b7b07(0x22e)]['marginRight']=_0x4b7b07(0x25b),_0x581f6d['appendChild'](_0xb0466a);var _0x565c8f=[];if(_0x4d4c0e===_0x4b7b07(0x2b2))_0x565c8f=Object[_0x4b7b07(0x1f8)](leagueColors);else _0x4d4c0e==='Top\x205\x20Leagues'&&(_0x565c8f=[_0x4b7b07(0x29f),_0x4b7b07(0x1eb),_0x4b7b07(0x247),_0x4b7b07(0x22b),_0x4b7b07(0x1d9)]);_0x565c8f[_0x4b7b07(0x27f)](function(_0x58d5a7){var _0x2a0fd6=_0x4b7b07,_0x5af0df=document[_0x2a0fd6(0x1e9)]('div');_0x5af0df[_0x2a0fd6(0x210)]=_0x2a0fd6(0x1d5);var _0x37f843=document[_0x2a0fd6(0x1e9)](_0x2a0fd6(0x1e0));_0x37f843[_0x2a0fd6(0x210)]=_0x2a0fd6(0x1e6),_0x37f843[_0x2a0fd6(0x22e)][_0x2a0fd6(0x2a3)]=leagueColors[_0x58d5a7];var _0x157a2f=document[_0x2a0fd6(0x1e9)](_0x2a0fd6(0x241));_0x157a2f['textContent']=_0x58d5a7,_0x5af0df[_0x2a0fd6(0x2b8)](_0x37f843),_0x5af0df[_0x2a0fd6(0x2b8)](_0x157a2f),_0x581f6d[_0x2a0fd6(0x2b8)](_0x5af0df);});}function addTeamLabel(_0x3f2489,_0x1594d){var _0x5d8463=_0x49fb0f,_0xf574b4=xScale(_0x3f2489[header[_0x5d8463(0x20a)](xMetric)]),_0x3c2804=yScale(_0x3f2489[header[_0x5d8463(0x20a)](yMetric)]),_0x10debf=_0x5d8463(0x259)+_0x3f2489[0x1][_0x5d8463(0x2c5)]()[_0x5d8463(0x2b0)](/\s+/g,'-');if(svg[_0x5d8463(0x2c1)]('.'+_0x10debf)[_0x5d8463(0x1ed)]()>0x0)return;var _0x28a050=svg[_0x5d8463(0x264)](_0x5d8463(0x1e4))[_0x5d8463(0x25d)](_0x5d8463(0x201),_0x5d8463(0x2b7))[_0x5d8463(0x1e4)](_0x3f2489[0x1])[_0x5d8463(0x22e)]('font-family',_0x5d8463(0x1f5))[_0x5d8463(0x22e)]('font-size',_0x5d8463(0x2a1))['style'](_0x5d8463(0x244),0x0),_0x2e55fb=_0x28a050['node']()['getComputedTextLength']();_0x28a050[_0x5d8463(0x1d7)]();var _0x48b39b=[{'dx':0x8,'dy':0x0,'anchor':_0x5d8463(0x273)},{'dx':-0x8,'dy':0x0,'anchor':_0x5d8463(0x245)},{'dx':0x0,'dy':-0x8,'anchor':_0x5d8463(0x1e2)},{'dx':0x0,'dy':0x8,'anchor':_0x5d8463(0x1e2)}],_0x46a89f=[];svg['selectAll']('text.team-label')[_0x5d8463(0x257)](function(){var _0x48c691=_0x5d8463,_0x220cd3=this['getBBox']();_0x46a89f[_0x48c691(0x1f2)]({'x1':_0x220cd3['x']-0x2,'y1':_0x220cd3['y']-0x2,'x2':_0x220cd3['x']+_0x220cd3[_0x48c691(0x227)]+0x2,'y2':_0x220cd3['y']+_0x220cd3[_0x48c691(0x203)]+0x2});});var _0x108a15=null,_0x253248=0xc,_0xa9c7e6=width,_0x4f064b=height;if(!_0x1594d){for(var _0x198526=0x0;_0x198526<_0x48b39b[_0x5d8463(0x21e)];_0x198526++){var _0x459fc5=_0x48b39b[_0x198526],_0x44f90d=_0xf574b4+_0x459fc5['dx'],_0x1105ad=_0x3c2804+_0x459fc5['dy'],_0x39dc95={'x1':_0x459fc5[_0x5d8463(0x2b6)]===_0x5d8463(0x245)?_0x44f90d-_0x2e55fb:_0x459fc5[_0x5d8463(0x2b6)]===_0x5d8463(0x1e2)?_0x44f90d-_0x2e55fb/0x2:_0x44f90d,'y1':_0x459fc5['dy']<0x0?_0x1105ad-_0x253248:_0x1105ad,'x2':_0x459fc5[_0x5d8463(0x2b6)]===_0x5d8463(0x273)?_0x44f90d+_0x2e55fb:_0x459fc5[_0x5d8463(0x2b6)]===_0x5d8463(0x1e2)?_0x44f90d+_0x2e55fb/0x2:_0x44f90d,'y2':_0x459fc5['dy']<0x0?_0x1105ad:_0x1105ad+_0x253248};if(_0x39dc95['x1']<0x0||_0x39dc95['x2']>_0xa9c7e6||_0x39dc95['y1']<0x0||_0x39dc95['y2']>_0x4f064b)continue;var _0x5aad63=![];for(var _0x4de115=0x0;_0x4de115<_0x46a89f['length'];_0x4de115++){var _0x576f61=_0x46a89f[_0x4de115];if(!(_0x39dc95['x2']<_0x576f61['x1']||_0x39dc95['x1']>_0x576f61['x2']||_0x39dc95['y2']<_0x576f61['y1']||_0x39dc95['y1']>_0x576f61['y2'])){_0x5aad63=!![];break;}}if(!_0x5aad63){_0x108a15=_0x459fc5;break;}}if(!_0x108a15){var _0x166fba=0x32,_0x216d1a=0x0;_0x46a89f['forEach'](function(_0x2e1f54){var _0x31f0bb=_0x5d8463,_0x979115=(_0x2e1f54['x1']+_0x2e1f54['x2'])/0x2,_0x583ed8=(_0x2e1f54['y1']+_0x2e1f54['y2'])/0x2,_0x5ed4a9=Math['sqrt'](Math[_0x31f0bb(0x258)](_0x979115-_0xf574b4,0x2)+Math[_0x31f0bb(0x258)](_0x583ed8-_0x3c2804,0x2));_0x5ed4a9<_0x166fba&&_0x216d1a++;});if(_0x216d1a>0x3)return;}}if(!_0x108a15){_0x108a15=_0x48b39b[0x0];var _0x44f90d=_0xf574b4+_0x108a15['dx'],_0x1105ad=_0x3c2804+_0x108a15['dy'],_0x39dc95={'x1':_0x108a15[_0x5d8463(0x2b6)]===_0x5d8463(0x245)?_0x44f90d-_0x2e55fb:_0x108a15['anchor']===_0x5d8463(0x1e2)?_0x44f90d-_0x2e55fb/0x2:_0x44f90d,'y1':_0x108a15['dy']<0x0?_0x1105ad-_0x253248:_0x1105ad,'x2':_0x108a15[_0x5d8463(0x2b6)]===_0x5d8463(0x273)?_0x44f90d+_0x2e55fb:_0x108a15[_0x5d8463(0x2b6)]===_0x5d8463(0x1e2)?_0x44f90d+_0x2e55fb/0x2:_0x44f90d,'y2':_0x108a15['dy']<0x0?_0x1105ad:_0x1105ad+_0x253248};if(_0x39dc95['x1']<0x0)_0x108a15=_0x48b39b[0x0];else _0x39dc95['x2']>_0xa9c7e6&&(_0x108a15=_0x48b39b[0x1]);if(_0x39dc95['y1']<0x0)_0x108a15=_0x48b39b[0x3];else _0x39dc95['y2']>_0x4f064b&&(_0x108a15=_0x48b39b[0x2]);}var _0x8dab0a=svg[_0x5d8463(0x264)](_0x5d8463(0x1e4))['attr'](_0x5d8463(0x201),'team-label\x20'+_0x10debf)[_0x5d8463(0x25d)]('x',_0xf574b4+_0x108a15['dx'])[_0x5d8463(0x25d)]('y',_0x3c2804+_0x108a15['dy'])['attr'](_0x5d8463(0x27c),_0x108a15['anchor'])['attr']('dominant-baseline',_0x108a15['dy']<0x0?_0x5d8463(0x268):_0x5d8463(0x1d1))[_0x5d8463(0x1e4)](_0x3f2489[0x1])[_0x5d8463(0x22e)]('font-family',_0x5d8463(0x1f5))[_0x5d8463(0x22e)]('font-size','12px')['style'](_0x5d8463(0x1ea),_0x5d8463(0x1ee))['style'](_0x5d8463(0x22a),_0x5d8463(0x2aa));_0x1594d&&_0x8dab0a[_0x5d8463(0x293)](_0x5d8463(0x29e),!![]);var _0x13fdf4=_0x8dab0a['node']()[_0x5d8463(0x1fd)]();_0x46a89f[_0x5d8463(0x1f2)]({'x1':_0x13fdf4['x']-0x2,'y1':_0x13fdf4['y']-0x2,'x2':_0x13fdf4['x']+_0x13fdf4[_0x5d8463(0x227)]+0x2,'y2':_0x13fdf4['y']+_0x13fdf4['height']+0x2});}document[_0x49fb0f(0x2b1)]('DOMContentLoaded',function(){var _0x3bbbef=_0x49fb0f;const _0xf81de0=document[_0x3bbbef(0x21a)]('median-lines-tooltip');_0xf81de0[_0x3bbbef(0x23b)]=medianLinesVisible?_0x3bbbef(0x289):_0x3bbbef(0x220);});
    </script>
  <script>

        // Global translation helper function
        function getTranslation(key, defaultText) {
            // Split the key into parts (e.g., "tooltip.xg-line-title" -> ["tooltip", "xg-line-title"])
            const keys = key.split('.');
            
            // Try to find the translation in the current language
            try {
                let currentTranslations = window.currentTranslations || {};
                for (const k of keys) {
                    if (currentTranslations && currentTranslations[k]) {
                        currentTranslations = currentTranslations[k];
                    } else {
                        return defaultText;
                    }
                }
                return currentTranslations;
            } catch (e) {
                return defaultText;
            }
        }
        
  
  function getPreferredLanguage() {
    // PRIORITY 1: Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    if (langParam) {
      return langParam;
    }
    // PRIORITY 2: Check localStorage
    const storedLang = localStorage.getItem('preferredLanguage');
    if (storedLang) {
      return storedLang;
    }
    // PRIORITY 3: Use browser language
    return getBrowserLanguage() || 'en';
  }

  function getBrowserLanguage() {
    return navigator.language.slice(0, 2);
  }

  function applyLanguage(language) {
    console.log(language);

    if (language === 'en') {
      return;
    }

    
    fetch(`locales/${language}.json`)
      .then(response => {
        // Don't throw an error, just return null if response is not OK
        return response.ok ? response.json() : null;
      })
      .then(translations => {
        // Only proceed if translations exist
        if (translations) {
            window.currentTranslations = translations;
          document.querySelectorAll('[data-i18n]').forEach(element => {
            const keys = element.getAttribute('data-i18n').split('.');
            let value = translations;
            for (const key of keys) {
              if (value === undefined || value === null) break;
              value = value[key];
            }
            if (value) {
              if (element.tagName === 'INPUT') {
              element.setAttribute('placeholder', value);
          } else if (value.includes('<')) {
              element.innerHTML = value;
          } else {
              element.textContent = value;
          }          }
          });
        }
      })
      .catch(() => {
        // Completely empty catch block to silently ignore any errors
      });
  }
  
  const preferredLanguage = getPreferredLanguage();
  applyLanguage(preferredLanguage);
  

function toggleDarkMode() {
            const body = document.querySelector("body");
            body.classList.toggle("dark-mode");
            
            const isDarkMode = body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode);
            
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const storedDarkMode = localStorage.getItem("darkMode");
            
            if (storedDarkMode === "true") {
                const body = document.querySelector("body");
                body.classList.add("dark-mode");
            }
            
 
        });

        function takeScreenshot() {
            const chartContainer = document.querySelector('.chart-container');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            html2canvas(chartContainer, {
                scale: 2, // Higher quality
                backgroundColor: isDarkMode ? '#2c2c2c' : '#FFFFFF',
                allowTaint: true,
                useCORS: true,
                logging: false
            }).then(function(renderedCanvas) {
                const finalCanvas = document.createElement('canvas');
                finalCanvas.width = renderedCanvas.width;
                finalCanvas.height = renderedCanvas.height;
                const finalCtx = finalCanvas.getContext('2d');
                finalCtx.drawImage(renderedCanvas, 0, 0);
                
                // Load the watermark
                const watermarkImg = new Image();
                watermarkImg.crossOrigin = "Anonymous";
                
                watermarkImg.onload = function() {
                    const watermarkWidth = finalCanvas.width * 0.3;
                    const watermarkHeight = (watermarkWidth / watermarkImg.width) * watermarkImg.height;
                    
                    const x = (finalCanvas.width - watermarkWidth) / 2;
                    const y = (finalCanvas.height - watermarkHeight) / 2;
                    
                    finalCtx.save();
                    finalCtx.globalAlpha = 0.04;
                    finalCtx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight);
                    finalCtx.restore();
                    
                    const dataURL = finalCanvas.toDataURL('image/png', 1.0);
                    const link = document.createElement('a');
                    link.download = 'DataMB Screenshot.png';
                    link.href = dataURL;
                    link.click();
                };
                watermarkImg.src = 'https://datamb.football/logo.png';
            }).catch(function(error) {
            });
        }
    </script>
    
</body>
</html>
